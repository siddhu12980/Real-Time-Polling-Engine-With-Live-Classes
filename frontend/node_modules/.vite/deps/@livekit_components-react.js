import {
  ConnectionQuality,
  ConnectionState,
  LocalParticipant,
  LocalTrackPublication,
  LogLevel,
  MediaDeviceFailure,
  ParticipantEvent,
  ParticipantInfo_Kind,
  RemoteAudioTrack,
  RemoteTrackPublication,
  Room,
  RoomEvent,
  Track,
  TrackEvent,
  VideoPresets,
  compareVersions,
  createAudioAnalyser,
  createLocalAudioTrack,
  createLocalTracks,
  createLocalVideoTrack,
  facingModeFromLocalTrack,
  h,
  setLogExtension,
  setLogLevel
} from "./chunk-ANG4OEPF.js";
import {
  require_react
} from "./chunk-DRWLMN53.js";
import {
  __toESM
} from "./chunk-G3PMV62Z.js";

// node_modules/@livekit/components-react/dist/hooks-BZ9KhMcV.mjs
var r = __toESM(require_react(), 1);

// node_modules/@livekit/components-react/dist/contexts-568EHGLp.mjs
var D = __toESM(require_react(), 1);
var Ke = Math.min;
var ue = Math.max;
var ke = Math.round;
var te = (e3) => ({
  x: e3,
  y: e3
});
var Bn = {
  left: "right",
  right: "left",
  bottom: "top",
  top: "bottom"
};
var Vn = {
  start: "end",
  end: "start"
};
function bt(e3, t, n) {
  return ue(e3, Ke(t, n));
}
function Ne(e3, t) {
  return typeof e3 == "function" ? e3(t) : e3;
}
function oe(e3) {
  return e3.split("-")[0];
}
function $e(e3) {
  return e3.split("-")[1];
}
function jt(e3) {
  return e3 === "x" ? "y" : "x";
}
function Wt(e3) {
  return e3 === "y" ? "height" : "width";
}
function Ue(e3) {
  return ["top", "bottom"].includes(oe(e3)) ? "y" : "x";
}
function Bt(e3) {
  return jt(Ue(e3));
}
function Hn(e3, t, n) {
  n === void 0 && (n = false);
  const r2 = $e(e3), i = Bt(e3), o = Wt(i);
  let s = i === "x" ? r2 === (n ? "end" : "start") ? "right" : "left" : r2 === "start" ? "bottom" : "top";
  return t.reference[o] > t.floating[o] && (s = Oe(s)), [s, Oe(s)];
}
function zn(e3) {
  const t = Oe(e3);
  return [Qe(e3), t, Qe(t)];
}
function Qe(e3) {
  return e3.replace(/start|end/g, (t) => Vn[t]);
}
function Yn(e3, t, n) {
  const r2 = ["left", "right"], i = ["right", "left"], o = ["top", "bottom"], s = ["bottom", "top"];
  switch (e3) {
    case "top":
    case "bottom":
      return n ? t ? i : r2 : t ? r2 : i;
    case "left":
    case "right":
      return t ? o : s;
    default:
      return [];
  }
}
function Gn(e3, t, n, r2) {
  const i = $e(e3);
  let o = Yn(oe(e3), n === "start", r2);
  return i && (o = o.map((s) => s + "-" + i), t && (o = o.concat(o.map(Qe)))), o;
}
function Oe(e3) {
  return e3.replace(/left|right|bottom|top/g, (t) => Bn[t]);
}
function Kn(e3) {
  return {
    top: 0,
    right: 0,
    bottom: 0,
    left: 0,
    ...e3
  };
}
function Qn(e3) {
  return typeof e3 != "number" ? Kn(e3) : {
    top: e3,
    right: e3,
    bottom: e3,
    left: e3
  };
}
function Le(e3) {
  const {
    x: t,
    y: n,
    width: r2,
    height: i
  } = e3;
  return {
    width: r2,
    height: i,
    top: n,
    left: t,
    right: t + r2,
    bottom: n + i,
    x: t,
    y: n
  };
}
function yt(e3, t, n) {
  let {
    reference: r2,
    floating: i
  } = e3;
  const o = Ue(t), s = Bt(t), a2 = Wt(s), c = oe(t), u = o === "y", l = r2.x + r2.width / 2 - i.width / 2, f = r2.y + r2.height / 2 - i.height / 2, h2 = r2[a2] / 2 - i[a2] / 2;
  let d;
  switch (c) {
    case "top":
      d = {
        x: l,
        y: r2.y - i.height
      };
      break;
    case "bottom":
      d = {
        x: l,
        y: r2.y + r2.height
      };
      break;
    case "right":
      d = {
        x: r2.x + r2.width,
        y: f
      };
      break;
    case "left":
      d = {
        x: r2.x - i.width,
        y: f
      };
      break;
    default:
      d = {
        x: r2.x,
        y: r2.y
      };
  }
  switch ($e(t)) {
    case "start":
      d[s] -= h2 * (n && u ? -1 : 1);
      break;
    case "end":
      d[s] += h2 * (n && u ? -1 : 1);
      break;
  }
  return d;
}
var Jn = async (e3, t, n) => {
  const {
    placement: r2 = "bottom",
    strategy: i = "absolute",
    middleware: o = [],
    platform: s
  } = n, a2 = o.filter(Boolean), c = await (s.isRTL == null ? void 0 : s.isRTL(t));
  let u = await s.getElementRects({
    reference: e3,
    floating: t,
    strategy: i
  }), {
    x: l,
    y: f
  } = yt(u, r2, c), h2 = r2, d = {}, m = 0;
  for (let p = 0; p < a2.length; p++) {
    const {
      name: g,
      fn: v
    } = a2[p], {
      x: E,
      y: P2,
      data: L2,
      reset: C
    } = await v({
      x: l,
      y: f,
      initialPlacement: r2,
      placement: h2,
      strategy: i,
      middlewareData: d,
      rects: u,
      platform: s,
      elements: {
        reference: e3,
        floating: t
      }
    });
    l = E ?? l, f = P2 ?? f, d = {
      ...d,
      [g]: {
        ...d[g],
        ...L2
      }
    }, C && m <= 50 && (m++, typeof C == "object" && (C.placement && (h2 = C.placement), C.rects && (u = C.rects === true ? await s.getElementRects({
      reference: e3,
      floating: t,
      strategy: i
    }) : C.rects), {
      x: l,
      y: f
    } = yt(u, h2, c)), p = -1);
  }
  return {
    x: l,
    y: f,
    placement: h2,
    strategy: i,
    middlewareData: d
  };
};
async function Vt(e3, t) {
  var n;
  t === void 0 && (t = {});
  const {
    x: r2,
    y: i,
    platform: o,
    rects: s,
    elements: a2,
    strategy: c
  } = e3, {
    boundary: u = "clippingAncestors",
    rootBoundary: l = "viewport",
    elementContext: f = "floating",
    altBoundary: h2 = false,
    padding: d = 0
  } = Ne(t, e3), m = Qn(d), g = a2[h2 ? f === "floating" ? "reference" : "floating" : f], v = Le(await o.getClippingRect({
    element: (n = await (o.isElement == null ? void 0 : o.isElement(g))) == null || n ? g : g.contextElement || await (o.getDocumentElement == null ? void 0 : o.getDocumentElement(a2.floating)),
    boundary: u,
    rootBoundary: l,
    strategy: c
  })), E = f === "floating" ? {
    ...s.floating,
    x: r2,
    y: i
  } : s.reference, P2 = await (o.getOffsetParent == null ? void 0 : o.getOffsetParent(a2.floating)), L2 = await (o.isElement == null ? void 0 : o.isElement(P2)) ? await (o.getScale == null ? void 0 : o.getScale(P2)) || {
    x: 1,
    y: 1
  } : {
    x: 1,
    y: 1
  }, C = Le(o.convertOffsetParentRelativeRectToViewportRelativeRect ? await o.convertOffsetParentRelativeRectToViewportRelativeRect({
    elements: a2,
    rect: E,
    offsetParent: P2,
    strategy: c
  }) : E);
  return {
    top: (v.top - C.top + m.top) / L2.y,
    bottom: (C.bottom - v.bottom + m.bottom) / L2.y,
    left: (v.left - C.left + m.left) / L2.x,
    right: (C.right - v.right + m.right) / L2.x
  };
}
var qn = function(e3) {
  return e3 === void 0 && (e3 = {}), {
    name: "flip",
    options: e3,
    async fn(t) {
      var n, r2;
      const {
        placement: i,
        middlewareData: o,
        rects: s,
        initialPlacement: a2,
        platform: c,
        elements: u
      } = t, {
        mainAxis: l = true,
        crossAxis: f = true,
        fallbackPlacements: h2,
        fallbackStrategy: d = "bestFit",
        fallbackAxisSideDirection: m = "none",
        flipAlignment: p = true,
        ...g
      } = Ne(e3, t);
      if ((n = o.arrow) != null && n.alignmentOffset)
        return {};
      const v = oe(i), E = oe(a2) === a2, P2 = await (c.isRTL == null ? void 0 : c.isRTL(u.floating)), L2 = h2 || (E || !p ? [Oe(a2)] : zn(a2));
      !h2 && m !== "none" && L2.push(...Gn(a2, p, m, P2));
      const C = [a2, ...L2], ie2 = await Vt(t, g), K = [];
      let T2 = ((r2 = o.flip) == null ? void 0 : r2.overflows) || [];
      if (l && K.push(ie2[v]), f) {
        const S = Hn(i, s, P2);
        K.push(ie2[S[0]], ie2[S[1]]);
      }
      if (T2 = [...T2, {
        placement: i,
        overflows: K
      }], !K.every((S) => S <= 0)) {
        var x, I3;
        const S = (((x = o.flip) == null ? void 0 : x.index) || 0) + 1, V = C[S];
        if (V)
          return {
            data: {
              index: S,
              overflows: T2
            },
            reset: {
              placement: V
            }
          };
        let X2 = (I3 = T2.filter((Z2) => Z2.overflows[0] <= 0).sort((Z2, ce) => Z2.overflows[1] - ce.overflows[1])[0]) == null ? void 0 : I3.placement;
        if (!X2)
          switch (d) {
            case "bestFit": {
              var w;
              const Z2 = (w = T2.map((ce) => [ce.placement, ce.overflows.filter((ge2) => ge2 > 0).reduce((ge2, Un) => ge2 + Un, 0)]).sort((ce, ge2) => ce[1] - ge2[1])[0]) == null ? void 0 : w[0];
              Z2 && (X2 = Z2);
              break;
            }
            case "initialPlacement":
              X2 = a2;
              break;
          }
        if (i !== X2)
          return {
            reset: {
              placement: X2
            }
          };
      }
      return {};
    }
  };
};
async function Xn(e3, t) {
  const {
    placement: n,
    platform: r2,
    elements: i
  } = e3, o = await (r2.isRTL == null ? void 0 : r2.isRTL(i.floating)), s = oe(n), a2 = $e(n), c = Ue(n) === "y", u = ["left", "top"].includes(s) ? -1 : 1, l = o && c ? -1 : 1, f = Ne(t, e3);
  let {
    mainAxis: h2,
    crossAxis: d,
    alignmentAxis: m
  } = typeof f == "number" ? {
    mainAxis: f,
    crossAxis: 0,
    alignmentAxis: null
  } : {
    mainAxis: 0,
    crossAxis: 0,
    alignmentAxis: null,
    ...f
  };
  return a2 && typeof m == "number" && (d = a2 === "end" ? m * -1 : m), c ? {
    x: d * l,
    y: h2 * u
  } : {
    x: h2 * u,
    y: d * l
  };
}
var Zn = function(e3) {
  return e3 === void 0 && (e3 = 0), {
    name: "offset",
    options: e3,
    async fn(t) {
      var n, r2;
      const {
        x: i,
        y: o,
        placement: s,
        middlewareData: a2
      } = t, c = await Xn(t, e3);
      return s === ((n = a2.offset) == null ? void 0 : n.placement) && (r2 = a2.arrow) != null && r2.alignmentOffset ? {} : {
        x: i + c.x,
        y: o + c.y,
        data: {
          ...c,
          placement: s
        }
      };
    }
  };
};
var er = function(e3) {
  return e3 === void 0 && (e3 = {}), {
    name: "shift",
    options: e3,
    async fn(t) {
      const {
        x: n,
        y: r2,
        placement: i
      } = t, {
        mainAxis: o = true,
        crossAxis: s = false,
        limiter: a2 = {
          fn: (g) => {
            let {
              x: v,
              y: E
            } = g;
            return {
              x: v,
              y: E
            };
          }
        },
        ...c
      } = Ne(e3, t), u = {
        x: n,
        y: r2
      }, l = await Vt(t, c), f = Ue(oe(i)), h2 = jt(f);
      let d = u[h2], m = u[f];
      if (o) {
        const g = h2 === "y" ? "top" : "left", v = h2 === "y" ? "bottom" : "right", E = d + l[g], P2 = d - l[v];
        d = bt(E, d, P2);
      }
      if (s) {
        const g = f === "y" ? "top" : "left", v = f === "y" ? "bottom" : "right", E = m + l[g], P2 = m - l[v];
        m = bt(E, m, P2);
      }
      const p = a2.fn({
        ...t,
        [h2]: d,
        [f]: m
      });
      return {
        ...p,
        data: {
          x: p.x - n,
          y: p.y - r2
        }
      };
    }
  };
};
function Fe() {
  return typeof window < "u";
}
function ve(e3) {
  return Ht(e3) ? (e3.nodeName || "").toLowerCase() : "#document";
}
function U(e3) {
  var t;
  return (e3 == null || (t = e3.ownerDocument) == null ? void 0 : t.defaultView) || window;
}
function J(e3) {
  var t;
  return (t = (Ht(e3) ? e3.ownerDocument : e3.document) || window.document) == null ? void 0 : t.documentElement;
}
function Ht(e3) {
  return Fe() ? e3 instanceof Node || e3 instanceof U(e3).Node : false;
}
function H(e3) {
  return Fe() ? e3 instanceof Element || e3 instanceof U(e3).Element : false;
}
function G(e3) {
  return Fe() ? e3 instanceof HTMLElement || e3 instanceof U(e3).HTMLElement : false;
}
function wt(e3) {
  return !Fe() || typeof ShadowRoot > "u" ? false : e3 instanceof ShadowRoot || e3 instanceof U(e3).ShadowRoot;
}
function Ee(e3) {
  const {
    overflow: t,
    overflowX: n,
    overflowY: r2,
    display: i
  } = z(e3);
  return /auto|scroll|overlay|hidden|clip/.test(t + r2 + n) && !["inline", "contents"].includes(i);
}
function tr(e3) {
  return ["table", "td", "th"].includes(ve(e3));
}
function je(e3) {
  return [":popover-open", ":modal"].some((t) => {
    try {
      return e3.matches(t);
    } catch {
      return false;
    }
  });
}
function st(e3) {
  const t = at(), n = H(e3) ? z(e3) : e3;
  return n.transform !== "none" || n.perspective !== "none" || (n.containerType ? n.containerType !== "normal" : false) || !t && (n.backdropFilter ? n.backdropFilter !== "none" : false) || !t && (n.filter ? n.filter !== "none" : false) || ["transform", "perspective", "filter"].some((r2) => (n.willChange || "").includes(r2)) || ["paint", "layout", "strict", "content"].some((r2) => (n.contain || "").includes(r2));
}
function nr(e3) {
  let t = ne(e3);
  for (; G(t) && !de(t); ) {
    if (st(t))
      return t;
    if (je(t))
      return null;
    t = ne(t);
  }
  return null;
}
function at() {
  return typeof CSS > "u" || !CSS.supports ? false : CSS.supports("-webkit-backdrop-filter", "none");
}
function de(e3) {
  return ["html", "body", "#document"].includes(ve(e3));
}
function z(e3) {
  return U(e3).getComputedStyle(e3);
}
function We(e3) {
  return H(e3) ? {
    scrollLeft: e3.scrollLeft,
    scrollTop: e3.scrollTop
  } : {
    scrollLeft: e3.scrollX,
    scrollTop: e3.scrollY
  };
}
function ne(e3) {
  if (ve(e3) === "html")
    return e3;
  const t = (
    // Step into the shadow DOM of the parent of a slotted node.
    e3.assignedSlot || // DOM Element detected.
    e3.parentNode || // ShadowRoot detected.
    wt(e3) && e3.host || // Fallback.
    J(e3)
  );
  return wt(t) ? t.host : t;
}
function zt(e3) {
  const t = ne(e3);
  return de(t) ? e3.ownerDocument ? e3.ownerDocument.body : e3.body : G(t) && Ee(t) ? t : zt(t);
}
function Je(e3, t, n) {
  var r2;
  t === void 0 && (t = []), n === void 0 && (n = true);
  const i = zt(e3), o = i === ((r2 = e3.ownerDocument) == null ? void 0 : r2.body), s = U(i);
  if (o) {
    const a2 = qe(s);
    return t.concat(s, s.visualViewport || [], Ee(i) ? i : [], a2 && n ? Je(a2) : []);
  }
  return t.concat(i, Je(i, [], n));
}
function qe(e3) {
  return e3.parent && Object.getPrototypeOf(e3.parent) ? e3.frameElement : null;
}
function Yt(e3) {
  const t = z(e3);
  let n = parseFloat(t.width) || 0, r2 = parseFloat(t.height) || 0;
  const i = G(e3), o = i ? e3.offsetWidth : n, s = i ? e3.offsetHeight : r2, a2 = ke(n) !== o || ke(r2) !== s;
  return a2 && (n = o, r2 = s), {
    width: n,
    height: r2,
    $: a2
  };
}
function Gt(e3) {
  return H(e3) ? e3 : e3.contextElement;
}
function le(e3) {
  const t = Gt(e3);
  if (!G(t))
    return te(1);
  const n = t.getBoundingClientRect(), {
    width: r2,
    height: i,
    $: o
  } = Yt(t);
  let s = (o ? ke(n.width) : n.width) / r2, a2 = (o ? ke(n.height) : n.height) / i;
  return (!s || !Number.isFinite(s)) && (s = 1), (!a2 || !Number.isFinite(a2)) && (a2 = 1), {
    x: s,
    y: a2
  };
}
var rr = te(0);
function Kt(e3) {
  const t = U(e3);
  return !at() || !t.visualViewport ? rr : {
    x: t.visualViewport.offsetLeft,
    y: t.visualViewport.offsetTop
  };
}
function ir(e3, t, n) {
  return t === void 0 && (t = false), !n || t && n !== U(e3) ? false : t;
}
function we(e3, t, n, r2) {
  t === void 0 && (t = false), n === void 0 && (n = false);
  const i = e3.getBoundingClientRect(), o = Gt(e3);
  let s = te(1);
  t && (r2 ? H(r2) && (s = le(r2)) : s = le(e3));
  const a2 = ir(o, n, r2) ? Kt(o) : te(0);
  let c = (i.left + a2.x) / s.x, u = (i.top + a2.y) / s.y, l = i.width / s.x, f = i.height / s.y;
  if (o) {
    const h2 = U(o), d = r2 && H(r2) ? U(r2) : r2;
    let m = h2, p = qe(m);
    for (; p && r2 && d !== m; ) {
      const g = le(p), v = p.getBoundingClientRect(), E = z(p), P2 = v.left + (p.clientLeft + parseFloat(E.paddingLeft)) * g.x, L2 = v.top + (p.clientTop + parseFloat(E.paddingTop)) * g.y;
      c *= g.x, u *= g.y, l *= g.x, f *= g.y, c += P2, u += L2, m = U(p), p = qe(m);
    }
  }
  return Le({
    width: l,
    height: f,
    x: c,
    y: u
  });
}
function or(e3) {
  let {
    elements: t,
    rect: n,
    offsetParent: r2,
    strategy: i
  } = e3;
  const o = i === "fixed", s = J(r2), a2 = t ? je(t.floating) : false;
  if (r2 === s || a2 && o)
    return n;
  let c = {
    scrollLeft: 0,
    scrollTop: 0
  }, u = te(1);
  const l = te(0), f = G(r2);
  if ((f || !f && !o) && ((ve(r2) !== "body" || Ee(s)) && (c = We(r2)), G(r2))) {
    const h2 = we(r2);
    u = le(r2), l.x = h2.x + r2.clientLeft, l.y = h2.y + r2.clientTop;
  }
  return {
    width: n.width * u.x,
    height: n.height * u.y,
    x: n.x * u.x - c.scrollLeft * u.x + l.x,
    y: n.y * u.y - c.scrollTop * u.y + l.y
  };
}
function sr(e3) {
  return Array.from(e3.getClientRects());
}
function Xe(e3, t) {
  const n = We(e3).scrollLeft;
  return t ? t.left + n : we(J(e3)).left + n;
}
function ar(e3) {
  const t = J(e3), n = We(e3), r2 = e3.ownerDocument.body, i = ue(t.scrollWidth, t.clientWidth, r2.scrollWidth, r2.clientWidth), o = ue(t.scrollHeight, t.clientHeight, r2.scrollHeight, r2.clientHeight);
  let s = -n.scrollLeft + Xe(e3);
  const a2 = -n.scrollTop;
  return z(r2).direction === "rtl" && (s += ue(t.clientWidth, r2.clientWidth) - i), {
    width: i,
    height: o,
    x: s,
    y: a2
  };
}
function cr(e3, t) {
  const n = U(e3), r2 = J(e3), i = n.visualViewport;
  let o = r2.clientWidth, s = r2.clientHeight, a2 = 0, c = 0;
  if (i) {
    o = i.width, s = i.height;
    const u = at();
    (!u || u && t === "fixed") && (a2 = i.offsetLeft, c = i.offsetTop);
  }
  return {
    width: o,
    height: s,
    x: a2,
    y: c
  };
}
function ur(e3, t) {
  const n = we(e3, true, t === "fixed"), r2 = n.top + e3.clientTop, i = n.left + e3.clientLeft, o = G(e3) ? le(e3) : te(1), s = e3.clientWidth * o.x, a2 = e3.clientHeight * o.y, c = i * o.x, u = r2 * o.y;
  return {
    width: s,
    height: a2,
    x: c,
    y: u
  };
}
function St(e3, t, n) {
  let r2;
  if (t === "viewport")
    r2 = cr(e3, n);
  else if (t === "document")
    r2 = ar(J(e3));
  else if (H(t))
    r2 = ur(t, n);
  else {
    const i = Kt(e3);
    r2 = {
      ...t,
      x: t.x - i.x,
      y: t.y - i.y
    };
  }
  return Le(r2);
}
function Qt(e3, t) {
  const n = ne(e3);
  return n === t || !H(n) || de(n) ? false : z(n).position === "fixed" || Qt(n, t);
}
function lr(e3, t) {
  const n = t.get(e3);
  if (n)
    return n;
  let r2 = Je(e3, [], false).filter((a2) => H(a2) && ve(a2) !== "body"), i = null;
  const o = z(e3).position === "fixed";
  let s = o ? ne(e3) : e3;
  for (; H(s) && !de(s); ) {
    const a2 = z(s), c = st(s);
    !c && a2.position === "fixed" && (i = null), (o ? !c && !i : !c && a2.position === "static" && !!i && ["absolute", "fixed"].includes(i.position) || Ee(s) && !c && Qt(e3, s)) ? r2 = r2.filter((l) => l !== s) : i = a2, s = ne(s);
  }
  return t.set(e3, r2), r2;
}
function fr(e3) {
  let {
    element: t,
    boundary: n,
    rootBoundary: r2,
    strategy: i
  } = e3;
  const s = [...n === "clippingAncestors" ? je(t) ? [] : lr(t, this._c) : [].concat(n), r2], a2 = s[0], c = s.reduce((u, l) => {
    const f = St(t, l, i);
    return u.top = ue(f.top, u.top), u.right = Ke(f.right, u.right), u.bottom = Ke(f.bottom, u.bottom), u.left = ue(f.left, u.left), u;
  }, St(t, a2, i));
  return {
    width: c.right - c.left,
    height: c.bottom - c.top,
    x: c.left,
    y: c.top
  };
}
function dr(e3) {
  const {
    width: t,
    height: n
  } = Yt(e3);
  return {
    width: t,
    height: n
  };
}
function pr(e3, t, n) {
  const r2 = G(t), i = J(t), o = n === "fixed", s = we(e3, true, o, t);
  let a2 = {
    scrollLeft: 0,
    scrollTop: 0
  };
  const c = te(0);
  if (r2 || !r2 && !o)
    if ((ve(t) !== "body" || Ee(i)) && (a2 = We(t)), r2) {
      const d = we(t, true, o, t);
      c.x = d.x + t.clientLeft, c.y = d.y + t.clientTop;
    } else i && (c.x = Xe(i));
  let u = 0, l = 0;
  if (i && !r2 && !o) {
    const d = i.getBoundingClientRect();
    l = d.top + a2.scrollTop, u = d.left + a2.scrollLeft - // RTL <body> scrollbar.
    Xe(i, d);
  }
  const f = s.left + a2.scrollLeft - c.x - u, h2 = s.top + a2.scrollTop - c.y - l;
  return {
    x: f,
    y: h2,
    width: s.width,
    height: s.height
  };
}
function He(e3) {
  return z(e3).position === "static";
}
function xt(e3, t) {
  if (!G(e3) || z(e3).position === "fixed")
    return null;
  if (t)
    return t(e3);
  let n = e3.offsetParent;
  return J(e3) === n && (n = n.ownerDocument.body), n;
}
function Jt(e3, t) {
  const n = U(e3);
  if (je(e3))
    return n;
  if (!G(e3)) {
    let i = ne(e3);
    for (; i && !de(i); ) {
      if (H(i) && !He(i))
        return i;
      i = ne(i);
    }
    return n;
  }
  let r2 = xt(e3, t);
  for (; r2 && tr(r2) && He(r2); )
    r2 = xt(r2, t);
  return r2 && de(r2) && He(r2) && !st(r2) ? n : r2 || nr(e3) || n;
}
var hr = async function(e3) {
  const t = this.getOffsetParent || Jt, n = this.getDimensions, r2 = await n(e3.floating);
  return {
    reference: pr(e3.reference, await t(e3.floating), e3.strategy),
    floating: {
      x: 0,
      y: 0,
      width: r2.width,
      height: r2.height
    }
  };
};
function vr(e3) {
  return z(e3).direction === "rtl";
}
var mr = {
  convertOffsetParentRelativeRectToViewportRelativeRect: or,
  getDocumentElement: J,
  getClippingRect: fr,
  getOffsetParent: Jt,
  getElementRects: hr,
  getClientRects: sr,
  getDimensions: dr,
  getScale: le,
  isElement: H,
  isRTL: vr
};
var gr = Zn;
var br = er;
var yr = qn;
var wr = (e3, t, n) => {
  const r2 = /* @__PURE__ */ new Map(), i = {
    platform: mr,
    ...n
  }, o = {
    ...i.platform,
    _c: r2
  };
  return Jn(e3, t, {
    ...i,
    platform: o
  });
};
var Sr = typeof globalThis < "u" ? globalThis : typeof window < "u" ? window : typeof global < "u" ? global : typeof self < "u" ? self : {};
function xr(e3) {
  return e3 && e3.__esModule && Object.prototype.hasOwnProperty.call(e3, "default") ? e3.default : e3;
}
var qt = { exports: {} };
(function(e3) {
  (function(t, n) {
    e3.exports ? e3.exports = n() : t.log = n();
  })(Sr, function() {
    var t = function() {
    }, n = "undefined", r2 = typeof window !== n && typeof window.navigator !== n && /Trident\/|MSIE /.test(window.navigator.userAgent), i = [
      "trace",
      "debug",
      "info",
      "warn",
      "error"
    ], o = {}, s = null;
    function a2(p, g) {
      var v = p[g];
      if (typeof v.bind == "function")
        return v.bind(p);
      try {
        return Function.prototype.bind.call(v, p);
      } catch {
        return function() {
          return Function.prototype.apply.apply(v, [p, arguments]);
        };
      }
    }
    function c() {
      console.log && (console.log.apply ? console.log.apply(console, arguments) : Function.prototype.apply.apply(console.log, [console, arguments])), console.trace && console.trace();
    }
    function u(p) {
      return p === "debug" && (p = "log"), typeof console === n ? false : p === "trace" && r2 ? c : console[p] !== void 0 ? a2(console, p) : console.log !== void 0 ? a2(console, "log") : t;
    }
    function l() {
      for (var p = this.getLevel(), g = 0; g < i.length; g++) {
        var v = i[g];
        this[v] = g < p ? t : this.methodFactory(v, p, this.name);
      }
      if (this.log = this.debug, typeof console === n && p < this.levels.SILENT)
        return "No console available for logging";
    }
    function f(p) {
      return function() {
        typeof console !== n && (l.call(this), this[p].apply(this, arguments));
      };
    }
    function h2(p, g, v) {
      return u(p) || f.apply(this, arguments);
    }
    function d(p, g) {
      var v = this, E, P2, L2, C = "loglevel";
      typeof p == "string" ? C += ":" + p : typeof p == "symbol" && (C = void 0);
      function ie2(w) {
        var S = (i[w] || "silent").toUpperCase();
        if (!(typeof window === n || !C)) {
          try {
            window.localStorage[C] = S;
            return;
          } catch {
          }
          try {
            window.document.cookie = encodeURIComponent(C) + "=" + S + ";";
          } catch {
          }
        }
      }
      function K() {
        var w;
        if (!(typeof window === n || !C)) {
          try {
            w = window.localStorage[C];
          } catch {
          }
          if (typeof w === n)
            try {
              var S = window.document.cookie, V = encodeURIComponent(C), X2 = S.indexOf(V + "=");
              X2 !== -1 && (w = /^([^;]+)/.exec(
                S.slice(X2 + V.length + 1)
              )[1]);
            } catch {
            }
          return v.levels[w] === void 0 && (w = void 0), w;
        }
      }
      function T2() {
        if (!(typeof window === n || !C)) {
          try {
            window.localStorage.removeItem(C);
          } catch {
          }
          try {
            window.document.cookie = encodeURIComponent(C) + "=; expires=Thu, 01 Jan 1970 00:00:00 UTC";
          } catch {
          }
        }
      }
      function x(w) {
        var S = w;
        if (typeof S == "string" && v.levels[S.toUpperCase()] !== void 0 && (S = v.levels[S.toUpperCase()]), typeof S == "number" && S >= 0 && S <= v.levels.SILENT)
          return S;
        throw new TypeError("log.setLevel() called with invalid level: " + w);
      }
      v.name = p, v.levels = {
        TRACE: 0,
        DEBUG: 1,
        INFO: 2,
        WARN: 3,
        ERROR: 4,
        SILENT: 5
      }, v.methodFactory = g || h2, v.getLevel = function() {
        return L2 ?? P2 ?? E;
      }, v.setLevel = function(w, S) {
        return L2 = x(w), S !== false && ie2(L2), l.call(v);
      }, v.setDefaultLevel = function(w) {
        P2 = x(w), K() || v.setLevel(w, false);
      }, v.resetLevel = function() {
        L2 = null, T2(), l.call(v);
      }, v.enableAll = function(w) {
        v.setLevel(v.levels.TRACE, w);
      }, v.disableAll = function(w) {
        v.setLevel(v.levels.SILENT, w);
      }, v.rebuild = function() {
        if (s !== v && (E = x(s.getLevel())), l.call(v), s === v)
          for (var w in o)
            o[w].rebuild();
      }, E = x(
        s ? s.getLevel() : "WARN"
      );
      var I3 = K();
      I3 != null && (L2 = x(I3)), l.call(v);
    }
    s = new d(), s.getLogger = function(g) {
      if (typeof g != "symbol" && typeof g != "string" || g === "")
        throw new TypeError("You must supply a name when creating a logger.");
      var v = o[g];
      return v || (v = o[g] = new d(
        g,
        s.methodFactory
      )), v;
    };
    var m = typeof window !== n ? window.log : void 0;
    return s.noConflict = function() {
      return typeof window !== n && window.log === s && (window.log = m), s;
    }, s.getLoggers = function() {
      return o;
    }, s.default = s, s;
  });
})(qt);
var Er = qt.exports;
var Tr = xr(Er);
var Ze = function(e3, t) {
  return Ze = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(n, r2) {
    n.__proto__ = r2;
  } || function(n, r2) {
    for (var i in r2) Object.prototype.hasOwnProperty.call(r2, i) && (n[i] = r2[i]);
  }, Ze(e3, t);
};
function q(e3, t) {
  if (typeof t != "function" && t !== null)
    throw new TypeError("Class extends value " + String(t) + " is not a constructor or null");
  Ze(e3, t);
  function n() {
    this.constructor = e3;
  }
  e3.prototype = t === null ? Object.create(t) : (n.prototype = t.prototype, new n());
}
function Cr(e3, t, n, r2) {
  function i(o) {
    return o instanceof n ? o : new n(function(s) {
      s(o);
    });
  }
  return new (n || (n = Promise))(function(o, s) {
    function a2(l) {
      try {
        u(r2.next(l));
      } catch (f) {
        s(f);
      }
    }
    function c(l) {
      try {
        u(r2.throw(l));
      } catch (f) {
        s(f);
      }
    }
    function u(l) {
      l.done ? o(l.value) : i(l.value).then(a2, c);
    }
    u((r2 = r2.apply(e3, t || [])).next());
  });
}
function Xt(e3, t) {
  var n = { label: 0, sent: function() {
    if (o[0] & 1) throw o[1];
    return o[1];
  }, trys: [], ops: [] }, r2, i, o, s = Object.create((typeof Iterator == "function" ? Iterator : Object).prototype);
  return s.next = a2(0), s.throw = a2(1), s.return = a2(2), typeof Symbol == "function" && (s[Symbol.iterator] = function() {
    return this;
  }), s;
  function a2(u) {
    return function(l) {
      return c([u, l]);
    };
  }
  function c(u) {
    if (r2) throw new TypeError("Generator is already executing.");
    for (; s && (s = 0, u[0] && (n = 0)), n; ) try {
      if (r2 = 1, i && (o = u[0] & 2 ? i.return : u[0] ? i.throw || ((o = i.return) && o.call(i), 0) : i.next) && !(o = o.call(i, u[1])).done) return o;
      switch (i = 0, o && (u = [u[0] & 2, o.value]), u[0]) {
        case 0:
        case 1:
          o = u;
          break;
        case 4:
          return n.label++, { value: u[1], done: false };
        case 5:
          n.label++, i = u[1], u = [0];
          continue;
        case 7:
          u = n.ops.pop(), n.trys.pop();
          continue;
        default:
          if (o = n.trys, !(o = o.length > 0 && o[o.length - 1]) && (u[0] === 6 || u[0] === 2)) {
            n = 0;
            continue;
          }
          if (u[0] === 3 && (!o || u[1] > o[0] && u[1] < o[3])) {
            n.label = u[1];
            break;
          }
          if (u[0] === 6 && n.label < o[1]) {
            n.label = o[1], o = u;
            break;
          }
          if (o && n.label < o[2]) {
            n.label = o[2], n.ops.push(u);
            break;
          }
          o[2] && n.ops.pop(), n.trys.pop();
          continue;
      }
      u = t.call(e3, n);
    } catch (l) {
      u = [6, l], i = 0;
    } finally {
      r2 = o = 0;
    }
    if (u[0] & 5) throw u[1];
    return { value: u[0] ? u[1] : void 0, done: true };
  }
}
function pe(e3) {
  var t = typeof Symbol == "function" && Symbol.iterator, n = t && e3[t], r2 = 0;
  if (n) return n.call(e3);
  if (e3 && typeof e3.length == "number") return {
    next: function() {
      return e3 && r2 >= e3.length && (e3 = void 0), { value: e3 && e3[r2++], done: !e3 };
    }
  };
  throw new TypeError(t ? "Object is not iterable." : "Symbol.iterator is not defined.");
}
function he(e3, t) {
  var n = typeof Symbol == "function" && e3[Symbol.iterator];
  if (!n) return e3;
  var r2 = n.call(e3), i, o = [], s;
  try {
    for (; (t === void 0 || t-- > 0) && !(i = r2.next()).done; ) o.push(i.value);
  } catch (a2) {
    s = { error: a2 };
  } finally {
    try {
      i && !i.done && (n = r2.return) && n.call(r2);
    } finally {
      if (s) throw s.error;
    }
  }
  return o;
}
function Se(e3, t, n) {
  if (n || arguments.length === 2) for (var r2 = 0, i = t.length, o; r2 < i; r2++)
    (o || !(r2 in t)) && (o || (o = Array.prototype.slice.call(t, 0, r2)), o[r2] = t[r2]);
  return e3.concat(o || Array.prototype.slice.call(t));
}
function fe(e3) {
  return this instanceof fe ? (this.v = e3, this) : new fe(e3);
}
function Pr(e3, t, n) {
  if (!Symbol.asyncIterator) throw new TypeError("Symbol.asyncIterator is not defined.");
  var r2 = n.apply(e3, t || []), i, o = [];
  return i = Object.create((typeof AsyncIterator == "function" ? AsyncIterator : Object).prototype), a2("next"), a2("throw"), a2("return", s), i[Symbol.asyncIterator] = function() {
    return this;
  }, i;
  function s(d) {
    return function(m) {
      return Promise.resolve(m).then(d, f);
    };
  }
  function a2(d, m) {
    r2[d] && (i[d] = function(p) {
      return new Promise(function(g, v) {
        o.push([d, p, g, v]) > 1 || c(d, p);
      });
    }, m && (i[d] = m(i[d])));
  }
  function c(d, m) {
    try {
      u(r2[d](m));
    } catch (p) {
      h2(o[0][3], p);
    }
  }
  function u(d) {
    d.value instanceof fe ? Promise.resolve(d.value.v).then(l, f) : h2(o[0][2], d);
  }
  function l(d) {
    c("next", d);
  }
  function f(d) {
    c("throw", d);
  }
  function h2(d, m) {
    d(m), o.shift(), o.length && c(o[0][0], o[0][1]);
  }
}
function Ar(e3) {
  if (!Symbol.asyncIterator) throw new TypeError("Symbol.asyncIterator is not defined.");
  var t = e3[Symbol.asyncIterator], n;
  return t ? t.call(e3) : (e3 = typeof pe == "function" ? pe(e3) : e3[Symbol.iterator](), n = {}, r2("next"), r2("throw"), r2("return"), n[Symbol.asyncIterator] = function() {
    return this;
  }, n);
  function r2(o) {
    n[o] = e3[o] && function(s) {
      return new Promise(function(a2, c) {
        s = e3[o](s), i(a2, c, s.done, s.value);
      });
    };
  }
  function i(o, s, a2, c) {
    Promise.resolve(c).then(function(u) {
      o({ value: u, done: a2 });
    }, s);
  }
}
function A(e3) {
  return typeof e3 == "function";
}
function ct(e3) {
  var t = function(r2) {
    Error.call(r2), r2.stack = new Error().stack;
  }, n = e3(t);
  return n.prototype = Object.create(Error.prototype), n.prototype.constructor = n, n;
}
var ze = ct(function(e3) {
  return function(n) {
    e3(this), this.message = n ? n.length + ` errors occurred during unsubscription:
` + n.map(function(r2, i) {
      return i + 1 + ") " + r2.toString();
    }).join(`
  `) : "", this.name = "UnsubscriptionError", this.errors = n;
  };
});
function _e(e3, t) {
  if (e3) {
    var n = e3.indexOf(t);
    0 <= n && e3.splice(n, 1);
  }
}
var Te = function() {
  function e3(t) {
    this.initialTeardown = t, this.closed = false, this._parentage = null, this._finalizers = null;
  }
  return e3.prototype.unsubscribe = function() {
    var t, n, r2, i, o;
    if (!this.closed) {
      this.closed = true;
      var s = this._parentage;
      if (s)
        if (this._parentage = null, Array.isArray(s))
          try {
            for (var a2 = pe(s), c = a2.next(); !c.done; c = a2.next()) {
              var u = c.value;
              u.remove(this);
            }
          } catch (p) {
            t = { error: p };
          } finally {
            try {
              c && !c.done && (n = a2.return) && n.call(a2);
            } finally {
              if (t) throw t.error;
            }
          }
        else
          s.remove(this);
      var l = this.initialTeardown;
      if (A(l))
        try {
          l();
        } catch (p) {
          o = p instanceof ze ? p.errors : [p];
        }
      var f = this._finalizers;
      if (f) {
        this._finalizers = null;
        try {
          for (var h2 = pe(f), d = h2.next(); !d.done; d = h2.next()) {
            var m = d.value;
            try {
              Et(m);
            } catch (p) {
              o = o ?? [], p instanceof ze ? o = Se(Se([], he(o)), he(p.errors)) : o.push(p);
            }
          }
        } catch (p) {
          r2 = { error: p };
        } finally {
          try {
            d && !d.done && (i = h2.return) && i.call(h2);
          } finally {
            if (r2) throw r2.error;
          }
        }
      }
      if (o)
        throw new ze(o);
    }
  }, e3.prototype.add = function(t) {
    var n;
    if (t && t !== this)
      if (this.closed)
        Et(t);
      else {
        if (t instanceof e3) {
          if (t.closed || t._hasParent(this))
            return;
          t._addParent(this);
        }
        (this._finalizers = (n = this._finalizers) !== null && n !== void 0 ? n : []).push(t);
      }
  }, e3.prototype._hasParent = function(t) {
    var n = this._parentage;
    return n === t || Array.isArray(n) && n.includes(t);
  }, e3.prototype._addParent = function(t) {
    var n = this._parentage;
    this._parentage = Array.isArray(n) ? (n.push(t), n) : n ? [n, t] : t;
  }, e3.prototype._removeParent = function(t) {
    var n = this._parentage;
    n === t ? this._parentage = null : Array.isArray(n) && _e(n, t);
  }, e3.prototype.remove = function(t) {
    var n = this._finalizers;
    n && _e(n, t), t instanceof e3 && t._removeParent(this);
  }, e3.EMPTY = function() {
    var t = new e3();
    return t.closed = true, t;
  }(), e3;
}();
var Zt = Te.EMPTY;
function en(e3) {
  return e3 instanceof Te || e3 && "closed" in e3 && A(e3.remove) && A(e3.add) && A(e3.unsubscribe);
}
function Et(e3) {
  A(e3) ? e3() : e3.unsubscribe();
}
var tn = {
  onUnhandledError: null,
  onStoppedNotification: null,
  Promise: void 0,
  useDeprecatedSynchronousErrorHandling: false,
  useDeprecatedNextContext: false
};
var nn = {
  setTimeout: function(e3, t) {
    for (var n = [], r2 = 2; r2 < arguments.length; r2++)
      n[r2 - 2] = arguments[r2];
    return setTimeout.apply(void 0, Se([e3, t], he(n)));
  },
  clearTimeout: function(e3) {
    var t = nn.delegate;
    return ((t == null ? void 0 : t.clearTimeout) || clearTimeout)(e3);
  },
  delegate: void 0
};
function rn(e3) {
  nn.setTimeout(function() {
    throw e3;
  });
}
function Ie() {
}
function Ae(e3) {
  e3();
}
var ut = function(e3) {
  q(t, e3);
  function t(n) {
    var r2 = e3.call(this) || this;
    return r2.isStopped = false, n ? (r2.destination = n, en(n) && n.add(r2)) : r2.destination = _r, r2;
  }
  return t.create = function(n, r2, i) {
    return new et(n, r2, i);
  }, t.prototype.next = function(n) {
    this.isStopped || this._next(n);
  }, t.prototype.error = function(n) {
    this.isStopped || (this.isStopped = true, this._error(n));
  }, t.prototype.complete = function() {
    this.isStopped || (this.isStopped = true, this._complete());
  }, t.prototype.unsubscribe = function() {
    this.closed || (this.isStopped = true, e3.prototype.unsubscribe.call(this), this.destination = null);
  }, t.prototype._next = function(n) {
    this.destination.next(n);
  }, t.prototype._error = function(n) {
    try {
      this.destination.error(n);
    } finally {
      this.unsubscribe();
    }
  }, t.prototype._complete = function() {
    try {
      this.destination.complete();
    } finally {
      this.unsubscribe();
    }
  }, t;
}(Te);
var kr = Function.prototype.bind;
function Ye(e3, t) {
  return kr.call(e3, t);
}
var Or = function() {
  function e3(t) {
    this.partialObserver = t;
  }
  return e3.prototype.next = function(t) {
    var n = this.partialObserver;
    if (n.next)
      try {
        n.next(t);
      } catch (r2) {
        Ce(r2);
      }
  }, e3.prototype.error = function(t) {
    var n = this.partialObserver;
    if (n.error)
      try {
        n.error(t);
      } catch (r2) {
        Ce(r2);
      }
    else
      Ce(t);
  }, e3.prototype.complete = function() {
    var t = this.partialObserver;
    if (t.complete)
      try {
        t.complete();
      } catch (n) {
        Ce(n);
      }
  }, e3;
}();
var et = function(e3) {
  q(t, e3);
  function t(n, r2, i) {
    var o = e3.call(this) || this, s;
    if (A(n) || !n)
      s = {
        next: n ?? void 0,
        error: r2 ?? void 0,
        complete: i ?? void 0
      };
    else {
      var a2;
      o && tn.useDeprecatedNextContext ? (a2 = Object.create(n), a2.unsubscribe = function() {
        return o.unsubscribe();
      }, s = {
        next: n.next && Ye(n.next, a2),
        error: n.error && Ye(n.error, a2),
        complete: n.complete && Ye(n.complete, a2)
      }) : s = n;
    }
    return o.destination = new Or(s), o;
  }
  return t;
}(ut);
function Ce(e3) {
  rn(e3);
}
function Lr(e3) {
  throw e3;
}
var _r = {
  closed: true,
  next: Ie,
  error: Lr,
  complete: Ie
};
var lt = function() {
  return typeof Symbol == "function" && Symbol.observable || "@@observable";
}();
function ft(e3) {
  return e3;
}
function Ir(e3) {
  return e3.length === 0 ? ft : e3.length === 1 ? e3[0] : function(n) {
    return e3.reduce(function(r2, i) {
      return i(r2);
    }, n);
  };
}
var O = function() {
  function e3(t) {
    t && (this._subscribe = t);
  }
  return e3.prototype.lift = function(t) {
    var n = new e3();
    return n.source = this, n.operator = t, n;
  }, e3.prototype.subscribe = function(t, n, r2) {
    var i = this, o = Mr(t) ? t : new et(t, n, r2);
    return Ae(function() {
      var s = i, a2 = s.operator, c = s.source;
      o.add(a2 ? a2.call(o, c) : c ? i._subscribe(o) : i._trySubscribe(o));
    }), o;
  }, e3.prototype._trySubscribe = function(t) {
    try {
      return this._subscribe(t);
    } catch (n) {
      t.error(n);
    }
  }, e3.prototype.forEach = function(t, n) {
    var r2 = this;
    return n = Tt(n), new n(function(i, o) {
      var s = new et({
        next: function(a2) {
          try {
            t(a2);
          } catch (c) {
            o(c), s.unsubscribe();
          }
        },
        error: o,
        complete: i
      });
      r2.subscribe(s);
    });
  }, e3.prototype._subscribe = function(t) {
    var n;
    return (n = this.source) === null || n === void 0 ? void 0 : n.subscribe(t);
  }, e3.prototype[lt] = function() {
    return this;
  }, e3.prototype.pipe = function() {
    for (var t = [], n = 0; n < arguments.length; n++)
      t[n] = arguments[n];
    return Ir(t)(this);
  }, e3.prototype.toPromise = function(t) {
    var n = this;
    return t = Tt(t), new t(function(r2, i) {
      var o;
      n.subscribe(function(s) {
        return o = s;
      }, function(s) {
        return i(s);
      }, function() {
        return r2(o);
      });
    });
  }, e3.create = function(t) {
    return new e3(t);
  }, e3;
}();
function Tt(e3) {
  var t;
  return (t = e3 ?? tn.Promise) !== null && t !== void 0 ? t : Promise;
}
function Dr(e3) {
  return e3 && A(e3.next) && A(e3.error) && A(e3.complete);
}
function Mr(e3) {
  return e3 && e3 instanceof ut || Dr(e3) && en(e3);
}
function Rr(e3) {
  return A(e3 == null ? void 0 : e3.lift);
}
function B(e3) {
  return function(t) {
    if (Rr(t))
      return t.lift(function(n) {
        try {
          return e3(n, this);
        } catch (r2) {
          this.error(r2);
        }
      });
    throw new TypeError("Unable to lift unknown Observable type");
  };
}
function j(e3, t, n, r2, i) {
  return new Nr(e3, t, n, r2, i);
}
var Nr = function(e3) {
  q(t, e3);
  function t(n, r2, i, o, s, a2) {
    var c = e3.call(this, n) || this;
    return c.onFinalize = s, c.shouldUnsubscribe = a2, c._next = r2 ? function(u) {
      try {
        r2(u);
      } catch (l) {
        n.error(l);
      }
    } : e3.prototype._next, c._error = o ? function(u) {
      try {
        o(u);
      } catch (l) {
        n.error(l);
      } finally {
        this.unsubscribe();
      }
    } : e3.prototype._error, c._complete = i ? function() {
      try {
        i();
      } catch (u) {
        n.error(u);
      } finally {
        this.unsubscribe();
      }
    } : e3.prototype._complete, c;
  }
  return t.prototype.unsubscribe = function() {
    var n;
    if (!this.shouldUnsubscribe || this.shouldUnsubscribe()) {
      var r2 = this.closed;
      e3.prototype.unsubscribe.call(this), !r2 && ((n = this.onFinalize) === null || n === void 0 || n.call(this));
    }
  }, t;
}(ut);
var $r = ct(function(e3) {
  return function() {
    e3(this), this.name = "ObjectUnsubscribedError", this.message = "object unsubscribed";
  };
});
var re = function(e3) {
  q(t, e3);
  function t() {
    var n = e3.call(this) || this;
    return n.closed = false, n.currentObservers = null, n.observers = [], n.isStopped = false, n.hasError = false, n.thrownError = null, n;
  }
  return t.prototype.lift = function(n) {
    var r2 = new Ct(this, this);
    return r2.operator = n, r2;
  }, t.prototype._throwIfClosed = function() {
    if (this.closed)
      throw new $r();
  }, t.prototype.next = function(n) {
    var r2 = this;
    Ae(function() {
      var i, o;
      if (r2._throwIfClosed(), !r2.isStopped) {
        r2.currentObservers || (r2.currentObservers = Array.from(r2.observers));
        try {
          for (var s = pe(r2.currentObservers), a2 = s.next(); !a2.done; a2 = s.next()) {
            var c = a2.value;
            c.next(n);
          }
        } catch (u) {
          i = { error: u };
        } finally {
          try {
            a2 && !a2.done && (o = s.return) && o.call(s);
          } finally {
            if (i) throw i.error;
          }
        }
      }
    });
  }, t.prototype.error = function(n) {
    var r2 = this;
    Ae(function() {
      if (r2._throwIfClosed(), !r2.isStopped) {
        r2.hasError = r2.isStopped = true, r2.thrownError = n;
        for (var i = r2.observers; i.length; )
          i.shift().error(n);
      }
    });
  }, t.prototype.complete = function() {
    var n = this;
    Ae(function() {
      if (n._throwIfClosed(), !n.isStopped) {
        n.isStopped = true;
        for (var r2 = n.observers; r2.length; )
          r2.shift().complete();
      }
    });
  }, t.prototype.unsubscribe = function() {
    this.isStopped = this.closed = true, this.observers = this.currentObservers = null;
  }, Object.defineProperty(t.prototype, "observed", {
    get: function() {
      var n;
      return ((n = this.observers) === null || n === void 0 ? void 0 : n.length) > 0;
    },
    enumerable: false,
    configurable: true
  }), t.prototype._trySubscribe = function(n) {
    return this._throwIfClosed(), e3.prototype._trySubscribe.call(this, n);
  }, t.prototype._subscribe = function(n) {
    return this._throwIfClosed(), this._checkFinalizedStatuses(n), this._innerSubscribe(n);
  }, t.prototype._innerSubscribe = function(n) {
    var r2 = this, i = this, o = i.hasError, s = i.isStopped, a2 = i.observers;
    return o || s ? Zt : (this.currentObservers = null, a2.push(n), new Te(function() {
      r2.currentObservers = null, _e(a2, n);
    }));
  }, t.prototype._checkFinalizedStatuses = function(n) {
    var r2 = this, i = r2.hasError, o = r2.thrownError, s = r2.isStopped;
    i ? n.error(o) : s && n.complete();
  }, t.prototype.asObservable = function() {
    var n = new O();
    return n.source = this, n;
  }, t.create = function(n, r2) {
    return new Ct(n, r2);
  }, t;
}(O);
var Ct = function(e3) {
  q(t, e3);
  function t(n, r2) {
    var i = e3.call(this) || this;
    return i.destination = n, i.source = r2, i;
  }
  return t.prototype.next = function(n) {
    var r2, i;
    (i = (r2 = this.destination) === null || r2 === void 0 ? void 0 : r2.next) === null || i === void 0 || i.call(r2, n);
  }, t.prototype.error = function(n) {
    var r2, i;
    (i = (r2 = this.destination) === null || r2 === void 0 ? void 0 : r2.error) === null || i === void 0 || i.call(r2, n);
  }, t.prototype.complete = function() {
    var n, r2;
    (r2 = (n = this.destination) === null || n === void 0 ? void 0 : n.complete) === null || r2 === void 0 || r2.call(n);
  }, t.prototype._subscribe = function(n) {
    var r2, i;
    return (i = (r2 = this.source) === null || r2 === void 0 ? void 0 : r2.subscribe(n)) !== null && i !== void 0 ? i : Zt;
  }, t;
}(re);
var on = function(e3) {
  q(t, e3);
  function t(n) {
    var r2 = e3.call(this) || this;
    return r2._value = n, r2;
  }
  return Object.defineProperty(t.prototype, "value", {
    get: function() {
      return this.getValue();
    },
    enumerable: false,
    configurable: true
  }), t.prototype._subscribe = function(n) {
    var r2 = e3.prototype._subscribe.call(this, n);
    return !r2.closed && n.next(this._value), r2;
  }, t.prototype.getValue = function() {
    var n = this, r2 = n.hasError, i = n.thrownError, o = n._value;
    if (r2)
      throw i;
    return this._throwIfClosed(), o;
  }, t.prototype.next = function(n) {
    e3.prototype.next.call(this, this._value = n);
  }, t;
}(re);
var Ur = {
  now: function() {
    return Date.now();
  },
  delegate: void 0
};
var Fr = function(e3) {
  q(t, e3);
  function t(n, r2) {
    return e3.call(this) || this;
  }
  return t.prototype.schedule = function(n, r2) {
    return this;
  }, t;
}(Te);
var Pt = {
  setInterval: function(e3, t) {
    for (var n = [], r2 = 2; r2 < arguments.length; r2++)
      n[r2 - 2] = arguments[r2];
    return setInterval.apply(void 0, Se([e3, t], he(n)));
  },
  clearInterval: function(e3) {
    return clearInterval(e3);
  },
  delegate: void 0
};
var jr = function(e3) {
  q(t, e3);
  function t(n, r2) {
    var i = e3.call(this, n, r2) || this;
    return i.scheduler = n, i.work = r2, i.pending = false, i;
  }
  return t.prototype.schedule = function(n, r2) {
    var i;
    if (r2 === void 0 && (r2 = 0), this.closed)
      return this;
    this.state = n;
    var o = this.id, s = this.scheduler;
    return o != null && (this.id = this.recycleAsyncId(s, o, r2)), this.pending = true, this.delay = r2, this.id = (i = this.id) !== null && i !== void 0 ? i : this.requestAsyncId(s, this.id, r2), this;
  }, t.prototype.requestAsyncId = function(n, r2, i) {
    return i === void 0 && (i = 0), Pt.setInterval(n.flush.bind(n, this), i);
  }, t.prototype.recycleAsyncId = function(n, r2, i) {
    if (i === void 0 && (i = 0), i != null && this.delay === i && this.pending === false)
      return r2;
    r2 != null && Pt.clearInterval(r2);
  }, t.prototype.execute = function(n, r2) {
    if (this.closed)
      return new Error("executing a cancelled action");
    this.pending = false;
    var i = this._execute(n, r2);
    if (i)
      return i;
    this.pending === false && this.id != null && (this.id = this.recycleAsyncId(this.scheduler, this.id, null));
  }, t.prototype._execute = function(n, r2) {
    var i = false, o;
    try {
      this.work(n);
    } catch (s) {
      i = true, o = s || new Error("Scheduled action threw falsy error");
    }
    if (i)
      return this.unsubscribe(), o;
  }, t.prototype.unsubscribe = function() {
    if (!this.closed) {
      var n = this, r2 = n.id, i = n.scheduler, o = i.actions;
      this.work = this.state = this.scheduler = null, this.pending = false, _e(o, this), r2 != null && (this.id = this.recycleAsyncId(i, r2, null)), this.delay = null, e3.prototype.unsubscribe.call(this);
    }
  }, t;
}(Fr);
var At = function() {
  function e3(t, n) {
    n === void 0 && (n = e3.now), this.schedulerActionCtor = t, this.now = n;
  }
  return e3.prototype.schedule = function(t, n, r2) {
    return n === void 0 && (n = 0), new this.schedulerActionCtor(this, t).schedule(r2, n);
  }, e3.now = Ur.now, e3;
}();
var Wr = function(e3) {
  q(t, e3);
  function t(n, r2) {
    r2 === void 0 && (r2 = At.now);
    var i = e3.call(this, n, r2) || this;
    return i.actions = [], i._active = false, i;
  }
  return t.prototype.flush = function(n) {
    var r2 = this.actions;
    if (this._active) {
      r2.push(n);
      return;
    }
    var i;
    this._active = true;
    do
      if (i = n.execute(n.state, n.delay))
        break;
    while (n = r2.shift());
    if (this._active = false, i) {
      for (; n = r2.shift(); )
        n.unsubscribe();
      throw i;
    }
  }, t;
}(At);
var Br = new Wr(jr);
var Vr = new O(function(e3) {
  return e3.complete();
});
function Hr(e3) {
  return e3 && A(e3.schedule);
}
function sn(e3) {
  return e3[e3.length - 1];
}
function Be(e3) {
  return Hr(sn(e3)) ? e3.pop() : void 0;
}
function zr(e3, t) {
  return typeof sn(e3) == "number" ? e3.pop() : t;
}
var dt = function(e3) {
  return e3 && typeof e3.length == "number" && typeof e3 != "function";
};
function an(e3) {
  return A(e3 == null ? void 0 : e3.then);
}
function cn(e3) {
  return A(e3[lt]);
}
function un(e3) {
  return Symbol.asyncIterator && A(e3 == null ? void 0 : e3[Symbol.asyncIterator]);
}
function ln(e3) {
  return new TypeError("You provided " + (e3 !== null && typeof e3 == "object" ? "an invalid object" : "'" + e3 + "'") + " where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.");
}
function Yr() {
  return typeof Symbol != "function" || !Symbol.iterator ? "@@iterator" : Symbol.iterator;
}
var fn = Yr();
function dn(e3) {
  return A(e3 == null ? void 0 : e3[fn]);
}
function pn(e3) {
  return Pr(this, arguments, function() {
    var n, r2, i, o;
    return Xt(this, function(s) {
      switch (s.label) {
        case 0:
          n = e3.getReader(), s.label = 1;
        case 1:
          s.trys.push([1, , 9, 10]), s.label = 2;
        case 2:
          return [4, fe(n.read())];
        case 3:
          return r2 = s.sent(), i = r2.value, o = r2.done, o ? [4, fe(void 0)] : [3, 5];
        case 4:
          return [2, s.sent()];
        case 5:
          return [4, fe(i)];
        case 6:
          return [4, s.sent()];
        case 7:
          return s.sent(), [3, 2];
        case 8:
          return [3, 10];
        case 9:
          return n.releaseLock(), [7];
        case 10:
          return [2];
      }
    });
  });
}
function hn(e3) {
  return A(e3 == null ? void 0 : e3.getReader);
}
function Y(e3) {
  if (e3 instanceof O)
    return e3;
  if (e3 != null) {
    if (cn(e3))
      return Gr(e3);
    if (dt(e3))
      return Kr(e3);
    if (an(e3))
      return Qr(e3);
    if (un(e3))
      return vn(e3);
    if (dn(e3))
      return Jr(e3);
    if (hn(e3))
      return qr(e3);
  }
  throw ln(e3);
}
function Gr(e3) {
  return new O(function(t) {
    var n = e3[lt]();
    if (A(n.subscribe))
      return n.subscribe(t);
    throw new TypeError("Provided object does not correctly implement Symbol.observable");
  });
}
function Kr(e3) {
  return new O(function(t) {
    for (var n = 0; n < e3.length && !t.closed; n++)
      t.next(e3[n]);
    t.complete();
  });
}
function Qr(e3) {
  return new O(function(t) {
    e3.then(function(n) {
      t.closed || (t.next(n), t.complete());
    }, function(n) {
      return t.error(n);
    }).then(null, rn);
  });
}
function Jr(e3) {
  return new O(function(t) {
    var n, r2;
    try {
      for (var i = pe(e3), o = i.next(); !o.done; o = i.next()) {
        var s = o.value;
        if (t.next(s), t.closed)
          return;
      }
    } catch (a2) {
      n = { error: a2 };
    } finally {
      try {
        o && !o.done && (r2 = i.return) && r2.call(i);
      } finally {
        if (n) throw n.error;
      }
    }
    t.complete();
  });
}
function vn(e3) {
  return new O(function(t) {
    Xr(e3, t).catch(function(n) {
      return t.error(n);
    });
  });
}
function qr(e3) {
  return vn(pn(e3));
}
function Xr(e3, t) {
  var n, r2, i, o;
  return Cr(this, void 0, void 0, function() {
    var s, a2;
    return Xt(this, function(c) {
      switch (c.label) {
        case 0:
          c.trys.push([0, 5, 6, 11]), n = Ar(e3), c.label = 1;
        case 1:
          return [4, n.next()];
        case 2:
          if (r2 = c.sent(), !!r2.done) return [3, 4];
          if (s = r2.value, t.next(s), t.closed)
            return [2];
          c.label = 3;
        case 3:
          return [3, 1];
        case 4:
          return [3, 11];
        case 5:
          return a2 = c.sent(), i = { error: a2 }, [3, 11];
        case 6:
          return c.trys.push([6, , 9, 10]), r2 && !r2.done && (o = n.return) ? [4, o.call(n)] : [3, 8];
        case 7:
          c.sent(), c.label = 8;
        case 8:
          return [3, 10];
        case 9:
          if (i) throw i.error;
          return [7];
        case 10:
          return [7];
        case 11:
          return t.complete(), [2];
      }
    });
  });
}
function ee(e3, t, n, r2, i) {
  r2 === void 0 && (r2 = 0), i === void 0 && (i = false);
  var o = t.schedule(function() {
    n(), i ? e3.add(this.schedule(null, r2)) : this.unsubscribe();
  }, r2);
  if (e3.add(o), !i)
    return o;
}
function mn(e3, t) {
  return t === void 0 && (t = 0), B(function(n, r2) {
    n.subscribe(j(r2, function(i) {
      return ee(r2, e3, function() {
        return r2.next(i);
      }, t);
    }, function() {
      return ee(r2, e3, function() {
        return r2.complete();
      }, t);
    }, function(i) {
      return ee(r2, e3, function() {
        return r2.error(i);
      }, t);
    }));
  });
}
function gn(e3, t) {
  return t === void 0 && (t = 0), B(function(n, r2) {
    r2.add(e3.schedule(function() {
      return n.subscribe(r2);
    }, t));
  });
}
function Zr(e3, t) {
  return Y(e3).pipe(gn(t), mn(t));
}
function ei(e3, t) {
  return Y(e3).pipe(gn(t), mn(t));
}
function ti(e3, t) {
  return new O(function(n) {
    var r2 = 0;
    return t.schedule(function() {
      r2 === e3.length ? n.complete() : (n.next(e3[r2++]), n.closed || this.schedule());
    });
  });
}
function ni(e3, t) {
  return new O(function(n) {
    var r2;
    return ee(n, t, function() {
      r2 = e3[fn](), ee(n, t, function() {
        var i, o, s;
        try {
          i = r2.next(), o = i.value, s = i.done;
        } catch (a2) {
          n.error(a2);
          return;
        }
        s ? n.complete() : n.next(o);
      }, 0, true);
    }), function() {
      return A(r2 == null ? void 0 : r2.return) && r2.return();
    };
  });
}
function bn(e3, t) {
  if (!e3)
    throw new Error("Iterable cannot be null");
  return new O(function(n) {
    ee(n, t, function() {
      var r2 = e3[Symbol.asyncIterator]();
      ee(n, t, function() {
        r2.next().then(function(i) {
          i.done ? n.complete() : n.next(i.value);
        });
      }, 0, true);
    });
  });
}
function ri(e3, t) {
  return bn(pn(e3), t);
}
function ii(e3, t) {
  if (e3 != null) {
    if (cn(e3))
      return Zr(e3, t);
    if (dt(e3))
      return ti(e3, t);
    if (an(e3))
      return ei(e3, t);
    if (un(e3))
      return bn(e3, t);
    if (dn(e3))
      return ni(e3, t);
    if (hn(e3))
      return ri(e3, t);
  }
  throw ln(e3);
}
function pt(e3, t) {
  return t ? ii(e3, t) : Y(e3);
}
function kt() {
  for (var e3 = [], t = 0; t < arguments.length; t++)
    e3[t] = arguments[t];
  var n = Be(e3);
  return pt(e3, n);
}
function oi(e3) {
  return e3 instanceof Date && !isNaN(e3);
}
var si = ct(function(e3) {
  return function(n) {
    n === void 0 && (n = null), e3(this), this.message = "Timeout has occurred", this.name = "TimeoutError", this.info = n;
  };
});
function ai(e3, t) {
  var n = oi(e3) ? { first: e3 } : typeof e3 == "number" ? { each: e3 } : e3, r2 = n.first, i = n.each, o = n.with, s = o === void 0 ? ci : o, a2 = n.scheduler, c = a2 === void 0 ? Br : a2, u = n.meta, l = u === void 0 ? null : u;
  if (r2 == null && i == null)
    throw new TypeError("No timeout provided.");
  return B(function(f, h2) {
    var d, m, p = null, g = 0, v = function(E) {
      m = ee(h2, c, function() {
        try {
          d.unsubscribe(), Y(s({
            meta: l,
            lastValue: p,
            seen: g
          })).subscribe(h2);
        } catch (P2) {
          h2.error(P2);
        }
      }, E);
    };
    d = f.subscribe(j(h2, function(E) {
      m == null || m.unsubscribe(), g++, h2.next(p = E), i > 0 && v(i);
    }, void 0, void 0, function() {
      m != null && m.closed || m == null || m.unsubscribe(), p = null;
    })), !g && v(r2 != null ? typeof r2 == "number" ? r2 : +r2 - c.now() : i);
  });
}
function ci(e3) {
  throw new si(e3);
}
function k(e3, t) {
  return B(function(n, r2) {
    var i = 0;
    n.subscribe(j(r2, function(o) {
      r2.next(e3.call(t, o, i++));
    }));
  });
}
var ui = Array.isArray;
function li(e3, t) {
  return ui(t) ? e3.apply(void 0, Se([], he(t))) : e3(t);
}
function fi(e3) {
  return k(function(t) {
    return li(e3, t);
  });
}
function di(e3, t, n, r2, i, o, s, a2) {
  var c = [], u = 0, l = 0, f = false, h2 = function() {
    f && !c.length && !u && t.complete();
  }, d = function(p) {
    return u < r2 ? m(p) : c.push(p);
  }, m = function(p) {
    u++;
    var g = false;
    Y(n(p, l++)).subscribe(j(t, function(v) {
      t.next(v);
    }, function() {
      g = true;
    }, void 0, function() {
      if (g)
        try {
          u--;
          for (var v = function() {
            var E = c.shift();
            s || m(E);
          }; c.length && u < r2; )
            v();
          h2();
        } catch (E) {
          t.error(E);
        }
    }));
  };
  return e3.subscribe(j(t, d, function() {
    f = true, h2();
  })), function() {
  };
}
function ht(e3, t, n) {
  return n === void 0 && (n = 1 / 0), A(t) ? ht(function(r2, i) {
    return k(function(o, s) {
      return t(r2, o, i, s);
    })(Y(e3(r2, i)));
  }, n) : (typeof t == "number" && (n = t), B(function(r2, i) {
    return di(r2, i, e3, n);
  }));
}
function yn(e3) {
  return e3 === void 0 && (e3 = 1 / 0), ht(ft, e3);
}
function pi() {
  return yn(1);
}
function De() {
  for (var e3 = [], t = 0; t < arguments.length; t++)
    e3[t] = arguments[t];
  return pi()(pt(e3, Be(e3)));
}
var hi = ["addListener", "removeListener"];
var vi = ["addEventListener", "removeEventListener"];
var mi = ["on", "off"];
function tt(e3, t, n, r2) {
  if (A(n) && (r2 = n, n = void 0), r2)
    return tt(e3, t, n).pipe(fi(r2));
  var i = he(yi(e3) ? vi.map(function(a2) {
    return function(c) {
      return e3[a2](t, c, n);
    };
  }) : gi(e3) ? hi.map(Ot(e3, t)) : bi(e3) ? mi.map(Ot(e3, t)) : [], 2), o = i[0], s = i[1];
  if (!o && dt(e3))
    return ht(function(a2) {
      return tt(a2, t, n);
    })(Y(e3));
  if (!o)
    throw new TypeError("Invalid event target");
  return new O(function(a2) {
    var c = function() {
      for (var u = [], l = 0; l < arguments.length; l++)
        u[l] = arguments[l];
      return a2.next(1 < u.length ? u : u[0]);
    };
    return o(c), function() {
      return s(c);
    };
  });
}
function Ot(e3, t) {
  return function(n) {
    return function(r2) {
      return e3[n](t, r2);
    };
  };
}
function gi(e3) {
  return A(e3.addListener) && A(e3.removeListener);
}
function bi(e3) {
  return A(e3.on) && A(e3.off);
}
function yi(e3) {
  return A(e3.addEventListener) && A(e3.removeEventListener);
}
function wi() {
  for (var e3 = [], t = 0; t < arguments.length; t++)
    e3[t] = arguments[t];
  var n = Be(e3), r2 = zr(e3, 1 / 0), i = e3;
  return i.length ? i.length === 1 ? Y(i[0]) : yn(r2)(pt(i, n)) : Vr;
}
function vt(e3, t) {
  return B(function(n, r2) {
    var i = 0;
    n.subscribe(j(r2, function(o) {
      return e3.call(t, o, i++) && r2.next(o);
    }));
  });
}
function Si(e3, t, n, r2, i) {
  return function(o, s) {
    var a2 = n, c = t, u = 0;
    o.subscribe(j(s, function(l) {
      var f = u++;
      c = a2 ? e3(c, l, f) : (a2 = true, l), s.next(c);
    }, i));
  };
}
function xi(e3, t) {
  return t === void 0 && (t = ft), e3 = e3 ?? Ei, B(function(n, r2) {
    var i, o = true;
    n.subscribe(j(r2, function(s) {
      var a2 = t(s);
      (o || !e3(i, a2)) && (o = false, i = a2, r2.next(s));
    }));
  });
}
function Ei(e3, t) {
  return e3 === t;
}
function Ti(e3) {
  return B(function(t, n) {
    try {
      t.subscribe(n);
    } finally {
      n.add(e3);
    }
  });
}
function Ci(e3, t) {
  return B(Si(e3, t, arguments.length >= 2, true));
}
function Pi(e3) {
  return B(function(t, n) {
    var r2 = false, i = j(n, function() {
      i == null || i.unsubscribe(), r2 = true;
    }, Ie);
    Y(e3).subscribe(i), t.subscribe(j(n, function(o) {
      return r2 && n.next(o);
    }));
  });
}
function R() {
  for (var e3 = [], t = 0; t < arguments.length; t++)
    e3[t] = arguments[t];
  var n = Be(e3);
  return B(function(r2, i) {
    (n ? De(e3, r2, n) : De(e3, r2)).subscribe(i);
  });
}
function wn(e3, t) {
  return B(function(n, r2) {
    var i = null, o = 0, s = false, a2 = function() {
      return s && !i && r2.complete();
    };
    n.subscribe(j(r2, function(c) {
      i == null || i.unsubscribe();
      var u = 0, l = o++;
      Y(e3(c, l)).subscribe(i = j(r2, function(f) {
        return r2.next(t ? t(c, f, l, u++) : f);
      }, function() {
        i = null, a2();
      }));
    }, function() {
      s = true, a2();
    }));
  });
}
function Lt(e3) {
  return B(function(t, n) {
    Y(e3).subscribe(j(n, function() {
      return n.complete();
    }, Ie)), !n.closed && t.subscribe(n);
  });
}
var Ai = Object.defineProperty;
var ki = Object.defineProperties;
var Oi = Object.getOwnPropertyDescriptors;
var _t = Object.getOwnPropertySymbols;
var Li = Object.prototype.hasOwnProperty;
var _i = Object.prototype.propertyIsEnumerable;
var It = (e3, t, n) => t in e3 ? Ai(e3, t, { enumerable: true, configurable: true, writable: true, value: n }) : e3[t] = n;
var Q = (e3, t) => {
  for (var n in t || (t = {}))
    Li.call(t, n) && It(e3, n, t[n]);
  if (_t)
    for (var n of _t(t))
      _i.call(t, n) && It(e3, n, t[n]);
  return e3;
};
var ye = (e3, t) => ki(e3, Oi(t));
var W = (e3, t, n) => new Promise((r2, i) => {
  var o = (c) => {
    try {
      a2(n.next(c));
    } catch (u) {
      i(u);
    }
  }, s = (c) => {
    try {
      a2(n.throw(c));
    } catch (u) {
      i(u);
    }
  }, a2 = (c) => c.done ? r2(c.value) : Promise.resolve(c.value).then(o, s);
  a2((n = n.apply(e3, t)).next());
});
var Sn = "lk";
function F(e3) {
  return typeof e3 > "u" ? false : Ii(e3) || Di(e3);
}
function Ii(e3) {
  var t;
  return e3 ? e3.hasOwnProperty("participant") && e3.hasOwnProperty("source") && e3.hasOwnProperty("track") && typeof ((t = e3.publication) == null ? void 0 : t.track) < "u" : false;
}
function Di(e3) {
  return e3 ? e3.hasOwnProperty("participant") && e3.hasOwnProperty("source") && e3.hasOwnProperty("publication") && typeof e3.publication < "u" : false;
}
function xe(e3) {
  return e3 ? e3.hasOwnProperty("participant") && e3.hasOwnProperty("source") && typeof e3.publication > "u" : false;
}
function N(e3) {
  if (typeof e3 == "string" || typeof e3 == "number")
    return `${e3}`;
  if (xe(e3))
    return `${e3.participant.identity}_${e3.source}_placeholder`;
  if (F(e3))
    return `${e3.participant.identity}_${e3.publication.source}_${e3.publication.trackSid}`;
  throw new Error(`Can't generate a id for the given track reference: ${e3}`);
}
function Ao(e3, t) {
  return e3 === void 0 || t === void 0 ? false : F(e3) && F(t) ? e3.publication.trackSid === t.publication.trackSid : N(e3) === N(t);
}
function ko(e3, t) {
  return typeof t > "u" ? false : F(e3) ? t.some(
    (n) => n.participant.identity === e3.participant.identity && F(n) && n.publication.trackSid === e3.publication.trackSid
  ) : xe(e3) ? t.some(
    (n) => n.participant.identity === e3.participant.identity && xe(n) && n.source === e3.source
  ) : false;
}
function Mi(e3, t) {
  return xe(e3) && F(t) && t.participant.identity === e3.participant.identity && t.source === e3.source;
}
function Oo(e3) {
  return e3 instanceof LocalParticipant;
}
function Lo() {
  const e3 = document.createElement("p");
  e3.style.width = "100%", e3.style.height = "200px";
  const t = document.createElement("div");
  t.style.position = "absolute", t.style.top = "0px", t.style.left = "0px", t.style.visibility = "hidden", t.style.width = "200px", t.style.height = "150px", t.style.overflow = "hidden", t.appendChild(e3), document.body.appendChild(t);
  const n = e3.offsetWidth;
  t.style.overflow = "scroll";
  let r2 = e3.offsetWidth;
  return n === r2 && (r2 = t.clientWidth), document.body.removeChild(t), n - r2;
}
function _o() {
  return typeof document < "u";
}
function Ri(e3) {
  e3 = Q({}, e3);
  const t = "(?:(?:[a-z]+:)?//)?", n = "(?:\\S+(?::\\S*)?@)?", r2 = new RegExp(
    "(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",
    "g"
  ).source, u = `(?:${t}|www\\.)${n}(?:localhost|${r2}|(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))\\.?)(?::\\d{2,5})?(?:[/?#][^\\s"]*)?`;
  return e3.exact ? new RegExp(`(?:^${u}$)`, "i") : new RegExp(u, "ig");
}
var Dt = "[^\\.\\s@:](?:[^\\s@:]*[^\\s@:\\.])?@[^\\.\\s@]+(?:\\.[^\\.\\s@]+)*";
function Ni({ exact: e3 } = {}) {
  return e3 ? new RegExp(`^${Dt}$`) : new RegExp(Dt, "g");
}
function Io(e3, t) {
  return W(this, null, function* () {
    const { x: n, y: r2 } = yield wr(e3, t, {
      placement: "top",
      middleware: [gr(6), yr(), br({ padding: 5 })]
    });
    return { x: n, y: r2 };
  });
}
function Do(e3, t) {
  return !e3.contains(t.target);
}
var Mo = () => ({
  email: Ni(),
  url: Ri({})
});
function Ro(e3, t) {
  const n = Object.entries(t).map(
    ([o, s], a2) => Array.from(e3.matchAll(s)).map(({ index: c, 0: u }) => ({
      type: o,
      weight: a2,
      content: u,
      index: c ?? 0
    }))
  ).flat().sort((o, s) => {
    const a2 = o.index - s.index;
    return a2 !== 0 ? a2 : o.weight - s.weight;
  }).filter(({ index: o }, s, a2) => {
    if (s === 0) return true;
    const c = a2[s - 1];
    return c.index + c.content.length <= o;
  }), r2 = [];
  let i = 0;
  for (const { type: o, content: s, index: a2 } of n)
    a2 > i && r2.push(e3.substring(i, a2)), r2.push({ type: o, content: s }), i = a2 + s.length;
  return e3.length > i && r2.push(e3.substring(i)), r2;
}
var $i = [
  RoomEvent.ConnectionStateChanged,
  RoomEvent.RoomMetadataChanged,
  RoomEvent.ActiveSpeakersChanged,
  RoomEvent.ConnectionQualityChanged,
  RoomEvent.ParticipantConnected,
  RoomEvent.ParticipantDisconnected,
  RoomEvent.ParticipantPermissionsChanged,
  RoomEvent.ParticipantMetadataChanged,
  RoomEvent.ParticipantNameChanged,
  RoomEvent.ParticipantAttributesChanged,
  RoomEvent.TrackMuted,
  RoomEvent.TrackUnmuted,
  RoomEvent.TrackPublished,
  RoomEvent.TrackUnpublished,
  RoomEvent.TrackStreamStateChanged,
  RoomEvent.TrackSubscriptionFailed,
  RoomEvent.TrackSubscriptionPermissionChanged,
  RoomEvent.TrackSubscriptionStatusChanged
];
var xn = [
  ...$i,
  RoomEvent.LocalTrackPublished,
  RoomEvent.LocalTrackUnpublished
];
var Ui = [
  ParticipantEvent.TrackPublished,
  ParticipantEvent.TrackUnpublished,
  ParticipantEvent.TrackMuted,
  ParticipantEvent.TrackUnmuted,
  ParticipantEvent.TrackStreamStateChanged,
  ParticipantEvent.TrackSubscribed,
  ParticipantEvent.TrackUnsubscribed,
  ParticipantEvent.TrackSubscriptionPermissionChanged,
  ParticipantEvent.TrackSubscriptionFailed,
  ParticipantEvent.LocalTrackPublished,
  ParticipantEvent.LocalTrackUnpublished
];
var Fi = [
  ParticipantEvent.ConnectionQualityChanged,
  ParticipantEvent.IsSpeakingChanged,
  ParticipantEvent.ParticipantMetadataChanged,
  ParticipantEvent.ParticipantPermissionsChanged,
  ParticipantEvent.TrackMuted,
  ParticipantEvent.TrackUnmuted,
  ParticipantEvent.TrackPublished,
  ParticipantEvent.TrackUnpublished,
  ParticipantEvent.TrackStreamStateChanged,
  ParticipantEvent.TrackSubscriptionFailed,
  ParticipantEvent.TrackSubscriptionPermissionChanged,
  ParticipantEvent.TrackSubscriptionStatusChanged
];
var En = [
  ...Fi,
  ParticipantEvent.LocalTrackPublished,
  ParticipantEvent.LocalTrackUnpublished
];
var _ = Tr.getLogger("lk-components-js");
_.setDefaultLevel("WARN");
function No(e3, t = {}) {
  var n;
  _.setLevel(e3), setLogLevel((n = t.liveKitClientLogLevel) != null ? n : e3);
}
function $o(e3, t = {}) {
  var n;
  const r2 = _.methodFactory;
  _.methodFactory = (i, o, s) => {
    const a2 = r2(i, o, s), c = LogLevel[i], u = c >= o && c < LogLevel.silent;
    return (l, f) => {
      f ? a2(l, f) : a2(l), u && e3(c, l, f);
    };
  }, _.setLevel(_.getLevel()), setLogExtension((n = t.liveKitClientLogExtension) != null ? n : e3);
}
var Uo = [
  {
    columns: 1,
    rows: 1
  },
  {
    columns: 1,
    rows: 2,
    orientation: "portrait"
  },
  {
    columns: 2,
    rows: 1,
    orientation: "landscape"
  },
  {
    columns: 2,
    rows: 2,
    minWidth: 560
  },
  {
    columns: 3,
    rows: 3,
    minWidth: 700
  },
  {
    columns: 4,
    rows: 4,
    minWidth: 960
  },
  {
    columns: 5,
    rows: 5,
    minWidth: 1100
  }
];
function ji(e3, t, n, r2) {
  if (e3.length < 1)
    throw new Error("At least one grid layout definition must be provided.");
  const i = Wi(e3);
  if (n <= 0 || r2 <= 0)
    return i[0];
  let o = 0;
  const s = n / r2 > 1 ? "landscape" : "portrait";
  let a2 = i.find((c, u, l) => {
    o = u;
    const f = l.findIndex((h2, d) => {
      const m = !h2.orientation || h2.orientation === s, p = d > u, g = h2.maxTiles === c.maxTiles;
      return p && g && m;
    }) !== -1;
    return c.maxTiles >= t && !f;
  });
  if (a2 === void 0)
    if (a2 = i[i.length - 1], a2)
      _.warn(
        `No layout found for: participantCount: ${t}, width/height: ${n}/${r2} fallback to biggest available layout (${a2}).`
      );
    else
      throw new Error("No layout or fallback layout found.");
  if ((n < a2.minWidth || r2 < a2.minHeight) && o > 0) {
    const c = i[o - 1];
    a2 = ji(
      i.slice(0, o),
      c.maxTiles,
      n,
      r2
    );
  }
  return a2;
}
function Wi(e3) {
  return [...e3].map((t) => {
    var n, r2;
    return {
      name: `${t.columns}x${t.rows}`,
      columns: t.columns,
      rows: t.rows,
      maxTiles: t.columns * t.rows,
      minWidth: (n = t.minWidth) != null ? n : 0,
      minHeight: (r2 = t.minHeight) != null ? r2 : 0,
      orientation: t.orientation
    };
  }).sort((t, n) => t.maxTiles !== n.maxTiles ? t.maxTiles - n.maxTiles : t.minWidth !== 0 || n.minWidth !== 0 ? t.minWidth - n.minWidth : t.minHeight !== 0 || n.minHeight !== 0 ? t.minHeight - n.minHeight : 0);
}
function Fo() {
  return typeof navigator < "u" && navigator.mediaDevices && !!navigator.mediaDevices.getDisplayMedia;
}
function jo(e3, t) {
  var n;
  return ye(Q({}, e3), {
    receivedAtMediaTimestamp: (n = t.rtpTimestamp) != null ? n : 0,
    receivedAt: t.timestamp
  });
}
function Wo(e3, t, n) {
  return [...e3, ...t].reduceRight((r2, i) => (r2.find((o) => o.id === i.id) || r2.unshift(i), r2), []).slice(0 - n);
}
var Tn = [];
var Cn = {
  showChat: false,
  unreadMessages: 0,
  showSettings: false
};
function Bi(e3) {
  return typeof e3 == "object";
}
function Bo(e3) {
  return Array.isArray(e3) && e3.filter(Bi).length > 0;
}
function Pn(e3, t) {
  return t.audioLevel - e3.audioLevel;
}
function An(e3, t) {
  return e3.isSpeaking === t.isSpeaking ? 0 : e3.isSpeaking ? -1 : 1;
}
function kn(e3, t) {
  var n, r2, i, o;
  return e3.lastSpokeAt !== void 0 || t.lastSpokeAt !== void 0 ? ((r2 = (n = t.lastSpokeAt) == null ? void 0 : n.getTime()) != null ? r2 : 0) - ((o = (i = e3.lastSpokeAt) == null ? void 0 : i.getTime()) != null ? o : 0) : 0;
}
function Me(e3, t) {
  var n, r2, i, o;
  return ((r2 = (n = e3.joinedAt) == null ? void 0 : n.getTime()) != null ? r2 : 0) - ((o = (i = t.joinedAt) == null ? void 0 : i.getTime()) != null ? o : 0);
}
function Vi(e3, t) {
  return F(e3) ? F(t) ? 0 : -1 : F(t) ? 1 : 0;
}
function Hi(e3, t) {
  const n = e3.participant.isCameraEnabled, r2 = t.participant.isCameraEnabled;
  return n !== r2 ? n ? -1 : 1 : 0;
}
function Vo(e3) {
  const t = [], n = [], r2 = [], i = [];
  e3.forEach((a2) => {
    a2.participant.isLocal && a2.source === Track.Source.Camera ? t.push(a2) : a2.source === Track.Source.ScreenShare ? n.push(a2) : a2.source === Track.Source.Camera ? r2.push(a2) : i.push(a2);
  });
  const o = zi(n), s = Yi(r2);
  return [...t, ...o, ...s, ...i];
}
function zi(e3) {
  const t = [], n = [];
  return e3.forEach((i) => {
    i.participant.isLocal ? t.push(i) : n.push(i);
  }), t.sort((i, o) => Me(i.participant, o.participant)), n.sort((i, o) => Me(i.participant, o.participant)), [...n, ...t];
}
function Yi(e3) {
  const t = [], n = [];
  return e3.forEach((r2) => {
    r2.participant.isLocal ? t.push(r2) : n.push(r2);
  }), n.sort((r2, i) => r2.participant.isSpeaking && i.participant.isSpeaking ? Pn(r2.participant, i.participant) : r2.participant.isSpeaking !== i.participant.isSpeaking ? An(r2.participant, i.participant) : r2.participant.lastSpokeAt !== i.participant.lastSpokeAt ? kn(r2.participant, i.participant) : F(r2) !== F(i) ? Vi(r2, i) : r2.participant.isCameraEnabled !== i.participant.isCameraEnabled ? Hi(r2, i) : Me(r2.participant, i.participant)), [...t, ...n];
}
function Ho(e3) {
  const t = [...e3];
  t.sort((r2, i) => {
    if (r2.isSpeaking && i.isSpeaking)
      return Pn(r2, i);
    if (r2.isSpeaking !== i.isSpeaking)
      return An(r2, i);
    if (r2.lastSpokeAt !== i.lastSpokeAt)
      return kn(r2, i);
    const o = r2.videoTrackPublications.size > 0, s = i.videoTrackPublications.size > 0;
    return o !== s ? o ? -1 : 1 : Me(r2, i);
  });
  const n = t.find((r2) => r2 instanceof LocalParticipant);
  if (n) {
    const r2 = t.indexOf(n);
    r2 >= 0 && (t.splice(r2, 1), t.length > 0 ? t.splice(0, 0, n) : t.push(n));
  }
  return t;
}
function Gi(e3, t) {
  return e3.reduce(
    (n, r2, i) => i % t === 0 ? [...n, [r2]] : [...n.slice(0, -1), [...n.slice(-1)[0], r2]],
    []
  );
}
function Mt(e3, t) {
  const n = Math.max(e3.length, t.length);
  return new Array(n).fill([]).map((r2, i) => [e3[i], t[i]]);
}
function Re(e3, t, n) {
  return e3.filter((r2) => !t.map((i) => n(i)).includes(n(r2)));
}
function nt(e3) {
  return e3.map((t) => typeof t == "string" || typeof t == "number" ? `${t}` : N(t));
}
function Ki(e3, t) {
  return {
    dropped: Re(e3, t, N),
    added: Re(t, e3, N)
  };
}
function Qi(e3) {
  return e3.added.length !== 0 || e3.dropped.length !== 0;
}
function rt(e3, t) {
  const n = t.findIndex(
    (r2) => N(r2) === N(e3)
  );
  if (n === -1)
    throw new Error(
      `Element not part of the array: ${N(
        e3
      )} not in ${nt(t)}`
    );
  return n;
}
function Ji(e3, t, n) {
  const r2 = rt(e3, n), i = rt(t, n);
  return n.splice(r2, 1, t), n.splice(i, 1, e3), n;
}
function qi(e3, t) {
  const n = rt(e3, t);
  return t.splice(n, 1), t;
}
function Xi(e3, t) {
  return [...t, e3];
}
function Ge(e3, t) {
  return Gi(e3, t);
}
function zo(e3, t, n) {
  let r2 = Zi(e3, t);
  if (r2.length < t.length) {
    const s = Re(t, r2, N);
    r2 = [...r2, ...s];
  }
  const i = Ge(r2, n), o = Ge(t, n);
  if (Mt(i, o).forEach(([s, a2], c) => {
    if (s && a2) {
      const u = Ge(r2, n)[c], l = Ki(u, a2);
      Qi(l) && (_.debug(
        `Detected visual changes on page: ${c}, current: ${nt(
          s
        )}, next: ${nt(a2)}`,
        { changes: l }
      ), l.added.length === l.dropped.length && Mt(l.added, l.dropped).forEach(([f, h2]) => {
        if (f && h2)
          r2 = Ji(f, h2, r2);
        else
          throw new Error(
            `For a swap action we need a addition and a removal one is missing: ${f}, ${h2}`
          );
      }), l.added.length === 0 && l.dropped.length > 0 && l.dropped.forEach((f) => {
        r2 = qi(f, r2);
      }), l.added.length > 0 && l.dropped.length === 0 && l.added.forEach((f) => {
        r2 = Xi(f, r2);
      }));
    }
  }), r2.length > t.length) {
    const s = Re(r2, t, N);
    r2 = r2.filter(
      (a2) => !s.map(N).includes(N(a2))
    );
  }
  return r2;
}
function Zi(e3, t) {
  return e3.map((n) => {
    const r2 = t.find(
      (i) => (
        // If the IDs match or ..
        N(n) === N(i) || // ... if the current item is a placeholder and the new item is the track reference can replace it.
        typeof n != "number" && xe(n) && F(i) && Mi(n, i)
      )
    );
    return r2 ?? n;
  });
}
function $(e3) {
  return `${Sn}-${e3}`;
}
function Yo(e3) {
  const t = Rt(e3), n = On(e3.participant).pipe(
    k(() => Rt(e3)),
    R(t)
  );
  return { className: $(
    e3.source === Track.Source.Camera || e3.source === Track.Source.ScreenShare ? "participant-media-video" : "participant-media-audio"
  ), trackObserver: n };
}
function Rt(e3) {
  if (F(e3))
    return e3.publication;
  {
    const { source: t, name: n, participant: r2 } = e3;
    if (t && n)
      return r2.getTrackPublications().find((i) => i.source === t && i.trackName === n);
    if (n)
      return r2.getTrackPublicationByName(n);
    if (t)
      return r2.getTrackPublication(t);
    throw new Error("At least one of source and name needs to be defined");
  }
}
function se(e3, ...t) {
  return new O((r2) => {
    const i = () => {
      r2.next(e3);
    };
    return t.forEach((s) => {
      e3.on(s, i);
    }), () => {
      t.forEach((s) => {
        e3.off(s, i);
      });
    };
  }).pipe(R(e3));
}
function ae(e3, t) {
  return new O((r2) => {
    const i = (...s) => {
      r2.next(s);
    };
    return e3.on(t, i), () => {
      e3.off(t, i);
    };
  });
}
function Go(e3) {
  return ae(e3, RoomEvent.ConnectionStateChanged).pipe(
    k(([t]) => t),
    R(e3.state)
  );
}
function Ko(e3) {
  return se(
    e3,
    RoomEvent.RoomMetadataChanged,
    RoomEvent.ConnectionStateChanged
  ).pipe(
    k((n) => ({ name: n.name, metadata: n.metadata }))
  );
}
function Qo(e3) {
  return ae(e3, RoomEvent.ActiveSpeakersChanged).pipe(
    k(([t]) => t)
  );
}
function Jo(e3, t, n = true) {
  var r2;
  const i = () => W(this, null, function* () {
    try {
      const a2 = yield Room.getLocalDevices(e3, n);
      o.next(a2);
    } catch (a2) {
      t == null || t(a2);
    }
  }), o = new re(), s = o.pipe(
    Ti(() => {
      var a2;
      (a2 = navigator == null ? void 0 : navigator.mediaDevices) == null || a2.removeEventListener("devicechange", i);
    })
  );
  if (typeof window < "u") {
    if (!window.isSecureContext)
      throw new Error(
        "Accessing media devices is available only in secure contexts (HTTPS and localhost), in some or all supporting browsers. See: https://developer.mozilla.org/en-US/docs/Web/API/Navigator/mediaDevices"
      );
    (r2 = navigator == null ? void 0 : navigator.mediaDevices) == null || r2.addEventListener("devicechange", i);
  }
  return De(
    Room.getLocalDevices(e3, n).catch((a2) => (t == null || t(a2), [])),
    s
  );
}
function eo(e3) {
  return ae(e3, RoomEvent.DataReceived);
}
function to(e3) {
  return ae(e3, RoomEvent.ChatMessage);
}
function no(e3) {
  return se(e3, RoomEvent.AudioPlaybackStatusChanged).pipe(
    k((n) => ({ canPlayAudio: n.canPlaybackAudio }))
  );
}
function ro(e3) {
  return se(e3, RoomEvent.VideoPlaybackStatusChanged).pipe(
    k((n) => ({ canPlayVideo: n.canPlaybackVideo }))
  );
}
function io(e3, t) {
  return ae(e3, RoomEvent.ActiveDeviceChanged).pipe(
    vt(([n]) => n === t),
    k(([n, r2]) => (_.debug("activeDeviceObservable | RoomEvent.ActiveDeviceChanged", { kind: n, deviceId: r2 }), r2))
  );
}
function qo(e3, t) {
  return ae(e3, RoomEvent.ParticipantEncryptionStatusChanged).pipe(
    vt(
      ([, n]) => (t == null ? void 0 : t.identity) === (n == null ? void 0 : n.identity) || !n && (t == null ? void 0 : t.identity) === e3.localParticipant.identity
    ),
    k(([n]) => n),
    R(
      t instanceof LocalParticipant ? t.isE2EEEnabled : !!(t != null && t.isEncrypted)
    )
  );
}
function Xo(e3) {
  return ae(e3, RoomEvent.RecordingStatusChanged).pipe(
    k(([t]) => t),
    R(e3.isRecording)
  );
}
function me(e3, ...t) {
  return new O((r2) => {
    const i = () => {
      r2.next(e3);
    };
    return t.forEach((s) => {
      e3.on(s, i);
    }), () => {
      t.forEach((s) => {
        e3.off(s, i);
      });
    };
  }).pipe(R(e3));
}
function On(e3) {
  return me(
    e3,
    ParticipantEvent.TrackMuted,
    ParticipantEvent.TrackUnmuted,
    ParticipantEvent.ParticipantPermissionsChanged,
    // ParticipantEvent.IsSpeakingChanged,
    ParticipantEvent.TrackPublished,
    ParticipantEvent.TrackUnpublished,
    ParticipantEvent.LocalTrackPublished,
    ParticipantEvent.LocalTrackUnpublished,
    ParticipantEvent.MediaDevicesError,
    ParticipantEvent.TrackSubscriptionStatusChanged
    // ParticipantEvent.ConnectionQualityChanged,
  ).pipe(
    k((n) => {
      const { isMicrophoneEnabled: r2, isCameraEnabled: i, isScreenShareEnabled: o } = n, s = n.getTrackPublication(Track.Source.Microphone), a2 = n.getTrackPublication(Track.Source.Camera);
      return {
        isCameraEnabled: i,
        isMicrophoneEnabled: r2,
        isScreenShareEnabled: o,
        cameraTrack: a2,
        microphoneTrack: s,
        participant: n
      };
    })
  );
}
function oo(e3) {
  return e3 ? me(
    e3,
    ParticipantEvent.ParticipantMetadataChanged,
    ParticipantEvent.ParticipantNameChanged
  ).pipe(
    k(({ name: n, identity: r2, metadata: i }) => ({
      name: n,
      identity: r2,
      metadata: i
    })),
    R({
      name: e3.name,
      identity: e3.identity,
      metadata: e3.metadata
    })
  ) : void 0;
}
function so(e3) {
  return Ve(
    e3,
    ParticipantEvent.ConnectionQualityChanged
  ).pipe(
    k(([n]) => n),
    R(e3.connectionQuality)
  );
}
function Ve(e3, t) {
  return new O((r2) => {
    const i = (...s) => {
      r2.next(s);
    };
    return e3.on(t, i), () => {
      e3.off(t, i);
    };
  });
}
function ao(e3) {
  var t, n, r2, i;
  return me(
    e3.participant,
    ParticipantEvent.TrackMuted,
    ParticipantEvent.TrackUnmuted,
    ParticipantEvent.TrackSubscribed,
    ParticipantEvent.TrackUnsubscribed,
    ParticipantEvent.LocalTrackPublished,
    ParticipantEvent.LocalTrackUnpublished
  ).pipe(
    k((o) => {
      var s, a2;
      const c = (s = e3.publication) != null ? s : o.getTrackPublication(e3.source);
      return (a2 = c == null ? void 0 : c.isMuted) != null ? a2 : true;
    }),
    R(
      (i = (r2 = (t = e3.publication) == null ? void 0 : t.isMuted) != null ? r2 : (n = e3.participant.getTrackPublication(e3.source)) == null ? void 0 : n.isMuted) != null ? i : true
    )
  );
}
function Zo(e3) {
  return Ve(e3, ParticipantEvent.IsSpeakingChanged).pipe(
    k(([t]) => t)
  );
}
function es(e3, t = {}) {
  var n;
  let r2;
  const i = new O((c) => (r2 = c, () => a2.unsubscribe())).pipe(R(Array.from(e3.remoteParticipants.values()))), o = (n = t.additionalRoomEvents) != null ? n : xn, s = Array.from(
    /* @__PURE__ */ new Set([
      RoomEvent.ParticipantConnected,
      RoomEvent.ParticipantDisconnected,
      RoomEvent.ConnectionStateChanged,
      ...o
    ])
  ), a2 = se(e3, ...s).subscribe(
    (c) => r2 == null ? void 0 : r2.next(Array.from(c.remoteParticipants.values()))
  );
  return e3.remoteParticipants.size > 0 && (r2 == null || r2.next(Array.from(e3.remoteParticipants.values()))), i;
}
function ts(e3, t, n = {}) {
  var r2;
  const i = (r2 = n.additionalEvents) != null ? r2 : En;
  return se(
    e3,
    RoomEvent.ParticipantConnected,
    RoomEvent.ParticipantDisconnected,
    RoomEvent.ConnectionStateChanged
  ).pipe(
    wn((s) => {
      const a2 = s.getParticipantByIdentity(t);
      return a2 ? me(a2, ...i) : new O((c) => c.next(void 0));
    }),
    R(e3.getParticipantByIdentity(t))
  );
}
function ns(e3) {
  return Ve(
    e3,
    ParticipantEvent.ParticipantPermissionsChanged
  ).pipe(
    k(() => e3.permissions),
    R(e3.permissions)
  );
}
function rs(e3, { kind: t, identity: n }, r2 = {}) {
  var i;
  const o = (i = r2.additionalEvents) != null ? i : En, s = (c) => {
    let u = true;
    return t && (u = u && c.kind === t), n && (u = u && c.identity === n), u;
  };
  return se(
    e3,
    RoomEvent.ParticipantConnected,
    RoomEvent.ParticipantDisconnected,
    RoomEvent.ConnectionStateChanged
  ).pipe(
    wn((c) => {
      const u = Array.from(c.remoteParticipants.values()).find(
        (l) => s(l)
      );
      return u ? me(u, ...o) : new O((l) => l.next(void 0));
    }),
    R(Array.from(e3.remoteParticipants.values()).find((c) => s(c)))
  );
}
function is(e3) {
  return typeof e3 > "u" ? new O() : Ve(e3, ParticipantEvent.AttributesChanged).pipe(
    k(([t]) => ({
      changed: t,
      attributes: e3.attributes
    })),
    R({ changed: e3.attributes, attributes: e3.attributes })
  );
}
function os(e3, t, n, r2, i) {
  const { localParticipant: o } = t, s = (f, h2) => {
    let d = false;
    switch (f) {
      case Track.Source.Camera:
        d = h2.isCameraEnabled;
        break;
      case Track.Source.Microphone:
        d = h2.isMicrophoneEnabled;
        break;
      case Track.Source.ScreenShare:
        d = h2.isScreenShareEnabled;
        break;
    }
    return d;
  }, a2 = On(o).pipe(
    k((f) => s(e3, f.participant)),
    R(s(e3, o))
  ), c = new re(), u = (f, h2) => W(this, null, function* () {
    try {
      switch (h2 ?? (h2 = n), c.next(true), e3) {
        case Track.Source.Camera:
          return yield o.setCameraEnabled(
            f ?? !o.isCameraEnabled,
            h2,
            r2
          ), o.isCameraEnabled;
        case Track.Source.Microphone:
          return yield o.setMicrophoneEnabled(
            f ?? !o.isMicrophoneEnabled,
            h2,
            r2
          ), o.isMicrophoneEnabled;
        case Track.Source.ScreenShare:
          return yield o.setScreenShareEnabled(
            f ?? !o.isScreenShareEnabled,
            h2,
            r2
          ), o.isScreenShareEnabled;
        default:
          throw new TypeError("Tried to toggle unsupported source");
      }
    } catch (d) {
      if (i && d instanceof Error) {
        i == null || i(d);
        return;
      } else
        throw d;
    } finally {
      c.next(false);
    }
  });
  return {
    className: $("button"),
    toggle: u,
    enabledObserver: a2,
    pendingObserver: c.asObservable()
  };
}
function ss() {
  let e3 = false;
  const t = new re(), n = new re(), r2 = (o) => W(this, null, function* () {
    n.next(true), e3 = o ?? !e3, t.next(e3), n.next(false);
  });
  return {
    className: $("button"),
    toggle: r2,
    enabledObserver: t.asObservable(),
    pendingObserver: n.asObservable()
  };
}
function as(e3, t, n) {
  const r2 = new on(void 0), i = t ? io(t, e3) : r2.asObservable(), o = (a2, ...c) => W(this, [a2, ...c], function* (u, l = {}) {
    var f, h2, d;
    if (t) {
      _.debug(`Switching active device of kind "${e3}" with id ${u}.`), yield t.switchActiveDevice(e3, u, l.exact);
      const m = (f = t.getActiveDevice(e3)) != null ? f : u;
      m !== u && u !== "default" && _.info(
        `We tried to select the device with id (${u}), but the browser decided to select the device with id (${m}) instead.`
      );
      let p;
      e3 === "audioinput" ? p = (h2 = t.localParticipant.getTrackPublication(Track.Source.Microphone)) == null ? void 0 : h2.track : e3 === "videoinput" && (p = (d = t.localParticipant.getTrackPublication(Track.Source.Camera)) == null ? void 0 : d.track);
      const g = u === "default" && !p || u === "default" && (p == null ? void 0 : p.mediaStreamTrack.label.startsWith("Default"));
      r2.next(g ? u : m);
    } else if (n) {
      yield n.setDeviceId(l.exact ? { exact: u } : u);
      const m = yield n.getDeviceId();
      r2.next(
        u === "default" && n.mediaStreamTrack.label.startsWith("Default") ? u : m
      );
    } else r2.value !== u && (_.warn(
      "device switch skipped, please provide either a room or a local track to switch on. "
    ), r2.next(u));
  });
  return {
    className: $("media-device-select"),
    activeDeviceObservable: i,
    setActiveMediaDevice: o
  };
}
function cs(e3) {
  const t = (r2) => {
    e3.disconnect(r2);
  };
  return { className: $("disconnect-button"), disconnect: t };
}
function us(e3) {
  const t = $("connection-quality"), n = so(e3);
  return { className: t, connectionQualityObserver: n };
}
function ls(e3) {
  let t = "track-muted-indicator-camera";
  switch (e3.source) {
    case Track.Source.Camera:
      t = "track-muted-indicator-camera";
      break;
    case Track.Source.Microphone:
      t = "track-muted-indicator-microphone";
      break;
  }
  const n = $(t), r2 = ao(e3);
  return { className: n, mediaMutedObserver: r2 };
}
function fs(e3) {
  return { className: "lk-participant-name", infoObserver: oo(e3) };
}
function ds() {
  return {
    className: $("participant-tile")
  };
}
var Nt = {
  CHAT: "lk-chat-topic",
  CHAT_UPDATE: "lk-chat-update-topic"
};
function it(e3, t) {
  return W(this, arguments, function* (n, r2, i = {}) {
    const { reliable: o, destinationIdentities: s, topic: a2 } = i;
    yield n.publishData(r2, {
      destinationIdentities: s,
      topic: a2,
      reliable: o
    });
  });
}
function co(e3, t, n) {
  const r2 = Array.isArray(t) ? t : [t], i = eo(e3).pipe(
    vt(
      ([, , , c]) => t === void 0 || c !== void 0 && r2.includes(c)
    ),
    k(([c, u, , l]) => {
      const f = {
        payload: c,
        topic: l,
        from: u
      };
      return n == null || n(f), f;
    })
  );
  let o;
  const s = new O((c) => {
    o = c;
  });
  return { messageObservable: i, isSendingObservable: s, send: (c, ...u) => W(this, [c, ...u], function* (l, f = {}) {
    o.next(true);
    try {
      yield it(e3.localParticipant, l, Q({ topic: r2[0] }, f));
    } finally {
      o.next(false);
    }
  }) };
}
function uo(e3) {
  return { chatObservable: to(e3), send: (i) => W(this, null, function* () {
    return yield e3.localParticipant.sendChatMessage(i);
  }), edit: (i, o) => W(this, null, function* () {
    return yield e3.localParticipant.editChatMessage(i, o);
  }) };
}
var lo = new TextEncoder();
var fo = new TextDecoder();
var Pe = /* @__PURE__ */ new Map();
var po = (e3) => lo.encode(JSON.stringify(e3));
var ho = (e3) => JSON.parse(fo.decode(e3));
function ps(e3, t) {
  var n, r2;
  const i = new re(), o = () => {
    var T2, x, I3;
    return ((T2 = e3.serverInfo) == null ? void 0 : T2.edition) === 1 || !!((x = e3.serverInfo) != null && x.version) && compareVersions((I3 = e3.serverInfo) == null ? void 0 : I3.version, "1.17.2") > 0;
  }, { messageDecoder: s, messageEncoder: a2, channelTopic: c, updateChannelTopic: u } = t ?? {}, l = c ?? Nt.CHAT, f = u ?? Nt.CHAT_UPDATE;
  let h2 = false;
  Pe.has(e3) || (h2 = true);
  const d = (n = Pe.get(e3)) != null ? n : /* @__PURE__ */ new Map(), m = (r2 = d.get(l)) != null ? r2 : new re();
  if (d.set(l, m), Pe.set(e3, d), h2) {
    const { messageObservable: T2 } = co(e3, [l, f]);
    T2.pipe(Lt(i)).subscribe(m);
  }
  const { chatObservable: p, send: g } = uo(e3), v = s ?? ho, E = wi(
    m.pipe(
      k((T2) => {
        const x = v(T2.payload), I3 = ye(Q({}, x), { from: T2.from });
        if (!vo(I3))
          return I3;
      })
    ),
    p.pipe(
      k(([T2, x]) => ye(Q({}, T2), { from: x }))
    )
  ).pipe(
    Ci((T2, x) => {
      var I3;
      if (!x)
        return T2;
      if ("id" in x && T2.find((w) => {
        var S, V;
        return ((S = w.from) == null ? void 0 : S.identity) === ((V = x.from) == null ? void 0 : V.identity) && w.id === x.id;
      })) {
        const w = T2.findIndex((S) => S.id === x.id);
        if (w > -1) {
          const S = T2[w];
          T2[w] = ye(Q({}, x), {
            timestamp: S.timestamp,
            editTimestamp: (I3 = x.editTimestamp) != null ? I3 : x.timestamp
          });
        }
        return [...T2];
      }
      return [...T2, x];
    }, []),
    Lt(i)
  ), P2 = new on(false), L2 = a2 ?? po, C = (T2) => W(this, null, function* () {
    P2.next(true);
    try {
      const x = yield g(T2), I3 = L2(ye(Q({}, x), {
        ignore: o()
      }));
      return yield it(e3.localParticipant, I3, {
        reliable: true,
        topic: l
      }), x;
    } finally {
      P2.next(false);
    }
  }), ie2 = (T2, x) => W(this, null, function* () {
    const I3 = Date.now(), w = typeof x == "string" ? { id: x, message: "", timestamp: I3 } : x;
    P2.next(true);
    try {
      const S = yield e3.localParticipant.editChatMessage(T2, w), V = L2(S);
      return yield it(e3.localParticipant, V, {
        topic: f,
        reliable: true
      }), S;
    } finally {
      P2.next(false);
    }
  });
  function K() {
    i.next(), i.complete(), Pe.delete(e3);
  }
  return e3.once(RoomEvent.Disconnected, K), {
    messageObservable: E,
    isSendingObservable: P2,
    send: C,
    update: ie2
  };
}
function vo(e3) {
  return e3.ignore == true;
}
function hs() {
  const e3 = (n) => W(this, null, function* () {
    _.info("Start Audio for room: ", n), yield n.startAudio();
  });
  return { className: $("start-audio-button"), roomAudioPlaybackAllowedObservable: no, handleStartAudioPlayback: e3 };
}
function vs() {
  const e3 = (n) => W(this, null, function* () {
    _.info("Start Video for room: ", n), yield n.startVideo();
  });
  return { className: $("start-audio-button"), roomVideoPlaybackAllowedObservable: ro, handleStartVideoPlayback: e3 };
}
function ms() {
  return { className: [$("button"), $("chat-toggle")].join(" ") };
}
function gs() {
  return { className: [$("button"), $("focus-toggle-button")].join(" ") };
}
function bs() {
  return { className: "lk-clear-pin-button lk-button" };
}
function ys() {
  return { className: "lk-room-container" };
}
function $t(e3, t, n = true) {
  const i = [e3.localParticipant, ...Array.from(e3.remoteParticipants.values())], o = [];
  return i.forEach((s) => {
    t.forEach((a2) => {
      const c = Array.from(
        s.trackPublications.values()
      ).filter(
        (u) => u.source === a2 && // either return all or only the ones that are subscribed
        (!n || u.track)
      ).map((u) => ({
        participant: s,
        publication: u,
        source: u.source
      }));
      o.push(...c);
    });
  }), { trackReferences: o, participants: i };
}
function Ut(e3, t, n = false) {
  const { sources: r2, kind: i, name: o } = t;
  return Array.from(e3.trackPublications.values()).filter(
    (a2) => (!r2 || r2.includes(a2.source)) && (!i || a2.kind === i) && (!o || a2.trackName === o) && // either return all or only the ones that are subscribed
    (!n || a2.track)
  ).map((a2) => ({
    participant: e3,
    publication: a2,
    source: a2.source
  }));
}
function ws(e3, t, n) {
  var r2, i;
  const o = (r2 = n.additionalRoomEvents) != null ? r2 : xn, s = (i = n.onlySubscribed) != null ? i : true, a2 = Array.from(
    (/* @__PURE__ */ new Set([
      RoomEvent.ParticipantConnected,
      RoomEvent.ParticipantDisconnected,
      RoomEvent.ConnectionStateChanged,
      RoomEvent.LocalTrackPublished,
      RoomEvent.LocalTrackUnpublished,
      RoomEvent.TrackPublished,
      RoomEvent.TrackUnpublished,
      RoomEvent.TrackSubscriptionStatusChanged,
      ...o
    ])).values()
  );
  return se(e3, ...a2).pipe(
    k((u) => {
      const l = $t(u, t, s);
      return _.debug(`TrackReference[] was updated. (length ${l.trackReferences.length})`, l), l;
    }),
    R($t(e3, t, s))
  );
}
function Ss(e3, t) {
  return me(e3, ...Ui).pipe(
    k((r2) => {
      const i = Ut(r2, t);
      return _.debug(`TrackReference[] was updated. (length ${i.length})`, i), i;
    }),
    R(Ut(e3, t))
  );
}
function Ln(e3, t) {
  return new O((r2) => {
    const i = (...s) => {
      r2.next(s);
    };
    return e3.on(t, i), () => {
      e3.off(t, i);
    };
  });
}
function xs(e3) {
  return Ln(e3, TrackEvent.TranscriptionReceived);
}
function Es(e3) {
  return Ln(e3, TrackEvent.TimeSyncUpdate).pipe(
    k(([t]) => t)
  );
}
function Ts(e3, t = 1e3) {
  if (e3 === null) return kt(false);
  const n = tt(e3, "mousemove", { passive: true }).pipe(k(() => true)), r2 = n.pipe(
    ai({
      each: t,
      with: () => De(kt(false), r2.pipe(Pi(n)))
    }),
    xi()
  );
  return r2;
}
function mo(e3, t) {
  if (typeof localStorage > "u") {
    _.error("Local storage is not available.");
    return;
  }
  try {
    if (t) {
      const n = Object.fromEntries(
        Object.entries(t).filter(([, r2]) => r2 !== "")
      );
      localStorage.setItem(e3, JSON.stringify(n));
    }
  } catch (n) {
    _.error(`Error setting item to local storage: ${n}`);
  }
}
function go(e3) {
  if (typeof localStorage > "u") {
    _.error("Local storage is not available.");
    return;
  }
  try {
    const t = localStorage.getItem(e3);
    if (!t) {
      _.warn(`Item with key ${e3} does not exist in local storage.`);
      return;
    }
    return JSON.parse(t);
  } catch (t) {
    _.error(`Error getting item from local storage: ${t}`);
    return;
  }
}
function bo(e3) {
  return {
    load: () => go(e3),
    save: (t) => mo(e3, t)
  };
}
var yo = `${Sn}-user-choices`;
var be = {
  videoEnabled: true,
  audioEnabled: true,
  videoDeviceId: "",
  audioDeviceId: "",
  username: ""
};
var { load: wo, save: So } = bo(yo);
function Cs(e3, t = false) {
  t !== true && So(e3);
}
function Ps(e3, t = false) {
  var n, r2, i, o, s;
  const a2 = {
    videoEnabled: (n = e3 == null ? void 0 : e3.videoEnabled) != null ? n : be.videoEnabled,
    audioEnabled: (r2 = e3 == null ? void 0 : e3.audioEnabled) != null ? r2 : be.audioEnabled,
    videoDeviceId: (i = e3 == null ? void 0 : e3.videoDeviceId) != null ? i : be.videoDeviceId,
    audioDeviceId: (o = e3 == null ? void 0 : e3.audioDeviceId) != null ? o : be.audioDeviceId,
    username: (s = e3 == null ? void 0 : e3.username) != null ? s : be.username
  };
  if (t)
    return a2;
  {
    const c = wo();
    return Q(Q({}, a2), c ?? {});
  }
}
function _n(e3, t) {
  if (t.msg === "show_chat")
    return { ...e3, showChat: true, unreadMessages: 0 };
  if (t.msg === "hide_chat")
    return { ...e3, showChat: false };
  if (t.msg === "toggle_chat") {
    const n = { ...e3, showChat: !e3.showChat };
    return n.showChat === true && (n.unreadMessages = 0), n;
  } else return t.msg === "unread_msg" ? { ...e3, unreadMessages: t.count } : t.msg === "toggle_settings" ? { ...e3, showSettings: !e3.showSettings } : { ...e3 };
}
function In(e3, t) {
  return t.msg === "set_pin" ? [t.trackReference] : t.msg === "clear_pin" ? [] : { ...e3 };
}
var Dn = D.createContext(void 0);
function As() {
  const e3 = D.useContext(Dn);
  if (!e3)
    throw Error("Tried to access LayoutContext context outside a LayoutContextProvider provider.");
  return e3;
}
function ks(e3) {
  const t = xo();
  if (e3 ?? (e3 = t), !e3)
    throw Error("Tried to access LayoutContext context outside a LayoutContextProvider provider.");
  return e3;
}
function Os() {
  const [e3, t] = D.useReducer(In, Tn), [n, r2] = D.useReducer(_n, Cn);
  return {
    pin: { dispatch: t, state: e3 },
    widget: { dispatch: r2, state: n }
  };
}
function Ls(e3) {
  const [t, n] = D.useReducer(In, Tn), [r2, i] = D.useReducer(_n, Cn);
  return e3 ?? {
    pin: { dispatch: n, state: t },
    widget: { dispatch: i, state: r2 }
  };
}
function xo() {
  return D.useContext(Dn);
}
var Mn = D.createContext(
  void 0
);
function _s() {
  const e3 = D.useContext(Mn);
  if (!e3)
    throw Error("tried to access track context outside of track context provider");
  return e3;
}
function Rn() {
  return D.useContext(Mn);
}
function Is(e3) {
  const t = Rn(), n = e3 ?? t;
  if (!n)
    throw new Error(
      "No TrackRef, make sure you are inside a TrackRefContext or pass the TrackRef explicitly"
    );
  return n;
}
var Nn = D.createContext(void 0);
function Ds() {
  const e3 = D.useContext(Nn);
  if (!e3)
    throw Error("tried to access participant context outside of participant context provider");
  return e3;
}
function Eo() {
  return D.useContext(Nn);
}
function Ms(e3) {
  const t = Eo(), n = Rn(), r2 = e3 ?? t ?? (n == null ? void 0 : n.participant);
  if (!r2)
    throw new Error(
      "No participant provided, make sure you are inside a participant context or pass the participant explicitly"
    );
  return r2;
}
var $n = D.createContext(void 0);
function Rs() {
  const e3 = D.useContext($n);
  if (!e3)
    throw Error("tried to access room context outside of livekit room component");
  return e3;
}
function To() {
  return D.useContext($n);
}
function Ns(e3) {
  const t = To(), n = e3 ?? t;
  if (!n)
    throw new Error(
      "No room provided, make sure you are inside a Room context or pass the room explicitly"
    );
  return n;
}
var Co = D.createContext(void 0);
function $s(e3) {
  const t = D.useContext(Co);
  if (e3 === true) {
    if (t)
      return t;
    throw Error("tried to access feature context, but none is present");
  }
  return t;
}

// node_modules/@livekit/components-react/dist/room-9If4zpLS.mjs
var a = __toESM(require_react(), 1);
function L(n) {
  var e3, o, t = "";
  if (typeof n == "string" || typeof n == "number") t += n;
  else if (typeof n == "object") if (Array.isArray(n)) {
    var r2 = n.length;
    for (e3 = 0; e3 < r2; e3++) n[e3] && (o = L(n[e3])) && (t && (t += " "), t += o);
  } else for (o in n) n[o] && (t && (t += " "), t += o);
  return t;
}
function j2() {
  for (var n, e3, o = 0, t = "", r2 = arguments.length; o < r2; o++) (n = arguments[o]) && (e3 = L(n)) && (t && (t += " "), t += e3);
  return t;
}
function O2(...n) {
  return (...e3) => {
    for (const o of n)
      if (typeof o == "function")
        try {
          o(...e3);
        } catch (t) {
          console.error(t);
        }
  };
}
function U2(...n) {
  const e3 = { ...n[0] };
  for (let o = 1; o < n.length; o++) {
    const t = n[o];
    for (const r2 in t) {
      const l = e3[r2], f = t[r2];
      typeof l == "function" && typeof f == "function" && // This is a lot faster than a regex.
      r2[0] === "o" && r2[1] === "n" && r2.charCodeAt(2) >= /* 'A' */
      65 && r2.charCodeAt(2) <= /* 'Z' */
      90 ? e3[r2] = O2(l, f) : (r2 === "className" || r2 === "UNSAFE_className") && typeof l == "string" && typeof f == "string" ? e3[r2] = j2(l, f) : e3[r2] = f !== void 0 ? f : l;
    }
  }
  return e3;
}
var J2 = {
  connect: true,
  audio: false,
  video: false
};
function T(n) {
  const {
    token: e3,
    serverUrl: o,
    options: t,
    room: r2,
    connectOptions: l,
    connect: f,
    audio: p,
    video: g,
    screen: v,
    onConnected: E,
    onDisconnected: R3,
    onError: c,
    onMediaDeviceFailure: h2,
    onEncryptionError: y,
    simulateParticipants: S,
    ...P2
  } = { ...J2, ...n };
  t && r2 && _.warn(
    "when using a manually created room, the options object will be ignored. set the desired options directly when creating the room instead."
  );
  const [i, D4] = a.useState();
  a.useEffect(() => {
    D4(r2 ?? new Room(t));
  }, [r2]);
  const A3 = a.useMemo(() => {
    const { className: s } = ys();
    return U2(P2, { className: s });
  }, [P2]);
  return a.useEffect(() => {
    if (!i) return;
    const s = () => {
      const m = i.localParticipant;
      _.debug("trying to publish local tracks"), Promise.all([
        m.setMicrophoneEnabled(!!p, typeof p != "boolean" ? p : void 0),
        m.setCameraEnabled(!!g, typeof g != "boolean" ? g : void 0),
        m.setScreenShareEnabled(!!v, typeof v != "boolean" ? v : void 0)
      ]).catch((C) => {
        _.warn(C), c == null || c(C);
      });
    }, b2 = (m) => {
      const C = MediaDeviceFailure.getFailure(m);
      h2 == null || h2(C);
    }, k2 = (m) => {
      y == null || y(m);
    };
    return i.on(RoomEvent.SignalConnected, s).on(RoomEvent.MediaDevicesError, b2).on(RoomEvent.EncryptionError, k2), () => {
      i.off(RoomEvent.SignalConnected, s).off(RoomEvent.MediaDevicesError, b2).off(RoomEvent.EncryptionError, k2);
    };
  }, [i, p, g, v, c, y, h2]), a.useEffect(() => {
    if (i) {
      if (S) {
        i.simulateParticipants({
          participants: {
            count: S
          },
          publish: {
            audio: true,
            useRealTracks: true
          }
        });
        return;
      }
      if (!e3) {
        _.debug("no token yet");
        return;
      }
      if (!o) {
        _.warn("no livekit url provided"), c == null || c(Error("no livekit url provided"));
        return;
      }
      f ? (_.debug("connecting"), i.connect(o, e3, l).catch((s) => {
        _.warn(s), c == null || c(s);
      })) : (_.debug("disconnecting because connect is false"), i.disconnect());
    }
  }, [
    f,
    e3,
    JSON.stringify(l),
    i,
    c,
    o,
    S
  ]), a.useEffect(() => {
    if (!i) return;
    const s = (b2) => {
      switch (b2) {
        case ConnectionState.Disconnected:
          R3 && R3();
          break;
        case ConnectionState.Connected:
          E && E();
          break;
      }
    };
    return i.on(RoomEvent.ConnectionStateChanged, s), () => {
      i.off(RoomEvent.ConnectionStateChanged, s);
    };
  }, [e3, E, R3, i]), a.useEffect(() => {
    if (i)
      return () => {
        _.info("disconnecting on onmount"), i.disconnect();
      };
  }, [i]), { room: i, htmlProps: A3 };
}
var z2 = a.forwardRef(function(e3, o) {
  const { room: t, htmlProps: r2 } = T(e3);
  return a.createElement("div", { ref: o, ...r2 }, t && a.createElement($n.Provider, { value: t }, a.createElement(Co.Provider, { value: e3.featureFlags }, e3.children)));
});

// node_modules/@livekit/components-react/dist/hooks-BZ9KhMcV.mjs
var Qe2 = (e3) => {
  const n = r.useRef(e3);
  return r.useEffect(() => {
    n.current = e3;
  }), n;
};
function $e2(e3, n) {
  const t = He2(), a2 = Qe2(n);
  return r.useLayoutEffect(() => {
    let s = false;
    const c = e3.current;
    if (!c) return;
    function o(u, i) {
      s || a2.current(u, i);
    }
    return t == null || t.subscribe(c, o), () => {
      s = true, t == null || t.unsubscribe(c, o);
    };
  }, [e3.current, t, a2]), t == null ? void 0 : t.observer;
}
function Ge2() {
  let e3 = false, n = [];
  const t = /* @__PURE__ */ new Map();
  if (typeof window > "u")
    return;
  const a2 = new ResizeObserver((s, c) => {
    n = n.concat(s), e3 || window.requestAnimationFrame(() => {
      const o = /* @__PURE__ */ new Set();
      for (let u = 0; u < n.length; u++) {
        if (o.has(n[u].target)) continue;
        o.add(n[u].target);
        const i = t.get(n[u].target);
        i == null || i.forEach((l) => l(n[u], c));
      }
      n = [], e3 = false;
    }), e3 = true;
  });
  return {
    observer: a2,
    subscribe(s, c) {
      a2.observe(s);
      const o = t.get(s) ?? [];
      o.push(c), t.set(s, o);
    },
    unsubscribe(s, c) {
      const o = t.get(s) ?? [];
      if (o.length === 1) {
        a2.unobserve(s), t.delete(s);
        return;
      }
      const u = o.indexOf(c);
      u !== -1 && o.splice(u, 1), t.set(s, o);
    }
  };
}
var D2;
var He2 = () => D2 || (D2 = Ge2());
var je2 = (e3) => {
  const [n, t] = r.useState({ width: 0, height: 0 });
  r.useLayoutEffect(() => {
    if (e3.current) {
      const { width: s, height: c } = e3.current.getBoundingClientRect();
      t({ width: s, height: c });
    }
  }, [e3.current]);
  const a2 = r.useCallback(
    (s) => t(s.contentRect),
    []
  );
  return $e2(e3, a2), n;
};
function b(e3, n, t = true) {
  const [a2, s] = r.useState(n);
  return r.useEffect(() => {
    if (t && s(n), typeof window > "u" || !e3) return;
    const c = e3.subscribe(s);
    return () => c.unsubscribe();
  }, [e3, t]), a2;
}
function gt(e3) {
  const n = (c) => typeof window < "u" ? window.matchMedia(c).matches : false, [t, a2] = r.useState(n(e3));
  function s() {
    a2(n(e3));
  }
  return r.useEffect(() => {
    const c = window.matchMedia(e3);
    return s(), c.addListener ? c.addListener(s) : c.addEventListener("change", s), () => {
      c.removeListener ? c.removeListener(s) : c.removeEventListener("change", s);
    };
  }, [e3]), t;
}
function St2(e3) {
  const n = Ns(e3), t = r.useCallback(async () => {
    await n.startAudio();
  }, [n]), a2 = r.useMemo(
    () => no(n),
    [n]
  ), { canPlayAudio: s } = b(a2, {
    canPlayAudio: n.canPlaybackAudio
  });
  return { canPlayAudio: s, startAudio: t };
}
function vt2(e3) {
  const { state: n, dispatch: t } = As().pin;
  return { buttonProps: r.useMemo(() => {
    const { className: s } = bs();
    return U2(e3, {
      className: s,
      disabled: !(n != null && n.length),
      onClick: () => {
        t && t({ msg: "clear_pin" });
      }
    });
  }, [e3, t, n]) };
}
function ht2(e3 = {}) {
  const n = Ms(e3.participant), { className: t, connectionQualityObserver: a2 } = r.useMemo(
    () => us(n),
    [n]
  ), s = b(a2, ConnectionQuality.Unknown);
  return { className: t, quality: s };
}
function I(e3) {
  const n = Ns(e3), t = r.useMemo(() => Go(n), [n]);
  return b(t, n.state);
}
function Mt2(e3, n) {
  const t = typeof e3 == "function" ? e3 : n, a2 = typeof e3 == "string" ? e3 : void 0, s = Rs(), { send: c, messageObservable: o, isSendingObservable: u } = r.useMemo(
    () => co(s, a2, t),
    [s, a2, t]
  ), i = b(o, void 0), l = b(u, false);
  return {
    message: i,
    send: c,
    isSending: l
  };
}
function yt2(e3) {
  const n = Rs(), t = I(n);
  return { buttonProps: r.useMemo(() => {
    const { className: s, disconnect: c } = cs(n);
    return U2(e3, {
      className: s,
      onClick: () => c(e3.stopTracks ?? true),
      disabled: t === ConnectionState.Disconnected
    });
  }, [n, e3, t]) };
}
function Xe2(e3) {
  if (e3.publication instanceof LocalTrackPublication) {
    const n = e3.publication.track;
    if (n) {
      const { facingMode: t } = facingModeFromLocalTrack(n);
      return t;
    }
  }
  return "undefined";
}
function Pt2({ trackRef: e3, props: n }) {
  const t = Is(e3), a2 = xo(), { className: s } = r.useMemo(() => gs(), []), c = r.useMemo(() => ko(t, a2 == null ? void 0 : a2.pin.state), [t, a2 == null ? void 0 : a2.pin.state]);
  return { mergedProps: r.useMemo(
    () => U2(n, {
      className: s,
      onClick: (u) => {
        var i, l, d, f, p;
        (i = n.onClick) == null || i.call(n, u), c ? (d = a2 == null ? void 0 : (l = a2.pin).dispatch) == null || d.call(l, {
          msg: "clear_pin"
        }) : (p = a2 == null ? void 0 : (f = a2.pin).dispatch) == null || p.call(f, {
          msg: "set_pin",
          trackReference: t
        });
      }
    }),
    [n, s, t, c, a2 == null ? void 0 : a2.pin]
  ), inFocus: c };
}
function kt2(e3, n, t = {}) {
  const a2 = t.gridLayouts ?? Uo, { width: s, height: c } = je2(e3), o = ji(a2, n, s, c);
  return r.useEffect(() => {
    e3.current && o && (e3.current.style.setProperty("--lk-col-count", o == null ? void 0 : o.columns.toString()), e3.current.style.setProperty("--lk-row-count", o == null ? void 0 : o.rows.toString()));
  }, [e3, o]), {
    layout: o,
    containerWidth: s,
    containerHeight: c
  };
}
function z3(e3, n = {}) {
  var u, i;
  const t = typeof e3 == "string" ? n.participant : e3.participant, a2 = Ms(t), s = typeof e3 == "string" ? { participant: a2, source: e3 } : e3, [c, o] = r.useState(
    !!((u = s.publication) != null && u.isMuted || (i = a2.getTrackPublication(s.source)) != null && i.isMuted)
  );
  return r.useEffect(() => {
    const l = ao(s).subscribe(o);
    return () => l.unsubscribe();
  }, [N(s)]), c;
}
function xe2(e3) {
  const n = Ms(e3), t = r.useMemo(() => Zo(n), [n]);
  return b(t, n.isSpeaking);
}
function Ye2(e3 = {}) {
  const n = Ns(e3.room), [t, a2] = r.useState(n.localParticipant), [s, c] = r.useState(
    t.isMicrophoneEnabled
  ), [o, u] = r.useState(
    t.isMicrophoneEnabled
  ), [i, l] = r.useState(
    t.lastMicrophoneError
  ), [d, f] = r.useState(t.lastCameraError), [p, m] = r.useState(
    t.isMicrophoneEnabled
  ), [g, S] = r.useState(
    void 0
  ), [M, v] = r.useState(void 0), P2 = (h2) => {
    u(h2.isCameraEnabled), c(h2.isMicrophoneEnabled), m(h2.isScreenShareEnabled), v(h2.cameraTrack), S(h2.microphoneTrack), l(h2.participant.lastMicrophoneError), f(h2.participant.lastCameraError), a2(h2.participant);
  };
  return r.useEffect(() => {
    const h2 = On(n.localParticipant).subscribe(P2);
    return () => h2.unsubscribe();
  }, [n]), {
    isMicrophoneEnabled: s,
    isScreenShareEnabled: p,
    isCameraEnabled: o,
    microphoneTrack: g,
    cameraTrack: M,
    lastMicrophoneError: i,
    lastCameraError: d,
    localParticipant: t
  };
}
function Et2() {
  const e3 = Rs(), n = r.useMemo(
    () => ns(e3.localParticipant),
    [e3]
  );
  return b(n, e3.localParticipant.permissions);
}
function Tt2({
  kind: e3,
  room: n,
  track: t,
  requestPermissions: a2,
  onError: s
}) {
  const c = To(), o = r.useMemo(
    () => Jo(e3, s, a2),
    [e3, a2, s]
  ), u = b(o, []), [i, l] = r.useState(
    (c == null ? void 0 : c.getActiveDevice(e3)) ?? ""
  ), { className: d, activeDeviceObservable: f, setActiveMediaDevice: p } = r.useMemo(
    () => as(e3, n ?? c, t),
    [e3, n, c, t]
  );
  return r.useEffect(() => {
    const m = f.subscribe((g) => {
      g && g !== i && (_.info("setCurrentDeviceId", g), l(g));
    });
    return () => {
      m == null || m.unsubscribe();
    };
  }, [f]), { devices: u, className: d, activeDeviceId: i, setActiveMediaDevice: p };
}
function wt2({
  kind: e3,
  onError: n
}) {
  const t = r.useMemo(
    () => Jo(e3, n),
    [e3, n]
  );
  return b(t, []);
}
function Ke2(e3, n, t = {}) {
  const a2 = r.useRef([]), s = r.useRef(-1), c = n !== s.current, o = typeof t.customSortFunction == "function" ? t.customSortFunction(e3) : Vo(e3);
  let u = [...o];
  if (c === false)
    try {
      u = zo(a2.current, o, n);
    } catch (i) {
      _.error("Error while running updatePages(): ", i);
    }
  return c ? a2.current = o : a2.current = u, s.current = n, u;
}
function At2(e3, n) {
  const [t, a2] = r.useState(1), s = Math.max(Math.ceil(n.length / e3), 1);
  t > s && a2(s);
  const c = t * e3, o = c - e3, u = (f) => {
    a2((p) => f === "next" ? p === s ? p : p + 1 : p === 1 ? p : p - 1);
  }, i = (f) => {
    f > s ? a2(s) : f < 1 ? a2(1) : a2(f);
  }, d = Ke2(n, e3).slice(o, c);
  return {
    totalPageCount: s,
    nextPage: () => u("next"),
    prevPage: () => u("previous"),
    setPage: i,
    firstItemIndex: o,
    lastItemIndex: c,
    tracks: d,
    currentPage: t
  };
}
function Ct2(e3 = {}) {
  let n = Eo();
  e3.participant && (n = e3.participant);
  const t = r.useMemo(() => oo(n), [n]), { identity: a2, name: s, metadata: c } = b(t, {
    name: n == null ? void 0 : n.name,
    identity: n == null ? void 0 : n.identity,
    metadata: n == null ? void 0 : n.metadata
  });
  return { identity: a2, name: s, metadata: c };
}
function Ot2(e3 = {}) {
  const n = Ms(e3.participant), t = r.useMemo(() => ns(n), [n]);
  return b(t, n.permissions);
}
function It2({
  trackRef: e3,
  onParticipantClick: n,
  disableSpeakingIndicator: t,
  htmlProps: a2
}) {
  const s = Is(e3), c = r.useMemo(() => {
    const { className: p } = ds();
    return U2(a2, {
      className: p,
      onClick: (m) => {
        var g;
        if ((g = a2.onClick) == null || g.call(a2, m), typeof n == "function") {
          const S = s.publication ?? s.participant.getTrackPublication(s.source);
          n({ participant: s.participant, track: S });
        }
      }
    });
  }, [
    a2,
    n,
    s.publication,
    s.source,
    s.participant
  ]), o = s.participant.getTrackPublication(Track.Source.Microphone), u = r.useMemo(() => ({
    participant: s.participant,
    source: Track.Source.Microphone,
    publication: o
  }), [o, s.participant]), i = z3(s), l = z3(u), d = xe2(s.participant), f = Xe2(s);
  return {
    elementProps: {
      "data-lk-audio-muted": l,
      "data-lk-video-muted": i,
      "data-lk-speaking": t === true ? false : d,
      "data-lk-local-participant": s.participant.isLocal,
      "data-lk-source": s.source,
      "data-lk-facing-mode": f,
      ...c
    }
  };
}
function G2(e3 = {}) {
  const n = Ns(e3.room), [t, a2] = r.useState([]);
  return r.useEffect(() => {
    const s = es(n, {
      additionalRoomEvents: e3.updateOnlyOn
    }).subscribe(a2);
    return () => s.unsubscribe();
  }, [n, JSON.stringify(e3.updateOnlyOn)]), t;
}
function Dt2(e3 = {}) {
  const n = G2(e3), { localParticipant: t } = Ye2(e3);
  return r.useMemo(
    () => [t, ...n],
    [t, n]
  );
}
function Lt2(e3) {
  return e3 = ks(e3), r.useMemo(() => (e3 == null ? void 0 : e3.pin.state) !== void 0 && e3.pin.state.length >= 1 ? e3.pin.state : [], [e3.pin.state]);
}
function Rt2(e3, n = {}) {
  const t = Rs(), [a2] = r.useState(n.updateOnlyOn), s = r.useMemo(() => typeof e3 == "string" ? ts(t, e3, {
    additionalEvents: a2
  }) : rs(t, e3, {
    additionalEvents: a2
  }), [t, JSON.stringify(e3), a2]), [c, o] = r.useState({
    p: void 0
  });
  return r.useEffect(() => {
    const u = s.subscribe((i) => o({ p: i }));
    return () => u.unsubscribe();
  }, [s]), c.p;
}
function Ft(e3 = {}) {
  const n = Ns(e3.room), t = r.useMemo(() => Ko(n), [n]), { name: a2, metadata: s } = b(t, {
    name: n.name,
    metadata: n.metadata
  });
  return { name: a2, metadata: s };
}
function Ze2() {
  const e3 = Rs(), n = r.useMemo(() => Qo(e3), [e3]);
  return b(n, e3.activeSpeakers);
}
function Nt2(e3) {
  const [n, t] = r.useState(
    Ho(e3)
  ), a2 = Ze2();
  return r.useEffect(() => {
    t(Ho(e3));
  }, [a2, e3]), n;
}
function Vt2({ room: e3, props: n }) {
  const t = Ns(e3), { className: a2, roomAudioPlaybackAllowedObservable: s, handleStartAudioPlayback: c } = r.useMemo(
    () => hs(),
    []
  ), o = r.useMemo(
    () => s(t),
    [t, s]
  ), { canPlayAudio: u } = b(o, {
    canPlayAudio: t.canPlaybackAudio
  });
  return { mergedProps: r.useMemo(
    () => U2(n, {
      className: a2,
      onClick: () => {
        c(t);
      },
      style: { display: u ? "none" : "block" }
    }),
    [n, a2, u, c, t]
  ), canPlayAudio: u };
}
function Bt2({ room: e3, props: n }) {
  const t = Ns(e3), { className: a2, roomVideoPlaybackAllowedObservable: s, handleStartVideoPlayback: c } = r.useMemo(
    () => vs(),
    []
  ), o = r.useMemo(
    () => s(t),
    [t, s]
  ), { canPlayVideo: u } = b(o, {
    canPlayVideo: t.canPlaybackVideo
  });
  return { mergedProps: r.useMemo(
    () => U2(n, {
      className: a2,
      onClick: () => {
        c(t);
      },
      style: { display: u ? "none" : "block" }
    }),
    [n, a2, u, c, t]
  ), canPlayVideo: u };
}
function zt2(e3, n = {}) {
  const t = r.useRef(null), a2 = r.useRef(null), s = n.minSwipeDistance ?? 50, c = (i) => {
    a2.current = null, t.current = i.targetTouches[0].clientX;
  }, o = (i) => {
    a2.current = i.targetTouches[0].clientX;
  }, u = r.useCallback(() => {
    if (!t.current || !a2.current)
      return;
    const i = t.current - a2.current, l = i > s, d = i < -s;
    l && n.onLeftSwipe && n.onLeftSwipe(), d && n.onRightSwipe && n.onRightSwipe();
  }, [s, n]);
  r.useEffect(() => {
    const i = e3.current;
    return i && (i.addEventListener("touchstart", c, { passive: true }), i.addEventListener("touchmove", o, { passive: true }), i.addEventListener("touchend", u, { passive: true })), () => {
      i && (i.removeEventListener("touchstart", c), i.removeEventListener("touchmove", o), i.removeEventListener("touchend", u));
    };
  }, [e3, u]);
}
function Ut2({ props: e3 }) {
  const { dispatch: n, state: t } = As().widget, { className: a2 } = r.useMemo(() => ms(), []);
  return { mergedProps: r.useMemo(() => U2(e3, {
    className: a2,
    onClick: () => {
      n && n({ msg: "toggle_chat" });
    },
    "aria-pressed": t != null && t.showChat ? "true" : "false",
    "data-lk-unread-msgs": t ? t.unreadMessages < 10 ? t.unreadMessages.toFixed(0) : "9+" : "0"
  }), [e3, a2, n, t]) };
}
function qt2(e3, n, t = {}) {
  const [a2, s] = r.useState(void 0);
  return r.useEffect(() => {
    var o;
    if (e3 === void 0)
      throw Error("token endpoint needs to be defined");
    if (((o = t.userInfo) == null ? void 0 : o.identity) === void 0)
      return;
    (async () => {
      _.debug("fetching token");
      const u = new URLSearchParams({ ...t.userInfo, roomName: n }), i = await fetch(`${e3}?${u.toString()}`);
      if (!i.ok) {
        _.error(
          `Could not fetch token. Server responded with status ${i.status}: ${i.statusText}`
        );
        return;
      }
      const { accessToken: l } = await i.json();
      s(l);
    })();
  }, [e3, n, JSON.stringify(t)]), a2;
}
function Jt2(e3) {
  var c, o;
  const n = Is(e3), { className: t, mediaMutedObserver: a2 } = r.useMemo(
    () => ls(n),
    [N(n)]
  );
  return { isMuted: b(
    a2,
    !!((c = n.publication) != null && c.isMuted || (o = n.participant.getTrackPublication(n.source)) != null && o.isMuted)
  ), className: t };
}
function _t2({
  source: e3,
  onChange: n,
  initialState: t,
  captureOptions: a2,
  publishOptions: s,
  onDeviceError: c,
  ...o
}) {
  var P2;
  const u = To(), i = (P2 = u == null ? void 0 : u.localParticipant) == null ? void 0 : P2.getTrackPublication(e3), l = r.useRef(false), { toggle: d, className: f, pendingObserver: p, enabledObserver: m } = r.useMemo(
    () => u ? os(e3, u, a2, s, c) : ss(),
    [u, e3, JSON.stringify(a2), s]
  ), g = b(p, false), S = b(m, t ?? !!(i != null && i.isEnabled));
  r.useEffect(() => {
    n == null || n(S, l.current), l.current = false;
  }, [S, n]), r.useEffect(() => {
    t !== void 0 && (_.debug("forcing initial toggle state", e3, t), d(t));
  }, []);
  const M = r.useMemo(() => U2(o, { className: f }), [o, f]), v = r.useCallback(
    (h2) => {
      var C;
      l.current = true, d().catch(() => l.current = false), (C = o.onClick) == null || C.call(o, h2);
    },
    [o, d]
  );
  return {
    toggle: d,
    enabled: S,
    pending: g,
    track: i,
    buttonProps: {
      ...M,
      "aria-pressed": S,
      "data-lk-source": e3,
      "data-lk-enabled": S,
      disabled: g,
      onClick: v
    }
  };
}
function Wt2(e3 = [
  Track.Source.Camera,
  Track.Source.Microphone,
  Track.Source.ScreenShare,
  Track.Source.ScreenShareAudio,
  Track.Source.Unknown
], n = {}) {
  const t = Ns(n.room), [a2, s] = r.useState([]), [c, o] = r.useState([]), u = r.useMemo(() => e3.map((l) => Bi(l) ? l.source : l), [JSON.stringify(e3)]);
  return r.useEffect(() => {
    const l = ws(t, u, {
      additionalRoomEvents: n.updateOnlyOn,
      onlySubscribed: n.onlySubscribed
    }).subscribe(({ trackReferences: d, participants: f }) => {
      _.debug("setting track bundles", d, f), s(d), o(f);
    });
    return () => l.unsubscribe();
  }, [
    t,
    JSON.stringify(n.onlySubscribed),
    JSON.stringify(n.updateOnlyOn),
    JSON.stringify(e3)
  ]), r.useMemo(() => {
    if (Bo(e3)) {
      const l = tt2(e3, c), d = Array.from(a2);
      return c.forEach((f) => {
        l.has(f.identity) && (l.get(f.identity) ?? []).forEach((m) => {
          if (a2.find(
            ({ participant: S, publication: M }) => f.identity === S.identity && M.source === m
          ))
            return;
          _.debug(
            `Add ${m} placeholder for participant ${f.identity}.`
          );
          const g = {
            participant: f,
            source: m
          };
          d.push(g);
        });
      }), d;
    } else
      return a2;
  }, [a2, c, e3]);
}
function et2(e3, n) {
  const t = new Set(e3);
  for (const a2 of n)
    t.delete(a2);
  return t;
}
function tt2(e3, n) {
  const t = /* @__PURE__ */ new Map();
  if (Bo(e3)) {
    const a2 = e3.filter((s) => s.withPlaceholder).map((s) => s.source);
    n.forEach((s) => {
      const c = s.getTrackPublications().map((u) => {
        var i;
        return (i = u.track) == null ? void 0 : i.source;
      }).filter((u) => u !== void 0), o = Array.from(
        et2(new Set(a2), new Set(c))
      );
      o.length > 0 && t.set(s.identity, o);
    });
  }
  return t;
}
function nt2(e3) {
  const [n, t] = r.useState(Rt(e3)), { trackObserver: a2 } = r.useMemo(() => Yo(e3), [e3.participant.sid ?? e3.participant.identity, e3.source]);
  return r.useEffect(() => {
    const s = a2.subscribe((c) => {
      t(c);
    });
    return () => s == null ? void 0 : s.unsubscribe();
  }, [a2]), {
    participant: e3.participant,
    source: e3.source ?? Track.Source.Unknown,
    publication: n
  };
}
function Qt2(e3, n) {
  const t = Ms(n);
  return nt2({ name: e3, participant: t });
}
function $t2(e3) {
  const n = Rs(), t = I(n), a2 = r.useMemo(
    () => t === ConnectionState.Disconnected,
    [t]
  ), s = r.useMemo(
    () => ps(n, e3),
    [n, e3, a2]
  ), c = b(s.isSendingObservable, false), o = b(s.messageObservable, []);
  return { send: s.send, update: s.update, chatMessages: o, isSending: c };
}
function Gt2(e3 = {}) {
  const [n, t] = r.useState(
    Ps(e3.defaults, e3.preventLoad ?? false)
  ), a2 = r.useCallback((i) => {
    t((l) => ({ ...l, audioEnabled: i }));
  }, []), s = r.useCallback((i) => {
    t((l) => ({ ...l, videoEnabled: i }));
  }, []), c = r.useCallback((i) => {
    t((l) => ({ ...l, audioDeviceId: i }));
  }, []), o = r.useCallback((i) => {
    t((l) => ({ ...l, videoDeviceId: i }));
  }, []), u = r.useCallback((i) => {
    t((l) => ({ ...l, username: i }));
  }, []);
  return r.useEffect(() => {
    Cs(n, e3.preventSave ?? false);
  }, [n, e3.preventSave]), {
    userChoices: n,
    saveAudioInputEnabled: a2,
    saveVideoInputEnabled: s,
    saveAudioInputDeviceId: c,
    saveVideoInputDeviceId: o,
    saveUsername: u
  };
}
function Ht2(e3, n = {}) {
  const t = Ms(e3), a2 = Ns(n.room), s = r.useMemo(() => qo(a2, t), [a2, t]);
  return b(
    s,
    t instanceof LocalParticipant ? t.isE2EEEnabled : !!(t != null && t.isEncrypted)
  );
}
function jt2(e3, n = { fftSize: 32, smoothingTimeConstant: 0 }) {
  const t = F(e3) ? e3.publication.track : e3, [a2, s] = r.useState(0);
  return r.useEffect(() => {
    if (!t || !t.mediaStream)
      return;
    const { cleanup: c, analyser: o } = createAudioAnalyser(t, n), u = o.frequencyBinCount, i = new Uint8Array(u), d = setInterval(() => {
      o.getByteFrequencyData(i);
      let f = 0;
      for (let p = 0; p < i.length; p++) {
        const m = i[p];
        f += m * m;
      }
      s(Math.sqrt(f / i.length) / 255);
    }, 1e3 / 30);
    return () => {
      c(), clearInterval(d);
    };
  }, [t, t == null ? void 0 : t.mediaStream, JSON.stringify(n)]), a2;
}
var st2 = (e3) => {
  const n = (t) => {
    let c = 1 - Math.max(-100, Math.min(-10, t)) * -1 / 100;
    return c = Math.sqrt(c), c;
  };
  return e3.map((t) => t === -1 / 0 ? 0 : n(t));
};
var at2 = {
  bands: 5,
  loPass: 100,
  hiPass: 600,
  updateInterval: 32,
  analyserOptions: { fftSize: 2048 }
};
function Xt2(e3, n = {}) {
  var o;
  const t = e3 instanceof Track ? e3 : (o = e3 == null ? void 0 : e3.publication) == null ? void 0 : o.track, a2 = { ...at2, ...n }, [s, c] = r.useState(
    new Array(a2.bands).fill(0)
  );
  return r.useEffect(() => {
    if (!t || !(t != null && t.mediaStream))
      return;
    const { analyser: u, cleanup: i } = createAudioAnalyser(t, a2.analyserOptions), l = u.frequencyBinCount, d = new Float32Array(l), p = setInterval(() => {
      u.getFloatFrequencyData(d);
      let m = new Float32Array(d.length);
      for (let v = 0; v < d.length; v++)
        m[v] = d[v];
      m = m.slice(n.loPass, n.hiPass);
      const g = st2(m), S = Math.ceil(g.length / a2.bands), M = [];
      for (let v = 0; v < a2.bands; v++) {
        const P2 = g.slice(v * S, (v + 1) * S).reduce((h2, C) => h2 += C, 0);
        M.push(P2 / S);
      }
      c(M);
    }, a2.updateInterval);
    return () => {
      i(), clearInterval(p);
    };
  }, [t, t == null ? void 0 : t.mediaStream, JSON.stringify(n)]), s;
}
var rt2 = {
  barCount: 120,
  volMultiplier: 5,
  updateInterval: 20
};
function xt2(e3, n = {}) {
  var d;
  const t = e3 instanceof Track ? e3 : (d = e3 == null ? void 0 : e3.publication) == null ? void 0 : d.track, a2 = { ...rt2, ...n }, s = r.useRef(new Float32Array()), c = r.useRef(performance.now()), o = r.useRef(0), [u, i] = r.useState([]), l = r.useCallback((f) => {
    i(
      Array.from(
        ot(f, a2.barCount).map((p) => Math.sqrt(p) * a2.volMultiplier)
        // wave.slice(0, opts.barCount).map((v) => sigmoid(v * opts.volMultiplier, 0.08, 0.2)),
      )
    );
  }, []);
  return r.useEffect(() => {
    if (!t || !(t != null && t.mediaStream))
      return;
    const { analyser: f, cleanup: p } = createAudioAnalyser(t, {
      fftSize: U3(a2.barCount)
    }), m = U3(a2.barCount), g = new Float32Array(m), S = () => {
      if (M = requestAnimationFrame(S), f.getFloatTimeDomainData(g), s.current.map((v, P2) => v + g[P2]), o.current += 1, performance.now() - c.current >= a2.updateInterval) {
        const v = g.map((P2) => P2 / o.current);
        l(v), c.current = performance.now(), o.current = 0;
      }
    };
    let M = requestAnimationFrame(S);
    return () => {
      p(), cancelAnimationFrame(M);
    };
  }, [t, t == null ? void 0 : t.mediaStream, JSON.stringify(n), l]), {
    bars: u
  };
}
function U3(e3) {
  return e3 < 32 ? 32 : ct2(e3);
}
function ct2(e3) {
  let n = 2;
  for (; e3 >>= 1; )
    n <<= 1;
  return n;
}
function ot(e3, n) {
  const t = Math.floor(e3.length / n), a2 = new Float32Array(n);
  for (let s = 0; s < n; s++) {
    const c = t * s;
    let o = 0;
    for (let u = 0; u < t; u++)
      o = o + Math.abs(e3[c + u]);
    a2[s] = o / t;
  }
  return a2;
}
function it2(e3, n) {
  const t = Rs(), a2 = Eo(), s = n ? t.getParticipantByIdentity(n) : a2, c = r.useMemo(
    () => s ? Ss(s, { sources: e3 }) : void 0,
    [s == null ? void 0 : s.sid, s == null ? void 0 : s.identity, JSON.stringify(e3)]
  );
  return b(c, []);
}
function ut2(e3) {
  var t, a2, s;
  const n = r.useMemo(
    () => {
      var c;
      return (c = e3 == null ? void 0 : e3.publication) != null && c.track ? Es(e3 == null ? void 0 : e3.publication.track) : void 0;
    },
    [(t = e3 == null ? void 0 : e3.publication) == null ? void 0 : t.track]
  );
  return b(n, {
    timestamp: Date.now(),
    rtpTimestamp: (s = (a2 = e3 == null ? void 0 : e3.publication) == null ? void 0 : a2.track) == null ? void 0 : s.rtpTimestamp
  });
}
var lt2 = {
  bufferSize: 100
  // maxAge: 2_000,
};
function dt2(e3, n) {
  const t = { ...lt2, ...n }, [a2, s] = r.useState([]), c = ut2(e3), o = (u) => {
    var i;
    (i = t.onTranscription) == null || i.call(t, u), s(
      (l) => Wo(
        l,
        // when first receiving a segment, add the current media timestamp to it
        u.map((d) => jo(d, c)),
        t.bufferSize
      )
    );
  };
  return r.useEffect(() => {
    if (!(e3 != null && e3.publication))
      return;
    const u = xs(e3.publication).subscribe((i) => {
      o(...i);
    });
    return () => {
      u.unsubscribe();
    };
  }, [e3 && N(e3), o]), { segments: a2 };
}
function ft2(e3 = {}) {
  const n = Eo(), t = e3.participant ?? n, a2 = r.useMemo(
    // weird typescript constraint
    () => t ? is(t) : is(t),
    [t]
  );
  return b(a2, {
    attributes: t == null ? void 0 : t.attributes
  });
}
function Yt2(e3, n = {}) {
  const t = Ms(n.participant), [a2, s] = r.useState(t.attributes[e3]);
  return r.useEffect(() => {
    if (!t)
      return;
    const c = is(t).subscribe((o) => {
      o.changed[e3] !== void 0 && s(o.attributes[e3]);
    });
    return () => {
      c.unsubscribe();
    };
  }, [t, e3]), a2;
}
var q2 = "lk.agent.state";
function Kt2() {
  const e3 = G2().find((o) => o.kind === ParticipantInfo_Kind.AGENT), n = it2([Track.Source.Microphone], e3 == null ? void 0 : e3.identity)[0], { segments: t } = dt2(n), a2 = I(), { attributes: s } = ft2({ participant: e3 }), c = r.useMemo(() => a2 === ConnectionState.Disconnected ? "disconnected" : a2 === ConnectionState.Connecting || !e3 || !(s != null && s[q2]) ? "connecting" : s[q2], [s, e3, a2]);
  return {
    agent: e3,
    state: c,
    audioTrack: n,
    agentTranscriptions: t,
    agentAttributes: s
  };
}
function Zt2(e3) {
  const n = Ns(e3), t = I(n), a2 = r.useMemo(() => Xo(n), [n, t]);
  return b(a2, n.isRecording);
}

// node_modules/@livekit/components-react/dist/prefabs.mjs
var e2 = __toESM(require_react(), 1);

// node_modules/@livekit/components-react/dist/components-OLOni9K_.mjs
var e = __toESM(require_react(), 1);
var import_react = __toESM(require_react(), 1);
var na = e.forwardRef(
  function(a2, n) {
    const { buttonProps: r2 } = vt2(a2);
    return e.createElement("button", { ref: n, ...r2 }, a2.children);
  }
);
var ra = e.forwardRef(
  function({ room: a2, ...n }, r2) {
    const c = I(a2);
    return e.createElement("div", { ref: r2, ...n }, c);
  }
);
var ca = e.forwardRef(
  function(a2, n) {
    const { mergedProps: r2 } = Ut2({ props: a2 });
    return e.createElement("button", { ref: n, ...r2 }, a2.children);
  }
);
var la = e.forwardRef(
  function(a2, n) {
    const { buttonProps: r2 } = yt2(a2);
    return e.createElement("button", { ref: n, ...r2 }, a2.children);
  }
);
var Ke3 = (t) => e.createElement("svg", { xmlns: "http://www.w3.org/2000/svg", width: 16, height: 16, fill: "currentColor", ...t }, e.createElement("path", { d: "M1.354.646a.5.5 0 1 0-.708.708l14 14a.5.5 0 0 0 .708-.708L11 10.293V4.5A1.5 1.5 0 0 0 9.5 3H3.707zM0 4.5a1.5 1.5 0 0 1 .943-1.393l9.532 9.533c-.262.224-.603.36-.975.36h-8A1.5 1.5 0 0 1 0 11.5z" }), e.createElement("path", { d: "m15.2 3.6-2.8 2.1a1 1 0 0 0-.4.8v3a1 1 0 0 0 .4.8l2.8 2.1a.5.5 0 0 0 .8-.4V4a.5.5 0 0 0-.8-.4z" }));
var et3 = (t) => e.createElement("svg", { xmlns: "http://www.w3.org/2000/svg", width: 16, height: 16, fill: "currentColor", ...t }, e.createElement("path", { d: "M0 4.5A1.5 1.5 0 0 1 1.5 3h8A1.5 1.5 0 0 1 11 4.5v7A1.5 1.5 0 0 1 9.5 13h-8A1.5 1.5 0 0 1 0 11.5zM15.2 3.6l-2.8 2.1a1 1 0 0 0-.4.8v3a1 1 0 0 0 .4.8l2.8 2.1a.5.5 0 0 0 .8-.4V4a.5.5 0 0 0-.8-.4z" }));
var oa = (t) => e.createElement("svg", { xmlns: "http://www.w3.org/2000/svg", width: 16, height: 16, viewBox: "0 0 24 24", ...t }, e.createElement(
  "path",
  {
    fill: "#FFF",
    d: "M4.99 3.99a1 1 0 0 0-.697 1.717L10.586 12l-6.293 6.293a1 1 0 1 0 1.414 1.414L12 13.414l6.293 6.293a1 1 0 1 0 1.414-1.414L13.414 12l6.293-6.293a1 1 0 0 0-.727-1.717 1 1 0 0 0-.687.303L12 10.586 5.707 4.293a1 1 0 0 0-.717-.303z"
  }
));
var sa = (t) => e.createElement("svg", { xmlns: "http://www.w3.org/2000/svg", width: 16, height: 18, fill: "none", ...t }, e.createElement(
  "path",
  {
    fill: "currentColor",
    fillRule: "evenodd",
    d: "M0 2.75A2.75 2.75 0 0 1 2.75 0h10.5A2.75 2.75 0 0 1 16 2.75v13.594a.75.75 0 0 1-1.234.572l-3.691-3.12a1.25 1.25 0 0 0-.807-.296H2.75A2.75 2.75 0 0 1 0 10.75v-8ZM2.75 1.5c-.69 0-1.25.56-1.25 1.25v8c0 .69.56 1.25 1.25 1.25h7.518c.65 0 1.279.23 1.775.65l2.457 2.077V2.75c0-.69-.56-1.25-1.25-1.25H2.75Z",
    clipRule: "evenodd"
  }
), e.createElement(
  "path",
  {
    fill: "currentColor",
    fillRule: "evenodd",
    d: "M3 4.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5Zm0 2a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5Zm0 2a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5Z",
    clipRule: "evenodd"
  }
));
var D3 = (t) => e.createElement("svg", { xmlns: "http://www.w3.org/2000/svg", width: 16, height: 16, fill: "none", ...t }, e.createElement(
  "path",
  {
    fill: "currentcolor",
    fillRule: "evenodd",
    d: "M5.293 2.293a1 1 0 0 1 1.414 0l4.823 4.823a1.25 1.25 0 0 1 0 1.768l-4.823 4.823a1 1 0 0 1-1.414-1.414L9.586 8 5.293 3.707a1 1 0 0 1 0-1.414z",
    clipRule: "evenodd"
  }
));
var tt3 = (t) => e.createElement("svg", { xmlns: "http://www.w3.org/2000/svg", width: 16, height: 16, fill: "none", ...t }, e.createElement("g", { stroke: "currentColor", strokeLinecap: "round", strokeLinejoin: "round", strokeWidth: 1.5 }, e.createElement("path", { d: "M10 1.75h4.25m0 0V6m0-4.25L9 7M6 14.25H1.75m0 0V10m0 4.25L7 9" })));
var ia = (t) => e.createElement("svg", { xmlns: "http://www.w3.org/2000/svg", width: 16, height: 16, fill: "none", ...t }, e.createElement(
  "path",
  {
    fill: "currentcolor",
    fillRule: "evenodd",
    d: "M8.961.894C8.875-.298 7.125-.298 7.04.894c-.066.912-1.246 1.228-1.76.472-.67-.99-2.186-.115-1.664.96.399.824-.465 1.688-1.288 1.289-1.076-.522-1.95.994-.961 1.665.756.513.44 1.693-.472 1.759-1.192.086-1.192 1.836 0 1.922.912.066 1.228 1.246.472 1.76-.99.67-.115 2.186.96 1.664.824-.399 1.688.465 1.289 1.288-.522 1.076.994 1.95 1.665.961.513-.756 1.693-.44 1.759.472.086 1.192 1.836 1.192 1.922 0 .066-.912 1.246-1.228 1.76-.472.67.99 2.186.115 1.664-.96-.399-.824.465-1.688 1.288-1.289 1.076.522 1.95-.994.961-1.665-.756-.513-.44-1.693.472-1.759 1.192-.086 1.192-1.836 0-1.922-.912-.066-1.228-1.246-.472-1.76.99-.67.115-2.186-.96-1.664-.824.399-1.688-.465-1.289-1.288.522-1.076-.994-1.95-1.665-.961-.513.756-1.693.44-1.759-.472ZM8 13A5 5 0 1 0 8 3a5 5 0 0 0 0 10Z",
    clipRule: "evenodd"
  }
));
var ua = (t) => e.createElement("svg", { xmlns: "http://www.w3.org/2000/svg", width: 16, height: 16, fill: "none", ...t }, e.createElement(
  "path",
  {
    fill: "currentColor",
    fillRule: "evenodd",
    d: "M2 2.75A2.75 2.75 0 0 1 4.75 0h6.5A2.75 2.75 0 0 1 14 2.75v10.5A2.75 2.75 0 0 1 11.25 16h-6.5A2.75 2.75 0 0 1 2 13.25v-.5a.75.75 0 0 1 1.5 0v.5c0 .69.56 1.25 1.25 1.25h6.5c.69 0 1.25-.56 1.25-1.25V2.75c0-.69-.56-1.25-1.25-1.25h-6.5c-.69 0-1.25.56-1.25 1.25v.5a.75.75 0 0 1-1.5 0v-.5Z",
    clipRule: "evenodd"
  }
), e.createElement(
  "path",
  {
    fill: "currentColor",
    fillRule: "evenodd",
    d: "M8.78 7.47a.75.75 0 0 1 0 1.06l-2.25 2.25a.75.75 0 1 1-1.06-1.06l.97-.97H1.75a.75.75 0 0 1 0-1.5h4.69l-.97-.97a.75.75 0 0 1 1.06-1.06l2.25 2.25Z",
    clipRule: "evenodd"
  }
));
var at3 = (t) => e.createElement("svg", { xmlns: "http://www.w3.org/2000/svg", width: 16, height: 16, fill: "none", ...t }, e.createElement(
  "path",
  {
    fill: "currentcolor",
    fillRule: "evenodd",
    d: "M4 6.104V4a4 4 0 1 1 8 0v2.104c1.154.326 2 1.387 2 2.646v4.5A2.75 2.75 0 0 1 11.25 16h-6.5A2.75 2.75 0 0 1 2 13.25v-4.5c0-1.259.846-2.32 2-2.646ZM5.5 4a2.5 2.5 0 0 1 5 0v2h-5V4Z",
    clipRule: "evenodd"
  }
));
var nt3 = (t) => e.createElement("svg", { xmlns: "http://www.w3.org/2000/svg", width: 16, height: 16, fill: "currentColor", ...t }, e.createElement("path", { d: "M12.227 11.52a5.477 5.477 0 0 0 1.246-2.97.5.5 0 0 0-.995-.1 4.478 4.478 0 0 1-.962 2.359l-1.07-1.07C10.794 9.247 11 8.647 11 8V3a3 3 0 0 0-6 0v1.293L1.354.646a.5.5 0 1 0-.708.708l14 14a.5.5 0 0 0 .708-.708zM8 12.5c.683 0 1.33-.152 1.911-.425l.743.743c-.649.359-1.378.59-2.154.66V15h2a.5.5 0 0 1 0 1h-5a.5.5 0 0 1 0-1h2v-1.522a5.502 5.502 0 0 1-4.973-4.929.5.5 0 0 1 .995-.098A4.5 4.5 0 0 0 8 12.5z" }), e.createElement("path", { d: "M8.743 10.907 5 7.164V8a3 3 0 0 0 3.743 2.907z" }));
var rt3 = (t) => e.createElement("svg", { xmlns: "http://www.w3.org/2000/svg", width: 16, height: 16, fill: "currentColor", ...t }, e.createElement(
  "path",
  {
    fillRule: "evenodd",
    d: "M2.975 8.002a.5.5 0 0 1 .547.449 4.5 4.5 0 0 0 8.956 0 .5.5 0 1 1 .995.098A5.502 5.502 0 0 1 8.5 13.478V15h2a.5.5 0 0 1 0 1h-5a.5.5 0 0 1 0-1h2v-1.522a5.502 5.502 0 0 1-4.973-4.929.5.5 0 0 1 .448-.547z",
    clipRule: "evenodd"
  }
), e.createElement("path", { d: "M5 3a3 3 0 1 1 6 0v5a3 3 0 0 1-6 0z" }));
var ct3 = (t) => e.createElement("svg", { xmlns: "http://www.w3.org/2000/svg", width: 16, height: 16, fill: "currentcolor", ...t }, e.createElement("path", { d: "M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z" }), e.createElement("path", { d: "M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z" }));
var lt3 = (t) => e.createElement("svg", { xmlns: "http://www.w3.org/2000/svg", width: 16, height: 16, fill: "currentcolor", ...t }, e.createElement("path", { d: "M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z" }), e.createElement("path", { d: "M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z" }), e.createElement("g", { opacity: 0.25 }, e.createElement("path", { d: "M12 .5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z" }), e.createElement("path", { d: "M12 .5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z" })));
var ot2 = (t) => e.createElement("svg", { xmlns: "http://www.w3.org/2000/svg", width: 16, height: 16, fill: "currentcolor", ...t }, e.createElement("path", { d: "M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z" }), e.createElement("path", { d: "M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z" }), e.createElement("g", { opacity: 0.25 }, e.createElement("path", { d: "M6 6.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z" }), e.createElement("path", { d: "M6 6.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z" }), e.createElement("path", { d: "M12 .5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z" })));
var st3 = (t) => e.createElement("svg", { xmlns: "http://www.w3.org/2000/svg", width: 16, height: 16, fill: "currentColor", ...t }, e.createElement("g", { opacity: 0.25 }, e.createElement("path", { d: "M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-4Zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-9Zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5V.5Z" }), e.createElement("path", { d: "M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-4Zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-9Zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5V.5Z" })));
var se2 = (t) => e.createElement("svg", { xmlns: "http://www.w3.org/2000/svg", width: 20, height: 16, fill: "none", ...t }, e.createElement(
  "path",
  {
    fill: "currentColor",
    fillRule: "evenodd",
    d: "M0 2.75A2.75 2.75 0 0 1 2.75 0h14.5A2.75 2.75 0 0 1 20 2.75v10.5A2.75 2.75 0 0 1 17.25 16H2.75A2.75 2.75 0 0 1 0 13.25V2.75ZM2.75 1.5c-.69 0-1.25.56-1.25 1.25v10.5c0 .69.56 1.25 1.25 1.25h14.5c.69 0 1.25-.56 1.25-1.25V2.75c0-.69-.56-1.25-1.25-1.25H2.75Z",
    clipRule: "evenodd"
  }
), e.createElement(
  "path",
  {
    fill: "currentColor",
    fillRule: "evenodd",
    d: "M9.47 4.22a.75.75 0 0 1 1.06 0l2.25 2.25a.75.75 0 0 1-1.06 1.06l-.97-.97v4.69a.75.75 0 0 1-1.5 0V6.56l-.97.97a.75.75 0 0 1-1.06-1.06l2.25-2.25Z",
    clipRule: "evenodd"
  }
));
var it3 = (t) => e.createElement("svg", { xmlns: "http://www.w3.org/2000/svg", width: 20, height: 16, fill: "none", ...t }, e.createElement("g", { fill: "currentColor" }, e.createElement("path", { d: "M7.28 4.22a.75.75 0 0 0-1.06 1.06L8.94 8l-2.72 2.72a.75.75 0 1 0 1.06 1.06L10 9.06l2.72 2.72a.75.75 0 1 0 1.06-1.06L11.06 8l2.72-2.72a.75.75 0 0 0-1.06-1.06L10 6.94z" }), e.createElement(
  "path",
  {
    fillRule: "evenodd",
    d: "M2.75 0A2.75 2.75 0 0 0 0 2.75v10.5A2.75 2.75 0 0 0 2.75 16h14.5A2.75 2.75 0 0 0 20 13.25V2.75A2.75 2.75 0 0 0 17.25 0zM1.5 2.75c0-.69.56-1.25 1.25-1.25h14.5c.69 0 1.25.56 1.25 1.25v10.5c0 .69-.56 1.25-1.25 1.25H2.75c-.69 0-1.25-.56-1.25-1.25z",
    clipRule: "evenodd"
  }
)));
var U4 = (t) => e.createElement("svg", { xmlns: "http://www.w3.org/2000/svg", width: 16, height: 16, fill: "none", ...t }, e.createElement(
  "path",
  {
    fill: "currentColor",
    fillRule: "evenodd",
    d: "M8 0a.75.75 0 0 1 .75.75v2.5a.75.75 0 0 1-1.5 0V.75A.75.75 0 0 1 8 0Z",
    clipRule: "evenodd"
  }
), e.createElement(
  "path",
  {
    fill: "currentColor",
    fillRule: "evenodd",
    d: "M8 12a.75.75 0 0 1 .75.75v2.5a.75.75 0 0 1-1.5 0v-2.5A.75.75 0 0 1 8 12Z",
    clipRule: "evenodd",
    opacity: 0.7
  }
), e.createElement(
  "path",
  {
    fill: "currentColor",
    fillRule: "evenodd",
    d: "M12 1.072a.75.75 0 0 1 .274 1.024l-1.25 2.165a.75.75 0 0 1-1.299-.75l1.25-2.165A.75.75 0 0 1 12 1.072Z",
    clipRule: "evenodd"
  }
), e.createElement(
  "path",
  {
    fill: "currentColor",
    fillRule: "evenodd",
    d: "M6 11.464a.75.75 0 0 1 .274 1.025l-1.25 2.165a.75.75 0 0 1-1.299-.75l1.25-2.165A.75.75 0 0 1 6 11.464Z",
    clipRule: "evenodd",
    opacity: 0.6
  }
), e.createElement(
  "path",
  {
    fill: "currentColor",
    fillRule: "evenodd",
    d: "M14.928 4a.75.75 0 0 1-.274 1.025l-2.165 1.25a.75.75 0 1 1-.75-1.3l2.165-1.25A.75.75 0 0 1 14.928 4Z",
    clipRule: "evenodd"
  }
), e.createElement(
  "path",
  {
    fill: "currentColor",
    fillRule: "evenodd",
    d: "M4.536 10a.75.75 0 0 1-.275 1.024l-2.165 1.25a.75.75 0 0 1-.75-1.298l2.165-1.25A.75.75 0 0 1 4.536 10Z",
    clipRule: "evenodd",
    opacity: 0.5
  }
), e.createElement(
  "path",
  {
    fill: "currentColor",
    fillRule: "evenodd",
    d: "M16 8a.75.75 0 0 1-.75.75h-2.5a.75.75 0 0 1 0-1.5h2.5A.75.75 0 0 1 16 8Z",
    clipRule: "evenodd"
  }
), e.createElement(
  "path",
  {
    fill: "currentColor",
    fillRule: "evenodd",
    d: "M4 8a.75.75 0 0 1-.75.75H.75a.75.75 0 0 1 0-1.5h2.5A.75.75 0 0 1 4 8Z",
    clipRule: "evenodd",
    opacity: 0.4
  }
), e.createElement(
  "path",
  {
    fill: "currentColor",
    fillRule: "evenodd",
    d: "M14.928 12a.75.75 0 0 1-1.024.274l-2.165-1.25a.75.75 0 0 1 .75-1.299l2.165 1.25A.75.75 0 0 1 14.928 12Z",
    clipRule: "evenodd",
    opacity: 0.9
  }
), e.createElement(
  "path",
  {
    fill: "currentColor",
    fillRule: "evenodd",
    d: "M4.536 6a.75.75 0 0 1-1.025.275l-2.165-1.25a.75.75 0 1 1 .75-1.3l2.165 1.25A.75.75 0 0 1 4.536 6Z",
    clipRule: "evenodd",
    opacity: 0.3
  }
), e.createElement(
  "path",
  {
    fill: "currentColor",
    fillRule: "evenodd",
    d: "M12 14.928a.75.75 0 0 1-1.024-.274l-1.25-2.165a.75.75 0 0 1 1.298-.75l1.25 2.165A.75.75 0 0 1 12 14.928Z",
    clipRule: "evenodd",
    opacity: 0.8
  }
), e.createElement(
  "path",
  {
    fill: "currentColor",
    fillRule: "evenodd",
    d: "M6 4.536a.75.75 0 0 1-1.024-.275l-1.25-2.165a.75.75 0 1 1 1.299-.75l1.25 2.165A.75.75 0 0 1 6 4.536Z",
    clipRule: "evenodd",
    opacity: 0.2
  }
));
var ut3 = (t) => e.createElement("svg", { xmlns: "http://www.w3.org/2000/svg", width: 16, height: 16, fill: "none", ...t }, e.createElement("g", { stroke: "currentColor", strokeLinecap: "round", strokeLinejoin: "round", strokeWidth: 1.5 }, e.createElement("path", { d: "M13.25 7H9m0 0V2.75M9 7l5.25-5.25M2.75 9H7m0 0v4.25M7 9l-5.25 5.25" })));
var dt3 = e.forwardRef(
  function({ trackRef: a2, ...n }, r2) {
    const c = Rn(), { mergedProps: s, inFocus: i } = Pt2({
      trackRef: a2 ?? c,
      props: n
    });
    return e.createElement(Dn.Consumer, null, (l) => l !== void 0 && e.createElement("button", { ref: r2, ...s }, n.children ? n.children : i ? e.createElement(ut3, null) : e.createElement(tt3, null)));
  }
);
function mt(t) {
  return t !== void 0;
}
function R2(...t) {
  return U2(...t.filter(mt));
}
function $2(t, a2, n) {
  return e.Children.map(t, (r2) => e.isValidElement(r2) && e.Children.only(t) ? (r2.props.class && (a2 ?? (a2 = {}), a2.class = j2(r2.props.class, a2.class), a2.style = { ...r2.props.style, ...a2.style }), e.cloneElement(r2, { ...a2, key: n })) : r2);
}
function da(t) {
  var a2, n;
  if (typeof window < "u" && typeof process < "u" && // eslint-disable-next-line turbo/no-undeclared-env-vars
  (((a2 = process == null ? void 0 : process.env) == null ? void 0 : a2.NODE_ENV) === "dev" || // eslint-disable-next-line turbo/no-undeclared-env-vars
  ((n = process == null ? void 0 : process.env) == null ? void 0 : n.NODE_ENV) === "development")) {
    const r2 = document.querySelector(".lk-room-container");
    r2 && !getComputedStyle(r2).getPropertyValue("--lk-has-imported-styles") && _.warn(
      "It looks like you're not using the `@livekit/components-styles package`. To render the UI with the default styling, please import it in your layout or page."
    );
  }
}
var ma = e.forwardRef(
  function({
    kind: a2,
    initialSelection: n,
    onActiveDeviceChange: r2,
    onDeviceListChange: c,
    onDeviceSelectError: s,
    exactMatch: i,
    track: l,
    requestPermissions: o,
    onError: u,
    ...d
  }, f) {
    const m = To(), p = e.useCallback(
      (w) => {
        m && m.emit(RoomEvent.MediaDevicesError, w), u == null || u(w);
      },
      [m, u]
    ), { devices: E, activeDeviceId: h2, setActiveMediaDevice: g, className: k2 } = Tt2({
      kind: a2,
      room: m,
      track: l,
      requestPermissions: o,
      onError: p
    });
    e.useEffect(() => {
      n !== void 0 && g(n);
    }, [g]), e.useEffect(() => {
      typeof c == "function" && c(E);
    }, [c, E]), e.useEffect(() => {
      h2 && h2 !== "" && (r2 == null || r2(h2));
    }, [h2]);
    const C = async (w) => {
      try {
        await g(w, { exact: i });
      } catch (v) {
        if (v instanceof Error)
          s == null || s(v);
        else
          throw v;
      }
    }, b2 = e.useMemo(
      () => R2(d, { className: k2 }, { className: "lk-list" }),
      [k2, d]
    );
    function S(w, v, M) {
      return w === v || M === 0 && v === "default";
    }
    return e.createElement("ul", { ref: f, ...b2 }, E.map((w, v) => e.createElement(
      "li",
      {
        key: w.deviceId,
        id: w.deviceId,
        "data-lk-active": S(w.deviceId, h2, v),
        "aria-selected": S(w.deviceId, h2, v),
        role: "option"
      },
      e.createElement("button", { className: "lk-button", onClick: () => C(w.deviceId) }, w.label)
    )));
  }
);
var fa = e.forwardRef(
  function({ label: a2 = "Allow Audio", ...n }, r2) {
    const c = Rs(), { mergedProps: s } = Vt2({ room: c, props: n });
    return e.createElement("button", { ref: r2, ...s }, a2);
  }
);
var ha = e.forwardRef(
  function({ label: a2, ...n }, r2) {
    const c = Rs(), { mergedProps: s, canPlayAudio: i } = Vt2({ room: c, props: n }), { mergedProps: l, canPlayVideo: o } = Bt2({ room: c, props: s }), { style: u, ...d } = l;
    return u.display = i && o ? "none" : "block", e.createElement("button", { ref: r2, style: u, ...d }, a2 ?? `Start ${i ? "Video" : "Audio"}`);
  }
);
function ie(t, a2) {
  switch (t) {
    case Track.Source.Microphone:
      return a2 ? e.createElement(rt3, null) : e.createElement(nt3, null);
    case Track.Source.Camera:
      return a2 ? e.createElement(et3, null) : e.createElement(Ke3, null);
    case Track.Source.ScreenShare:
      return a2 ? e.createElement(it3, null) : e.createElement(se2, null);
    default:
      return;
  }
}
function ft3(t) {
  switch (t) {
    case ConnectionQuality.Excellent:
      return e.createElement(ct3, null);
    case ConnectionQuality.Good:
      return e.createElement(lt3, null);
    case ConnectionQuality.Poor:
      return e.createElement(ot2, null);
    default:
      return e.createElement(st3, null);
  }
}
var ga = e.forwardRef(function({ showIcon: a2, ...n }, r2) {
  const { buttonProps: c, enabled: s } = _t2(n);
  return e.createElement("button", { ref: r2, ...c }, (a2 ?? true) && ie(n.source, s), n.children);
});
var ue2 = e.forwardRef(function(a2, n) {
  const { className: r2, quality: c } = ht2(a2), s = e.useMemo(() => ({ ...R2(a2, { className: r2 }), "data-lk-quality": c }), [c, a2, r2]);
  return e.createElement("div", { ref: n, ...s }, a2.children ?? ft3(c));
});
var B2 = e.forwardRef(
  function({ participant: a2, ...n }, r2) {
    const c = Ms(a2), { className: s, infoObserver: i } = e.useMemo(() => fs(c), [c]), { identity: l, name: o } = b(i, {
      name: c.name,
      identity: c.identity,
      metadata: c.metadata
    }), u = e.useMemo(() => R2(n, { className: s, "data-lk-participant-name": o }), [n, s, o]);
    return e.createElement("span", { ref: r2, ...u }, o !== "" ? o : l, n.children);
  }
);
var de2 = e.forwardRef(
  function({ trackRef: a2, show: n = "always", ...r2 }, c) {
    const { className: s, isMuted: i } = Jt2(a2), l = n === "always" || n === "muted" && i || n === "unmuted" && !i, o = e.useMemo(
      () => R2(r2, {
        className: s
      }),
      [s, r2]
    );
    return l ? e.createElement("div", { ref: c, ...o, "data-lk-muted": i }, r2.children ?? ie(a2.source, !i)) : null;
  }
);
var ht3 = (t) => e.createElement(
  "svg",
  {
    width: 320,
    height: 320,
    viewBox: "0 0 320 320",
    preserveAspectRatio: "xMidYMid meet",
    fill: "none",
    xmlns: "http://www.w3.org/2000/svg",
    ...t
  },
  e.createElement(
    "path",
    {
      d: "M160 180C204.182 180 240 144.183 240 100C240 55.8172 204.182 20 160 20C115.817 20 79.9997 55.8172 79.9997 100C79.9997 144.183 115.817 180 160 180Z",
      fill: "white",
      fillOpacity: 0.25
    }
  ),
  e.createElement(
    "path",
    {
      d: "M97.6542 194.614C103.267 191.818 109.841 192.481 115.519 195.141C129.025 201.466 144.1 205 159.999 205C175.899 205 190.973 201.466 204.48 195.141C210.158 192.481 216.732 191.818 222.345 194.614C262.703 214.719 291.985 253.736 298.591 300.062C300.15 310.997 291.045 320 280 320H39.9997C28.954 320 19.8495 310.997 21.4087 300.062C28.014 253.736 57.2966 214.72 97.6542 194.614Z",
      fill: "white",
      fillOpacity: 0.25
    }
  )
);
function me2(t, a2 = {}) {
  const [n, r2] = e.useState(Rt(t)), [c, s] = e.useState(n == null ? void 0 : n.isMuted), [i, l] = e.useState(n == null ? void 0 : n.isSubscribed), [o, u] = e.useState(n == null ? void 0 : n.track), [d, f] = e.useState("landscape"), m = e.useRef(), { className: p, trackObserver: E } = e.useMemo(() => Yo(t), [
    t.participant.sid ?? t.participant.identity,
    t.source,
    F(t) && t.publication.trackSid
  ]);
  return e.useEffect(() => {
    const h2 = E.subscribe((g) => {
      _.debug("update track", g), r2(g), s(g == null ? void 0 : g.isMuted), l(g == null ? void 0 : g.isSubscribed), u(g == null ? void 0 : g.track);
    });
    return () => h2 == null ? void 0 : h2.unsubscribe();
  }, [E]), e.useEffect(() => {
    var h2, g;
    return o && (m.current && o.detach(m.current), (h2 = a2.element) != null && h2.current && !(Oo(t.participant) && (o == null ? void 0 : o.kind) === "audio") && o.attach(a2.element.current)), m.current = (g = a2.element) == null ? void 0 : g.current, () => {
      m.current && (o == null || o.detach(m.current));
    };
  }, [o, a2.element]), e.useEffect(() => {
    var h2, g;
    if (typeof ((h2 = n == null ? void 0 : n.dimensions) == null ? void 0 : h2.width) == "number" && typeof ((g = n == null ? void 0 : n.dimensions) == null ? void 0 : g.height) == "number") {
      const k2 = n.dimensions.width > n.dimensions.height ? "landscape" : "portrait";
      f(k2);
    }
  }, [n]), {
    publication: n,
    isMuted: c,
    isSubscribed: i,
    track: o,
    elementProps: R2(a2.props, {
      className: p,
      "data-lk-local-participant": t.participant.isLocal,
      "data-lk-source": n == null ? void 0 : n.source,
      ...(n == null ? void 0 : n.kind) === "video" && { "data-lk-orientation": d }
    })
  };
}
var gt2 = "Expected a function";
var G3 = NaN;
var vt3 = "[object Symbol]";
var pt2 = /^\s+|\s+$/g;
var Et3 = /^[-+]0x[0-9a-f]+$/i;
var wt3 = /^0b[01]+$/i;
var kt3 = /^0o[0-7]+$/i;
var yt3 = parseInt;
var Mt3 = typeof Sr == "object" && Sr && Sr.Object === Object && Sr;
var Rt3 = typeof self == "object" && self && self.Object === Object && self;
var bt2 = Mt3 || Rt3 || Function("return this")();
var St3 = Object.prototype;
var Ct3 = St3.toString;
var It3 = Math.max;
var Pt3 = Math.min;
var Z = function() {
  return bt2.Date.now();
};
function Tt3(t, a2, n) {
  var r2, c, s, i, l, o, u = 0, d = false, f = false, m = true;
  if (typeof t != "function")
    throw new TypeError(gt2);
  a2 = Q2(a2) || 0, j3(n) && (d = !!n.leading, f = "maxWait" in n, s = f ? It3(Q2(n.maxWait) || 0, a2) : s, m = "trailing" in n ? !!n.trailing : m);
  function p(v) {
    var M = r2, x = c;
    return r2 = c = void 0, u = v, i = t.apply(x, M), i;
  }
  function E(v) {
    return u = v, l = setTimeout(k2, a2), d ? p(v) : i;
  }
  function h2(v) {
    var M = v - o, x = v - u, W3 = a2 - M;
    return f ? Pt3(W3, s - x) : W3;
  }
  function g(v) {
    var M = v - o, x = v - u;
    return o === void 0 || M >= a2 || M < 0 || f && x >= s;
  }
  function k2() {
    var v = Z();
    if (g(v))
      return C(v);
    l = setTimeout(k2, h2(v));
  }
  function C(v) {
    return l = void 0, m && r2 ? p(v) : (r2 = c = void 0, i);
  }
  function b2() {
    l !== void 0 && clearTimeout(l), u = 0, r2 = o = c = l = void 0;
  }
  function S() {
    return l === void 0 ? i : C(Z());
  }
  function w() {
    var v = Z(), M = g(v);
    if (r2 = arguments, c = this, o = v, M) {
      if (l === void 0)
        return E(o);
      if (f)
        return l = setTimeout(k2, a2), p(o);
    }
    return l === void 0 && (l = setTimeout(k2, a2)), i;
  }
  return w.cancel = b2, w.flush = S, w;
}
function j3(t) {
  var a2 = typeof t;
  return !!t && (a2 == "object" || a2 == "function");
}
function xt3(t) {
  return !!t && typeof t == "object";
}
function At3(t) {
  return typeof t == "symbol" || xt3(t) && Ct3.call(t) == vt3;
}
function Q2(t) {
  if (typeof t == "number")
    return t;
  if (At3(t))
    return G3;
  if (j3(t)) {
    var a2 = typeof t.valueOf == "function" ? t.valueOf() : t;
    t = j3(a2) ? a2 + "" : a2;
  }
  if (typeof t != "string")
    return t === 0 ? t : +t;
  t = t.replace(pt2, "");
  var n = wt3.test(t);
  return n || kt3.test(t) ? yt3(t.slice(2), n ? 2 : 8) : Et3.test(t) ? G3 : +t;
}
var Nt3 = Tt3;
var X = xr(Nt3);
function Lt3(t) {
  const a2 = (0, import_react.useRef)(t);
  a2.current = t, (0, import_react.useEffect)(
    () => () => {
      a2.current();
    },
    []
  );
}
function Vt3(t, a2 = 500, n) {
  const r2 = (0, import_react.useRef)();
  Lt3(() => {
    r2.current && r2.current.cancel();
  });
  const c = (0, import_react.useMemo)(() => {
    const s = X(t, a2, n), i = (...l) => s(...l);
    return i.cancel = () => {
      s.cancel();
    }, i.isPending = () => !!r2.current, i.flush = () => s.flush(), i;
  }, [t, a2, n]);
  return (0, import_react.useEffect)(() => {
    r2.current = X(t, a2, n);
  }, [t, a2, n]), c;
}
function zt3(t, a2, n) {
  const r2 = (u, d) => u === d, c = t instanceof Function ? t() : t, [s, i] = (0, import_react.useState)(c), l = (0, import_react.useRef)(c), o = Vt3(
    i,
    a2,
    n
  );
  return r2(l.current, c) || (o(c), l.current = c), [s, o];
}
function Ft2({
  threshold: t = 0,
  root: a2 = null,
  rootMargin: n = "0%",
  freezeOnceVisible: r2 = false,
  initialIsIntersecting: c = false,
  onChange: s
} = {}) {
  var i;
  const [l, o] = (0, import_react.useState)(null), [u, d] = (0, import_react.useState)(() => ({
    isIntersecting: c,
    entry: void 0
  })), f = (0, import_react.useRef)();
  f.current = s;
  const m = ((i = u.entry) == null ? void 0 : i.isIntersecting) && r2;
  (0, import_react.useEffect)(() => {
    if (!l || !("IntersectionObserver" in window) || m)
      return;
    let h2;
    const g = new IntersectionObserver(
      (k2) => {
        const C = Array.isArray(g.thresholds) ? g.thresholds : [g.thresholds];
        k2.forEach((b2) => {
          const S = b2.isIntersecting && C.some((w) => b2.intersectionRatio >= w);
          d({ isIntersecting: S, entry: b2 }), f.current && f.current(S, b2), S && r2 && h2 && (h2(), h2 = void 0);
        });
      },
      { threshold: t, root: a2, rootMargin: n }
    );
    return g.observe(l), () => {
      g.disconnect();
    };
  }, [
    l,
    // eslint-disable-next-line react-hooks/exhaustive-deps
    JSON.stringify(t),
    a2,
    n,
    m,
    r2
  ]);
  const p = (0, import_react.useRef)(null);
  (0, import_react.useEffect)(() => {
    var h2;
    !l && ((h2 = u.entry) != null && h2.target) && !r2 && !m && p.current !== u.entry.target && (p.current = u.entry.target, d({ isIntersecting: c, entry: void 0 }));
  }, [l, u.entry, r2, m, c]);
  const E = [
    o,
    !!u.isIntersecting,
    u.entry
  ];
  return E.ref = E[0], E.isIntersecting = E[1], E.entry = E[2], E;
}
var Zt3 = e.forwardRef(
  function({
    onTrackClick: a2,
    onClick: n,
    onSubscriptionStatusChanged: r2,
    trackRef: c,
    manageSubscription: s,
    ...i
  }, l) {
    const o = Is(c), u = e.useRef(null);
    e.useImperativeHandle(l, () => u.current);
    const d = Ft2({ root: u.current }), [f] = zt3(d, 3e3);
    e.useEffect(() => {
      s && o.publication instanceof RemoteTrackPublication && (f == null ? void 0 : f.isIntersecting) === false && (d == null ? void 0 : d.isIntersecting) === false && o.publication.setSubscribed(false);
    }, [f, o, s]), e.useEffect(() => {
      s && o.publication instanceof RemoteTrackPublication && (d == null ? void 0 : d.isIntersecting) === true && o.publication.setSubscribed(true);
    }, [d, o, s]);
    const {
      elementProps: m,
      publication: p,
      isSubscribed: E
    } = me2(o, {
      element: u,
      props: i
    });
    e.useEffect(() => {
      r2 == null || r2(!!E);
    }, [E, r2]);
    const h2 = (g) => {
      n == null || n(g), a2 == null || a2({ participant: o == null ? void 0 : o.participant, track: p });
    };
    return e.createElement("video", { ref: u, ...m, muted: true, onClick: h2 });
  }
);
var q3 = e.forwardRef(
  function({ trackRef: a2, onSubscriptionStatusChanged: n, volume: r2, muted: c, ...s }, i) {
    const l = Is(a2), o = e.useRef(null);
    e.useImperativeHandle(i, () => o.current);
    const {
      elementProps: u,
      isSubscribed: d,
      track: f,
      publication: m
    } = me2(l, {
      element: o,
      props: s
    });
    return e.useEffect(() => {
      n == null || n(!!d);
    }, [d, n]), e.useEffect(() => {
      f === void 0 || r2 === void 0 || (f instanceof RemoteAudioTrack ? f.setVolume(r2) : _.warn("Volume can only be set on remote audio tracks."));
    }, [r2, f]), e.useEffect(() => {
      m === void 0 || c === void 0 || (m instanceof RemoteTrackPublication ? m.setEnabled(!c) : _.warn("Can only call setEnabled on remote track publications."));
    }, [c, m, f]), e.createElement("audio", { ref: o, ...u });
  }
);
function Ht3(t) {
  const a2 = !!Eo();
  return t.participant && !a2 ? e.createElement(Nn.Provider, { value: t.participant }, t.children) : e.createElement(e.Fragment, null, t.children);
}
function Bt3(t) {
  const a2 = !!Rn();
  return t.trackRef && !a2 ? e.createElement(Mn.Provider, { value: t.trackRef }, t.children) : e.createElement(e.Fragment, null, t.children);
}
var jt3 = e.forwardRef(
  function({
    trackRef: a2,
    children: n,
    onParticipantClick: r2,
    disableSpeakingIndicator: c,
    ...s
  }, i) {
    var p, E;
    const l = Is(a2), { elementProps: o } = It2({
      htmlProps: s,
      disableSpeakingIndicator: c,
      onParticipantClick: r2,
      trackRef: l
    }), u = Ht2(l.participant), d = xo(), f = (p = $s()) == null ? void 0 : p.autoSubscription, m = e.useCallback(
      (h2) => {
        l.source && !h2 && d && d.pin.dispatch && ko(l, d.pin.state) && d.pin.dispatch({ msg: "clear_pin" });
      },
      [l, d]
    );
    return e.createElement("div", { ref: i, style: { position: "relative" }, ...o }, e.createElement(Bt3, { trackRef: l }, e.createElement(Ht3, { participant: l.participant }, n ?? e.createElement(e.Fragment, null, F(l) && (((E = l.publication) == null ? void 0 : E.kind) === "video" || l.source === Track.Source.Camera || l.source === Track.Source.ScreenShare) ? e.createElement(
      Zt3,
      {
        trackRef: l,
        onSubscriptionStatusChanged: m,
        manageSubscription: f
      }
    ) : F(l) && e.createElement(
      q3,
      {
        trackRef: l,
        onSubscriptionStatusChanged: m
      }
    ), e.createElement("div", { className: "lk-participant-placeholder" }, e.createElement(ht3, null)), e.createElement("div", { className: "lk-participant-metadata" }, e.createElement("div", { className: "lk-participant-metadata-item" }, l.source === Track.Source.Camera ? e.createElement(e.Fragment, null, u && e.createElement(at3, { style: { marginRight: "0.25rem" } }), e.createElement(
      de2,
      {
        trackRef: {
          participant: l.participant,
          source: Track.Source.Microphone
        },
        show: "muted"
      }
    ), e.createElement(B2, null)) : e.createElement(e.Fragment, null, e.createElement(se2, { style: { marginRight: "0.25rem" } }), e.createElement(B2, null, "'s screen"))), e.createElement(ue2, { className: "lk-participant-metadata-item" }))), e.createElement(dt3, { trackRef: l }))));
  }
);
function va(t) {
  const a2 = R2(t, { className: "lk-focus-layout" });
  return e.createElement("div", { ...a2 }, t.children);
}
function pa({ trackRef: t, ...a2 }) {
  return e.createElement(jt3, { trackRef: t, ...a2 });
}
function fe2({ tracks: t, ...a2 }) {
  return e.createElement(e.Fragment, null, t.map((n) => e.createElement(
    Mn.Provider,
    {
      value: n,
      key: N(n)
    },
    $2(a2.children)
  )));
}
function Ot3({
  totalPageCount: t,
  nextPage: a2,
  prevPage: n,
  currentPage: r2,
  pagesContainer: c
}) {
  const [s, i] = e.useState(false);
  return e.useEffect(() => {
    let l;
    return c && (l = Ts(c.current, 2e3).subscribe(
      i
    )), () => {
      l && l.unsubscribe();
    };
  }, [c]), e.createElement("div", { className: "lk-pagination-control", "data-lk-user-interaction": s }, e.createElement("button", { className: "lk-button", onClick: n }, e.createElement(D3, null)), e.createElement("span", { className: "lk-pagination-count" }, `${r2} of ${t}`), e.createElement("button", { className: "lk-button", onClick: a2 }, e.createElement(D3, null)));
}
var _t3 = e.forwardRef(
  function({ totalPageCount: a2, currentPage: n }, r2) {
    const c = new Array(a2).fill("").map((s, i) => i + 1 === n ? e.createElement("span", { "data-lk-active": true, key: i }) : e.createElement("span", { key: i }));
    return e.createElement("div", { ref: r2, className: "lk-pagination-indicator" }, c);
  }
);
function Ea({ tracks: t, ...a2 }) {
  const n = e.createRef(), r2 = e.useMemo(
    () => R2(a2, { className: "lk-grid-layout" }),
    [a2]
  ), { layout: c } = kt2(n, t.length), s = At2(c.maxTiles, t);
  return zt2(n, {
    onLeftSwipe: s.nextPage,
    onRightSwipe: s.prevPage
  }), e.createElement("div", { ref: n, "data-lk-pagination": s.totalPageCount > 1, ...r2 }, e.createElement(fe2, { tracks: s.tracks }, a2.children), t.length > c.maxTiles && e.createElement(e.Fragment, null, e.createElement(
    _t3,
    {
      totalPageCount: s.totalPageCount,
      currentPage: s.currentPage
    }
  ), e.createElement(Ot3, { pagesContainer: n, ...s })));
}
var $t3 = 130;
var qt3 = 140;
var Y2 = 1;
var he2 = 16 / 10;
var Wt3 = (1 - he2) * -1;
function wa({ tracks: t, orientation: a2, ...n }) {
  const r2 = e.useRef(null), [c, s] = e.useState(0), { width: i, height: l } = je2(r2), o = a2 || (l >= i ? "vertical" : "horizontal"), u = o === "vertical" ? Math.max(i * Wt3, $t3) : Math.max(l * he2, qt3), d = Lo(), f = Math.max(o === "vertical" ? (l - d) / u : (i - d) / u, Y2);
  let m = Math.round(f);
  Math.abs(f - c) < 0.5 ? m = Math.round(c) : c !== f && s(f);
  const p = Ke2(t, m);
  return e.useLayoutEffect(() => {
    r2.current && (r2.current.dataset.lkOrientation = o, r2.current.style.setProperty("--lk-max-visible-tiles", m.toString()));
  }, [m, o]), e.createElement("aside", { key: o, className: "lk-carousel", ref: r2, ...n }, e.createElement(fe2, { tracks: p }, n.children));
}
function ka({
  value: t,
  onPinChange: a2,
  onWidgetChange: n,
  children: r2
}) {
  const c = Ls(t);
  return e.useEffect(() => {
    _.debug("PinState Updated", { state: c.pin.state }), a2 && c.pin.state && a2(c.pin.state);
  }, [c.pin.state, a2]), e.useEffect(() => {
    _.debug("Widget Updated", { widgetState: c.widget.state }), n && c.widget.state && n(c.widget.state);
  }, [n, c.widget.state]), e.createElement(Dn.Provider, { value: c }, r2);
}
var ya = e.forwardRef(
  function({ trackRef: a2, ...n }, r2) {
    const d = Is(a2), f = Xt2(d, { bands: 7, loPass: 300 });
    return e.createElement(
      "svg",
      {
        ref: r2,
        width: "100%",
        height: "100%",
        viewBox: "0 0 200 90",
        ...n,
        className: "lk-audio-visualizer"
      },
      e.createElement("rect", { x: "0", y: "0", width: "100%", height: "100%" }),
      e.createElement(
        "g",
        {
          style: {
            transform: `translate(${(200 - 7 * 10) / 2}px, 0)`
          }
        },
        f.map((m, p) => e.createElement(
          "rect",
          {
            key: p,
            x: p * 10,
            y: 90 / 2 - m * 50 / 2,
            width: 6,
            height: m * 50
          }
        ))
      )
    );
  }
);
function Ma({ participants: t, ...a2 }) {
  return e.createElement(e.Fragment, null, t.map((n) => e.createElement(Nn.Provider, { value: n, key: n.identity }, $2(a2.children))));
}
function Ra({ volume: t, muted: a2 }) {
  const n = Wt2(
    [Track.Source.Microphone, Track.Source.ScreenShareAudio, Track.Source.Unknown],
    {
      updateOnlyOn: [],
      onlySubscribed: true
    }
  ).filter((r2) => !Oo(r2.participant) && r2.publication.kind === Track.Kind.Audio);
  return e.createElement("div", { style: { display: "none" } }, n.map((r2) => e.createElement(
    q3,
    {
      key: N(r2),
      trackRef: r2,
      volume: t,
      muted: a2
    }
  )));
}
var ba = e.forwardRef(function({ childrenPosition: a2 = "before", children: n, ...r2 }, c) {
  const { name: s } = Ft();
  return e.createElement("span", { ref: c, ...r2 }, a2 === "before" && n, s, a2 === "after" && n);
});
function Dt3(t) {
  const a2 = e.useMemo(() => R2(t, { className: "lk-toast" }), [t]);
  return e.createElement("div", { ...a2 }, t.children);
}
var Ut3 = (t) => {
  const a2 = [];
  for (let n = 0; n < t; n++)
    a2.push([n, t - 1 - n]);
  return a2;
};
var J3 = (t) => [[Math.floor(t / 2)], [-1]];
var Gt3 = (t, a2, n) => {
  const [r2, c] = (0, import_react.useState)(0), [s, i] = (0, import_react.useState)([[]]);
  (0, import_react.useEffect)(() => {
    if (t === "thinking")
      i(J3(a2));
    else if (t === "connecting" || t === "initializing") {
      const o = [...Ut3(a2)];
      i(o);
    } else i(t === "listening" ? J3(a2) : t === void 0 ? [new Array(a2).fill(0).map((o, u) => u)] : [[]]);
    c(0);
  }, [t, a2]);
  const l = (0, import_react.useRef)(null);
  return (0, import_react.useEffect)(() => {
    let o = performance.now();
    const u = (d) => {
      d - o >= n && (c((m) => m + 1), o = d), l.current = requestAnimationFrame(u);
    };
    return l.current = requestAnimationFrame(u), () => {
      l.current !== null && cancelAnimationFrame(l.current);
    };
  }, [n, a2, t, s.length]), s[r2 % s.length];
};
var Qt3 = /* @__PURE__ */ new Map([
  ["connecting", 2e3],
  ["initializing", 2e3],
  ["listening", 500],
  ["thinking", 150]
]);
var Xt3 = (t, a2) => {
  if (t === void 0)
    return 1e3;
  let n = Qt3.get(t);
  if (n)
    switch (t) {
      case "connecting":
        n /= a2;
        break;
    }
  return n;
};
var Yt3 = e.forwardRef(
  function({ state: a2, options: n, barCount: r2 = 15, trackRef: c, children: s, ...i }, l) {
    const o = R2(i, { className: "lk-audio-bar-visualizer" });
    let u = Rn();
    c && (u = c);
    const d = Xt2(u, {
      bands: r2,
      loPass: 100,
      hiPass: 200
    }), f = (n == null ? void 0 : n.minHeight) ?? 20, m = (n == null ? void 0 : n.maxHeight) ?? 100, p = Gt3(
      a2,
      r2,
      Xt3(a2, r2) ?? 100
    );
    return e.createElement("div", { ref: l, ...o, "data-lk-va-state": a2 }, d.map(
      (E, h2) => s ? $2(s, {
        "data-lk-highlighted": p.includes(h2),
        "data-lk-bar-index": h2,
        class: "lk-audio-bar",
        style: { height: `${Math.min(m, Math.max(f, E * 100 + 5))}%` }
      }) : e.createElement(
        "span",
        {
          key: h2,
          "data-lk-highlighted": p.includes(h2),
          "data-lk-bar-index": h2,
          className: `lk-audio-bar ${p.includes(h2) && "lk-highlighted"}`,
          style: {
            // TODO transform animations would be more performant, however the border-radius gets distorted when using scale transforms. a 9-slice approach (or 3 in this case) could work
            // transform: `scale(1, ${Math.min(maxHeight, Math.max(minHeight, volume))}`,
            height: `${Math.min(m, Math.max(f, E * 100 + 5))}%`
          }
        }
      )
    ));
  }
);
var Sa = e.forwardRef(
  function({
    children: a2,
    disableSpeakingIndicator: n,
    onParticipantClick: r2,
    trackRef: c,
    ...s
  }, i) {
    const l = Is(c), { elementProps: o } = It2({
      trackRef: l,
      htmlProps: s,
      disableSpeakingIndicator: n,
      onParticipantClick: r2
    });
    return e.createElement("div", { ref: i, style: { position: "relative", minHeight: "160px" }, ...o }, e.createElement(Mn.Provider, { value: l }, a2 ?? e.createElement(e.Fragment, null, F(l) && e.createElement(q3, { trackRef: l }), e.createElement(Yt3, { barCount: 7, options: { minHeight: 8 } }), e.createElement("div", { className: "lk-participant-metadata" }, e.createElement("div", { className: "lk-participant-metadata-item" }, e.createElement(de2, { trackRef: l }), e.createElement(B2, null)), e.createElement(ue2, { className: "lk-participant-metadata-item" })))));
  }
);
function Ca(t) {
  const [a2, n] = e.useState(void 0), r2 = I(t.room);
  return e.useEffect(() => {
    switch (r2) {
      case ConnectionState.Reconnecting:
        n(
          e.createElement(e.Fragment, null, e.createElement(U4, { className: "lk-spinner" }), " Reconnecting")
        );
        break;
      case ConnectionState.Connecting:
        n(
          e.createElement(e.Fragment, null, e.createElement(U4, { className: "lk-spinner" }), " Connecting")
        );
        break;
      case ConnectionState.Disconnected:
        n(e.createElement(e.Fragment, null, "Disconnected"));
        break;
      default:
        n(void 0);
        break;
    }
  }, [r2]), a2 ? e.createElement(Dt3, { className: "lk-toast-connection-state" }, a2) : e.createElement(e.Fragment, null);
}
var Ia = e.forwardRef(
  function({ entry: a2, hideName: n = false, hideTimestamp: r2 = false, messageFormatter: c, ...s }, i) {
    var f, m, p;
    const l = e.useMemo(() => c ? c(a2.message) : a2.message, [a2.message, c]), o = !!a2.editTimestamp, u = new Date(a2.timestamp), d = navigator ? navigator.language : "en-US";
    return e.createElement(
      "li",
      {
        ref: i,
        className: "lk-chat-entry",
        title: u.toLocaleTimeString(d, { timeStyle: "full" }),
        "data-lk-message-origin": (f = a2.from) != null && f.isLocal ? "local" : "remote",
        ...s
      },
      (!r2 || !n || o) && e.createElement("span", { className: "lk-meta-data" }, !n && e.createElement("strong", { className: "lk-participant-name" }, ((m = a2.from) == null ? void 0 : m.name) ?? ((p = a2.from) == null ? void 0 : p.identity)), (!r2 || o) && e.createElement("span", { className: "lk-timestamp" }, o && "edited ", u.toLocaleTimeString(d, { timeStyle: "short" }))),
      e.createElement("span", { className: "lk-message-body" }, l)
    );
  }
);
function Pa(t) {
  return Ro(t, Mo()).map((a2, n) => {
    if (typeof a2 == "string")
      return a2;
    {
      const r2 = a2.content.toString(), c = a2.type === "url" ? /^http(s?):\/\//.test(r2) ? r2 : `https://${r2}` : `mailto:${r2}`;
      return e.createElement("a", { className: "lk-chat-link", key: n, href: c, target: "_blank", rel: "noreferrer" }, r2);
    }
  });
}

// node_modules/@livekit/components-react/dist/prefabs.mjs
function ee2({
  messageFormatter: a2,
  messageDecoder: l,
  messageEncoder: i,
  channelTopic: c,
  ...E
}) {
  const p = e2.useRef(null), m = e2.useRef(null), u = e2.useMemo(() => ({ messageDecoder: l, messageEncoder: i, channelTopic: c }), [l, i, c]), { send: d, chatMessages: g, isSending: t } = $t2(u), r2 = xo(), o = e2.useRef(0);
  async function S(n) {
    n.preventDefault(), p.current && p.current.value.trim() !== "" && d && (await d(p.current.value), p.current.value = "", p.current.focus());
  }
  return e2.useEffect(() => {
    var n;
    m && ((n = m.current) == null || n.scrollTo({ top: m.current.scrollHeight }));
  }, [m, g]), e2.useEffect(() => {
    var s, v, f, b2, w;
    if (!r2 || g.length === 0)
      return;
    if ((s = r2.widget.state) != null && s.showChat && g.length > 0 && o.current !== ((v = g[g.length - 1]) == null ? void 0 : v.timestamp)) {
      o.current = (f = g[g.length - 1]) == null ? void 0 : f.timestamp;
      return;
    }
    const n = g.filter(
      (L2) => !o.current || L2.timestamp > o.current
    ).length, { widget: h2 } = r2;
    n > 0 && ((b2 = h2.state) == null ? void 0 : b2.unreadMessages) !== n && ((w = h2.dispatch) == null || w.call(h2, { msg: "unread_msg", count: n }));
  }, [g, r2 == null ? void 0 : r2.widget]), e2.createElement("div", { ...E, className: "lk-chat" }, e2.createElement("div", { className: "lk-chat-header" }, "Messages", e2.createElement(ca, { className: "lk-close-button" }, e2.createElement(oa, null))), e2.createElement("ul", { className: "lk-list lk-chat-messages", ref: m }, E.children ? g.map(
    (n, h2) => $2(E.children, {
      entry: n,
      key: n.id ?? h2,
      messageFormatter: a2
    })
  ) : g.map((n, h2, s) => {
    const v = h2 >= 1 && s[h2 - 1].from === n.from, f = h2 >= 1 && n.timestamp - s[h2 - 1].timestamp < 6e4;
    return e2.createElement(
      Ia,
      {
        key: n.id ?? h2,
        hideName: v,
        hideTimestamp: v === false ? false : f,
        entry: n,
        messageFormatter: a2
      }
    );
  })), e2.createElement("form", { className: "lk-chat-form", onSubmit: S }, e2.createElement(
    "input",
    {
      className: "lk-form-control lk-chat-form-input",
      disabled: t,
      ref: p,
      type: "text",
      placeholder: "Enter a message...",
      onInput: (n) => n.stopPropagation(),
      onKeyDown: (n) => n.stopPropagation(),
      onKeyUp: (n) => n.stopPropagation()
    }
  ), e2.createElement("button", { type: "submit", className: "lk-button lk-chat-form-button", disabled: t }, "Send")));
}
function O3({
  kind: a2,
  initialSelection: l,
  onActiveDeviceChange: i,
  tracks: c,
  requestPermissions: E = false,
  ...p
}) {
  const [m, u] = e2.useState(false), [d, g] = e2.useState([]), [t, r2] = e2.useState(true), [o, S] = e2.useState(E), n = (f, b2) => {
    _.debug("handle device change"), u(false), i == null || i(f, b2);
  }, h2 = e2.useRef(null), s = e2.useRef(null);
  e2.useLayoutEffect(() => {
    m && S(true);
  }, [m]), e2.useLayoutEffect(() => {
    h2.current && s.current && (d || t) && Io(h2.current, s.current).then(({ x: f, y: b2 }) => {
      s.current && Object.assign(s.current.style, { left: `${f}px`, top: `${b2}px` });
    }), r2(false);
  }, [h2, s, d, t]);
  const v = e2.useCallback(
    (f) => {
      s.current && f.target !== h2.current && m && Do(s.current, f) && u(false);
    },
    [m, s, h2]
  );
  return e2.useEffect(() => (document.addEventListener("click", v), window.addEventListener("resize", () => r2(true)), () => {
    document.removeEventListener("click", v), window.removeEventListener("resize", () => r2(true));
  }), [v, r2]), e2.createElement(e2.Fragment, null, e2.createElement(
    "button",
    {
      className: "lk-button lk-button-menu",
      "aria-pressed": m,
      ...p,
      onClick: () => u(!m),
      ref: h2
    },
    p.children
  ), !p.disabled && e2.createElement(
    "div",
    {
      className: "lk-device-menu",
      ref: s,
      style: { visibility: m ? "visible" : "hidden" }
    },
    a2 ? e2.createElement(
      ma,
      {
        initialSelection: l,
        onActiveDeviceChange: (f) => n(a2, f),
        onDeviceListChange: g,
        kind: a2,
        track: c == null ? void 0 : c[a2],
        requestPermissions: o
      }
    ) : e2.createElement(e2.Fragment, null, e2.createElement("div", { className: "lk-device-menu-heading" }, "Audio inputs"), e2.createElement(
      ma,
      {
        kind: "audioinput",
        onActiveDeviceChange: (f) => n("audioinput", f),
        onDeviceListChange: g,
        track: c == null ? void 0 : c.audioinput,
        requestPermissions: o
      }
    ), e2.createElement("div", { className: "lk-device-menu-heading" }, "Video inputs"), e2.createElement(
      ma,
      {
        kind: "videoinput",
        onActiveDeviceChange: (f) => n("videoinput", f),
        onDeviceListChange: g,
        track: c == null ? void 0 : c.videoinput,
        requestPermissions: o
      }
    ))
  ));
}
function W2() {
  e2.useEffect(() => {
    da();
  }, []);
}
function ze2(a2, l) {
  const [i, c] = e2.useState(), E = e2.useMemo(() => new h(), []);
  return e2.useEffect(() => {
    let p = false, m = [];
    return E.lock().then(async (u) => {
      try {
        (a2.audio || a2.video) && (m = await createLocalTracks(a2), p ? m.forEach((d) => d.stop()) : c(m));
      } catch (d) {
        l && d instanceof Error ? l(d) : _.error(d);
      } finally {
        u();
      }
    }), () => {
      p = true, m.forEach((u) => {
        u.stop();
      });
    };
  }, [JSON.stringify(a2), l, E]), i;
}
function Ze3(a2, l, i) {
  const [c, E] = e2.useState(null), [p, m] = e2.useState(false), u = wt2({ kind: i }), [d, g] = e2.useState(
    void 0
  ), [t, r2] = e2.useState(), [o, S] = e2.useState(l);
  e2.useEffect(() => {
    S(l);
  }, [l]);
  const n = async (v, f) => {
    try {
      const b2 = f === "videoinput" ? await createLocalVideoTrack({
        deviceId: v,
        resolution: VideoPresets.h720.resolution
      }) : await createLocalAudioTrack({ deviceId: v }), w = await b2.getDeviceId();
      w && v !== w && (s.current = w, S(w)), r2(b2);
    } catch (b2) {
      b2 instanceof Error && E(b2);
    }
  }, h2 = async (v, f) => {
    await v.setDeviceId(f), s.current = f;
  }, s = e2.useRef(o);
  return e2.useEffect(() => {
    a2 && !t && !c && !p && (_.debug("creating track", i), m(true), n(o, i).finally(() => {
      m(false);
    }));
  }, [a2, t, c, p]), e2.useEffect(() => {
    t && (a2 ? d != null && d.deviceId && s.current !== (d == null ? void 0 : d.deviceId) ? (_.debug(`switching ${i} device from`, s.current, d.deviceId), h2(t, d.deviceId)) : (_.debug(`unmuting local ${i} track`), t.unmute()) : (_.debug(`muting ${i} track`), t.mute().then(() => _.debug(t.mediaStreamTrack))));
  }, [t, d, a2, i]), e2.useEffect(() => () => {
    t && (_.debug(`stopping local ${i} track`), t.stop(), t.mute());
  }, []), e2.useEffect(() => {
    g(u == null ? void 0 : u.find((v) => v.deviceId === o));
  }, [o, u]), {
    selectedDevice: d,
    localTrack: t,
    deviceError: c
  };
}
function et4({
  defaults: a2 = {},
  onValidate: l,
  onSubmit: i,
  onError: c,
  debug: E,
  joinLabel: p = "Join Room",
  micLabel: m = "Microphone",
  camLabel: u = "Camera",
  userLabel: d = "Username",
  persistUserChoices: g = true,
  ...t
}) {
  const [r2, o] = e2.useState(be), S = {
    ...a2.audioDeviceId !== void 0 && { audioDeviceId: a2.audioDeviceId },
    ...a2.videoDeviceId !== void 0 && { videoDeviceId: a2.videoDeviceId },
    ...a2.audioEnabled !== void 0 && { audioEnabled: a2.audioEnabled },
    ...a2.videoEnabled !== void 0 && { videoEnabled: a2.videoEnabled },
    ...a2.username !== void 0 && { username: a2.username }
  }, {
    userChoices: n,
    saveAudioInputDeviceId: h2,
    saveAudioInputEnabled: s,
    saveVideoInputDeviceId: v,
    saveVideoInputEnabled: f,
    saveUsername: b2
  } = Gt2({
    defaults: S,
    preventSave: !g,
    preventLoad: !g
  }), [w, L2] = e2.useState(n.audioEnabled), [I3, D4] = e2.useState(n.videoEnabled), [T2, $3] = e2.useState(
    n.audioDeviceId
  ), [k2, N2] = e2.useState(
    n.videoDeviceId
  ), [V, ae2] = e2.useState(n.username);
  e2.useEffect(() => {
    s(w);
  }, [w, s]), e2.useEffect(() => {
    f(I3);
  }, [I3, f]), e2.useEffect(() => {
    h2(T2);
  }, [T2, h2]), e2.useEffect(() => {
    v(k2);
  }, [k2, v]), e2.useEffect(() => {
    b2(V);
  }, [V, b2]);
  const A3 = ze2(
    {
      audio: w ? { deviceId: n.audioDeviceId } : false,
      video: I3 ? { deviceId: n.videoDeviceId } : false
    },
    c
  ), U5 = e2.useRef(null), M = e2.useMemo(
    () => A3 == null ? void 0 : A3.filter((C) => C.kind === Track.Kind.Video)[0],
    [A3]
  ), ne2 = e2.useMemo(() => {
    if (M) {
      const { facingMode: C } = facingModeFromLocalTrack(M);
      return C;
    } else
      return "undefined";
  }, [M]), j4 = e2.useMemo(
    () => A3 == null ? void 0 : A3.filter((C) => C.kind === Track.Kind.Audio)[0],
    [A3]
  );
  e2.useEffect(() => (U5.current && M && (M.unmute(), M.attach(U5.current)), () => {
    M == null || M.detach();
  }), [M]);
  const [ce, se3] = e2.useState(), _2 = e2.useCallback(
    (C) => typeof l == "function" ? l(C) : C.username !== "",
    [l]
  );
  e2.useEffect(() => {
    const C = {
      username: V,
      videoEnabled: I3,
      videoDeviceId: k2,
      audioEnabled: w,
      audioDeviceId: T2
    };
    o(C), se3(_2(C));
  }, [V, I3, _2, w, T2, k2]);
  function ie2(C) {
    C.preventDefault(), _2(r2) ? typeof i == "function" && i(r2) : _.warn("Validation failed with: ", r2);
  }
  return W2(), e2.createElement("div", { className: "lk-prejoin", ...t }, e2.createElement("div", { className: "lk-video-container" }, M && e2.createElement("video", { ref: U5, width: "1280", height: "720", "data-lk-facing-mode": ne2 }), (!M || !I3) && e2.createElement("div", { className: "lk-camera-off-note" }, e2.createElement(ht3, null))), e2.createElement("div", { className: "lk-button-group-container" }, e2.createElement("div", { className: "lk-button-group audio" }, e2.createElement(
    ga,
    {
      initialState: w,
      source: Track.Source.Microphone,
      onChange: (C) => L2(C)
    },
    m
  ), e2.createElement("div", { className: "lk-button-group-menu" }, e2.createElement(
    O3,
    {
      initialSelection: T2,
      kind: "audioinput",
      disabled: !j4,
      tracks: { audioinput: j4 },
      onActiveDeviceChange: (C, F2) => $3(F2)
    }
  ))), e2.createElement("div", { className: "lk-button-group video" }, e2.createElement(
    ga,
    {
      initialState: I3,
      source: Track.Source.Camera,
      onChange: (C) => D4(C)
    },
    u
  ), e2.createElement("div", { className: "lk-button-group-menu" }, e2.createElement(
    O3,
    {
      initialSelection: k2,
      kind: "videoinput",
      disabled: !M,
      tracks: { videoinput: M },
      onActiveDeviceChange: (C, F2) => N2(F2)
    }
  )))), e2.createElement("form", { className: "lk-username-container" }, e2.createElement(
    "input",
    {
      className: "lk-form-control",
      id: "username",
      name: "username",
      type: "text",
      defaultValue: V,
      placeholder: d,
      onChange: (C) => ae2(C.target.value),
      autoComplete: "off"
    }
  ), e2.createElement(
    "button",
    {
      className: "lk-button lk-join-button",
      type: "submit",
      onClick: ie2,
      disabled: !ce
    },
    p
  )), E && e2.createElement(e2.Fragment, null, e2.createElement("strong", null, "User Choices:"), e2.createElement("ul", { className: "lk-list", style: { overflow: "hidden", maxWidth: "15rem" } }, e2.createElement("li", null, "Username: ", `${r2.username}`), e2.createElement("li", null, "Video Enabled: ", `${r2.videoEnabled}`), e2.createElement("li", null, "Audio Enabled: ", `${r2.audioEnabled}`), e2.createElement("li", null, "Video Device: ", `${r2.videoDeviceId}`), e2.createElement("li", null, "Audio Device: ", `${r2.audioDeviceId}`))));
}
function Ke4({ props: a2 }) {
  const { dispatch: l, state: i } = As().widget, c = "lk-button lk-settings-toggle";
  return { mergedProps: e2.useMemo(() => U2(a2, {
    className: c,
    onClick: () => {
      l && l({ msg: "toggle_settings" });
    },
    "aria-pressed": i != null && i.showSettings ? "true" : "false"
  }), [a2, c, l, i]) };
}
var Ge3 = e2.forwardRef(
  function(l, i) {
    const { mergedProps: c } = Ke4({ props: l });
    return e2.createElement("button", { ref: i, ...c }, l.children);
  }
);
function te2({
  variation: a2,
  controls: l,
  saveUserChoices: i = true,
  onDeviceError: c,
  ...E
}) {
  var $3;
  const [p, m] = e2.useState(false), u = xo();
  e2.useEffect(() => {
    var k2, N2;
    ((k2 = u == null ? void 0 : u.widget.state) == null ? void 0 : k2.showChat) !== void 0 && m((N2 = u == null ? void 0 : u.widget.state) == null ? void 0 : N2.showChat);
  }, [($3 = u == null ? void 0 : u.widget.state) == null ? void 0 : $3.showChat]);
  const g = gt(`(max-width: ${p ? 1e3 : 760}px)`) ? "minimal" : "verbose";
  a2 ?? (a2 = g);
  const t = { leave: true, ...l }, r2 = Et2();
  r2 ? (t.camera ?? (t.camera = r2.canPublish), t.microphone ?? (t.microphone = r2.canPublish), t.screenShare ?? (t.screenShare = r2.canPublish), t.chat ?? (t.chat = r2.canPublishData && (l == null ? void 0 : l.chat))) : (t.camera = false, t.chat = false, t.microphone = false, t.screenShare = false);
  const o = e2.useMemo(
    () => a2 === "minimal" || a2 === "verbose",
    [a2]
  ), S = e2.useMemo(
    () => a2 === "textOnly" || a2 === "verbose",
    [a2]
  ), n = Fo(), [h2, s] = e2.useState(false), v = e2.useCallback(
    (k2) => {
      s(k2);
    },
    [s]
  ), f = R2({ className: "lk-control-bar" }, E), {
    saveAudioInputEnabled: b2,
    saveVideoInputEnabled: w,
    saveAudioInputDeviceId: L2,
    saveVideoInputDeviceId: I3
  } = Gt2({ preventSave: !i }), D4 = e2.useCallback(
    (k2, N2) => N2 ? b2(k2) : null,
    [b2]
  ), T2 = e2.useCallback(
    (k2, N2) => N2 ? w(k2) : null,
    [w]
  );
  return e2.createElement("div", { ...f }, t.microphone && e2.createElement("div", { className: "lk-button-group" }, e2.createElement(
    ga,
    {
      source: Track.Source.Microphone,
      showIcon: o,
      onChange: D4,
      onDeviceError: (k2) => c == null ? void 0 : c({ source: Track.Source.Microphone, error: k2 })
    },
    S && "Microphone"
  ), e2.createElement("div", { className: "lk-button-group-menu" }, e2.createElement(
    O3,
    {
      kind: "audioinput",
      onActiveDeviceChange: (k2, N2) => L2(N2 ?? "")
    }
  ))), t.camera && e2.createElement("div", { className: "lk-button-group" }, e2.createElement(
    ga,
    {
      source: Track.Source.Camera,
      showIcon: o,
      onChange: T2,
      onDeviceError: (k2) => c == null ? void 0 : c({ source: Track.Source.Camera, error: k2 })
    },
    S && "Camera"
  ), e2.createElement("div", { className: "lk-button-group-menu" }, e2.createElement(
    O3,
    {
      kind: "videoinput",
      onActiveDeviceChange: (k2, N2) => I3(N2 ?? "")
    }
  ))), t.screenShare && n && e2.createElement(
    ga,
    {
      source: Track.Source.ScreenShare,
      captureOptions: { audio: true, selfBrowserSurface: "include" },
      showIcon: o,
      onChange: v,
      onDeviceError: (k2) => c == null ? void 0 : c({ source: Track.Source.ScreenShare, error: k2 })
    },
    S && (h2 ? "Stop screen share" : "Share screen")
  ), t.chat && e2.createElement(ca, null, o && e2.createElement(sa, null), S && "Chat"), t.settings && e2.createElement(Ge3, null, o && e2.createElement(ia, null), S && "Settings"), t.leave && e2.createElement(la, null, o && e2.createElement(ua, null), S && "Leave"), e2.createElement(ha, null));
}
function tt4({
  chatMessageFormatter: a2,
  chatMessageDecoder: l,
  chatMessageEncoder: i,
  SettingsComponent: c,
  ...E
}) {
  var n, h2;
  const [p, m] = e2.useState({
    showChat: false,
    unreadMessages: 0,
    showSettings: false
  }), u = e2.useRef(null), d = Wt2(
    [
      { source: Track.Source.Camera, withPlaceholder: true },
      { source: Track.Source.ScreenShare, withPlaceholder: false }
    ],
    { updateOnlyOn: [RoomEvent.ActiveSpeakersChanged], onlySubscribed: false }
  ), g = (s) => {
    _.debug("updating widget state", s), m(s);
  }, t = Os(), r2 = d.filter(F).filter((s) => s.publication.source === Track.Source.ScreenShare), o = (n = Lt2(t)) == null ? void 0 : n[0], S = d.filter((s) => !Ao(s, o));
  return e2.useEffect(() => {
    var s, v, f, b2, w, L2;
    if (r2.some((I3) => I3.publication.isSubscribed) && u.current === null ? (_.debug("Auto set screen share focus:", { newScreenShareTrack: r2[0] }), (v = (s = t.pin).dispatch) == null || v.call(s, { msg: "set_pin", trackReference: r2[0] }), u.current = r2[0]) : u.current && !r2.some(
      (I3) => {
        var D4, T2;
        return I3.publication.trackSid === ((T2 = (D4 = u.current) == null ? void 0 : D4.publication) == null ? void 0 : T2.trackSid);
      }
    ) && (_.debug("Auto clearing screen share focus."), (b2 = (f = t.pin).dispatch) == null || b2.call(f, { msg: "clear_pin" }), u.current = null), o && !F(o)) {
      const I3 = d.find(
        (D4) => D4.participant.identity === o.participant.identity && D4.source === o.source
      );
      I3 !== o && F(I3) && ((L2 = (w = t.pin).dispatch) == null || L2.call(w, { msg: "set_pin", trackReference: I3 }));
    }
  }, [
    r2.map((s) => `${s.publication.trackSid}_${s.publication.isSubscribed}`).join(),
    (h2 = o == null ? void 0 : o.publication) == null ? void 0 : h2.trackSid,
    d
  ]), W2(), e2.createElement("div", { className: "lk-video-conference", ...E }, _o() && e2.createElement(
    ka,
    {
      value: t,
      onWidgetChange: g
    },
    e2.createElement("div", { className: "lk-video-conference-inner" }, o ? e2.createElement("div", { className: "lk-focus-layout-wrapper" }, e2.createElement(va, null, e2.createElement(wa, { tracks: S }, e2.createElement(jt3, null)), o && e2.createElement(pa, { trackRef: o }))) : e2.createElement("div", { className: "lk-grid-layout-wrapper" }, e2.createElement(Ea, { tracks: d }, e2.createElement(jt3, null))), e2.createElement(te2, { controls: { chat: true, settings: !!c } })),
    e2.createElement(
      ee2,
      {
        style: { display: p.showChat ? "grid" : "none" },
        messageFormatter: a2,
        messageEncoder: i,
        messageDecoder: l
      }
    ),
    c && e2.createElement(
      "div",
      {
        className: "lk-settings-menu-modal",
        style: { display: p.showSettings ? "block" : "none" }
      },
      e2.createElement(c, null)
    )
  ), e2.createElement(Ra, null), e2.createElement(Ca, null));
}
function at4({ ...a2 }) {
  const [l, i] = e2.useState({
    showChat: false,
    unreadMessages: 0
  }), c = Wt2([Track.Source.Microphone]);
  return W2(), e2.createElement(ka, { onWidgetChange: i }, e2.createElement("div", { className: "lk-audio-conference", ...a2 }, e2.createElement("div", { className: "lk-audio-conference-stage" }, e2.createElement(fe2, { tracks: c }, e2.createElement(Sa, null))), e2.createElement(
    te2,
    {
      controls: { microphone: true, screenShare: false, camera: false, chat: true }
    }
  ), l.showChat && e2.createElement(ee2, null)));
}
function nt4({
  controls: a2,
  saveUserChoices: l = true,
  onDeviceError: i,
  ...c
}) {
  const E = { leave: true, microphone: true, ...a2 }, p = Et2(), { microphoneTrack: m, localParticipant: u } = Ye2(), d = e2.useMemo(() => ({
    participant: u,
    source: Track.Source.Microphone,
    publication: m
  }), [u, m]);
  p ? E.microphone ?? (E.microphone = p.canPublish) : E.microphone = false;
  const g = R2({ className: "lk-agent-control-bar" }, c), { saveAudioInputEnabled: t, saveAudioInputDeviceId: r2 } = Gt2({
    preventSave: !l
  }), o = e2.useCallback(
    (S, n) => {
      n && t(S);
    },
    [t]
  );
  return e2.createElement("div", { ...g }, E.microphone && e2.createElement("div", { className: "lk-button-group" }, e2.createElement(
    ga,
    {
      source: Track.Source.Microphone,
      showIcon: true,
      onChange: o,
      onDeviceError: (S) => i == null ? void 0 : i({ source: Track.Source.Microphone, error: S })
    },
    e2.createElement(Yt3, { trackRef: d, barCount: 7, options: { minHeight: 5 } })
  ), e2.createElement("div", { className: "lk-button-group-menu" }, e2.createElement(
    O3,
    {
      kind: "audioinput",
      onActiveDeviceChange: (S, n) => r2(n ?? "")
    }
  ))), E.leave && e2.createElement(la, null, "Disconnect"), e2.createElement(ha, null));
}
export {
  at4 as AudioConference,
  q3 as AudioTrack,
  ya as AudioVisualizer,
  Yt3 as BarVisualizer,
  Ke3 as CameraDisabledIcon,
  et3 as CameraIcon,
  wa as CarouselLayout,
  ee2 as Chat,
  oa as ChatCloseIcon,
  Ia as ChatEntry,
  sa as ChatIcon,
  ca as ChatToggle,
  D3 as Chevron,
  na as ClearPinButton,
  ue2 as ConnectionQualityIndicator,
  ra as ConnectionState,
  Ca as ConnectionStateToast,
  te2 as ControlBar,
  la as DisconnectButton,
  pa as FocusLayout,
  va as FocusLayoutContainer,
  dt3 as FocusToggle,
  tt3 as FocusToggleIcon,
  ia as GearIcon,
  Ea as GridLayout,
  Co as LKFeatureContext,
  Dn as LayoutContext,
  ka as LayoutContextProvider,
  ua as LeaveIcon,
  z2 as LiveKitRoom,
  at3 as LockLockedIcon,
  O3 as MediaDeviceMenu,
  ma as MediaDeviceSelect,
  nt3 as MicDisabledIcon,
  rt3 as MicIcon,
  Sa as ParticipantAudioTile,
  Nn as ParticipantContext,
  Ht3 as ParticipantContextIfNeeded,
  Ma as ParticipantLoop,
  B2 as ParticipantName,
  ht3 as ParticipantPlaceholder,
  jt3 as ParticipantTile,
  et4 as PreJoin,
  ct3 as QualityExcellentIcon,
  lt3 as QualityGoodIcon,
  ot2 as QualityPoorIcon,
  st3 as QualityUnknownIcon,
  Ra as RoomAudioRenderer,
  $n as RoomContext,
  ba as RoomName,
  se2 as ScreenShareIcon,
  it3 as ScreenShareStopIcon,
  U4 as SpinnerIcon,
  fa as StartAudio,
  ha as StartMediaButton,
  Dt3 as Toast,
  fe2 as TrackLoop,
  de2 as TrackMutedIndicator,
  Mn as TrackRefContext,
  Bt3 as TrackRefContextIfNeeded,
  ga as TrackToggle,
  ut3 as UnfocusToggleIcon,
  tt4 as VideoConference,
  Zt3 as VideoTrack,
  nt4 as VoiceAssistantControlBar,
  Pa as formatChatMessageLinks,
  F as isTrackReference,
  $o as setLogExtension,
  No as setLogLevel,
  St2 as useAudioPlayback,
  xt2 as useAudioWaveform,
  $t2 as useChat,
  Ut2 as useChatToggle,
  vt2 as useClearPinButton,
  ht2 as useConnectionQualityIndicator,
  I as useConnectionState,
  Os as useCreateLayoutContext,
  Mt2 as useDataChannel,
  yt2 as useDisconnectButton,
  Ls as useEnsureCreateLayoutContext,
  ks as useEnsureLayoutContext,
  Ms as useEnsureParticipant,
  Ns as useEnsureRoom,
  Is as useEnsureTrackRef,
  Xe2 as useFacingMode,
  $s as useFeatureContext,
  Pt2 as useFocusToggle,
  kt2 as useGridLayout,
  Ht2 as useIsEncrypted,
  z3 as useIsMuted,
  Zt2 as useIsRecording,
  xe2 as useIsSpeaking,
  As as useLayoutContext,
  T as useLiveKitRoom,
  Ye2 as useLocalParticipant,
  Et2 as useLocalParticipantPermissions,
  xo as useMaybeLayoutContext,
  Eo as useMaybeParticipantContext,
  To as useMaybeRoomContext,
  Rn as useMaybeTrackRefContext,
  Tt2 as useMediaDeviceSelect,
  wt2 as useMediaDevices,
  Xt2 as useMultibandTrackVolume,
  At2 as usePagination,
  Yt2 as useParticipantAttribute,
  ft2 as useParticipantAttributes,
  Ds as useParticipantContext,
  Ct2 as useParticipantInfo,
  Ot2 as useParticipantPermissions,
  It2 as useParticipantTile,
  it2 as useParticipantTracks,
  Dt2 as useParticipants,
  Gt2 as usePersistentUserChoices,
  Lt2 as usePinnedTracks,
  Ze3 as usePreviewDevice,
  ze2 as usePreviewTracks,
  Rt2 as useRemoteParticipant,
  G2 as useRemoteParticipants,
  Rs as useRoomContext,
  Ft as useRoomInfo,
  Nt2 as useSortedParticipants,
  Ze2 as useSpeakingParticipants,
  Vt2 as useStartAudio,
  Bt2 as useStartVideo,
  zt2 as useSwipe,
  qt2 as useToken,
  Qt2 as useTrackByName,
  Jt2 as useTrackMutedIndicator,
  _s as useTrackRefContext,
  _t2 as useTrackToggle,
  dt2 as useTrackTranscription,
  jt2 as useTrackVolume,
  Wt2 as useTracks,
  Ke2 as useVisualStableUpdate,
  Kt2 as useVoiceAssistant
};
//# sourceMappingURL=@livekit_components-react.js.map
